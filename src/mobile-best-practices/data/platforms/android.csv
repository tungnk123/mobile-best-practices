Category,Guideline,Description,Do,Dont,Code Good,Code Bad,Severity,Docs URL
Compose,State Hoisting,Hoist state to caller for reusable composables,Hoist state to caller pass via parameters,Put state inside low-level composables,fun Counter(count: Int onIncrement: () -> Unit),fun Counter() { var count by remember { mutableStateOf(0) } },High,https://developer.android.com/develop/ui/compose/state#state-hoisting
Compose,rememberSaveable,Use rememberSaveable to survive config changes,rememberSaveable for user input and visible state,remember for state that must survive rotation,"val text by rememberSaveable { mutableStateOf("""") }","val text by remember { mutableStateOf("""") }",High,https://developer.android.com/develop/ui/compose/state#restore-ui-state
Compose,LazyColumn Keys,Always provide stable keys for LazyColumn items,Use unique ID from data model as key,Use index or no key,LazyColumn { items(list key = { it.id }) { } },LazyColumn { items(list) { } },High,https://developer.android.com/develop/ui/compose/lists#item-keys
Compose,Stable Annotations,Mark classes @Stable or @Immutable for skip optimization,Use @Immutable for truly immutable data classes,Pass mutable classes to composables,@Immutable data class UiState(val items: ImmutableList<Item>),data class UiState(val items: List<Item>) // unstable,Medium,https://developer.android.com/develop/ui/compose/performance/stability
Compose,derivedStateOf,Use derivedStateOf for computed values from other states,Wrap expensive computations depending on state,Compute in composition on every recomposition,val filtered by remember { derivedStateOf { list.filter { it.active } } },val filtered = list.filter { it.active } // recomputes every recomposition,Medium,https://developer.android.com/develop/ui/compose/side-effects#derivedstateof
Compose,Modifier Order,Modifier order matters - applied outside-in,Apply clickable before padding for larger touch target,Random modifier ordering,Modifier.clickable { }.padding(16.dp),Modifier.padding(16.dp).clickable { } // small touch target,Medium,https://developer.android.com/develop/ui/compose/modifiers#order-matters
Compose,Side Effects,Use LaunchedEffect/DisposableEffect for side effects,LaunchedEffect for coroutines DisposableEffect for cleanup,Launch coroutines in composition directly,LaunchedEffect(key) { viewModel.load() },rememberCoroutineScope().launch { } // in composition,High,https://developer.android.com/develop/ui/compose/side-effects
Compose,CompositionLocal,Use CompositionLocal sparingly for implicit data,Use for theme-level or widely-used dependencies,Use for passing regular business data,val LocalAnalytics = staticCompositionLocalOf<Analytics> { error('') },CompositionLocal for every dependency,Low,https://developer.android.com/develop/ui/compose/compositionlocal
Compose,Slot APIs,Use slot APIs (content lambdas) for flexible composables,Accept @Composable content parameters,Hardcode composable content,fun Card(content: @Composable () -> Unit) { Surface { content() } },fun Card(title: String body: String) // inflexible,Medium,https://developer.android.com/develop/ui/compose/layouts/basics
Compose,Preview,Write Compose previews for rapid iteration,Create previews with different states and themes,Skip previews for composables,@Preview @Composable fun MyScreenPreview() { MyScreen(UiState.Success(mock)) },No previews only test on device,Low,https://developer.android.com/develop/ui/compose/tooling/previews
Architecture,ViewModel Scope,Use viewModelScope for coroutines in ViewModel,Launch in viewModelScope auto-cancelled on clear,Create custom CoroutineScope in ViewModel,viewModelScope.launch { repo.fetchData() },CoroutineScope(Dispatchers.Main) // not cancelled,High,https://developer.android.com/topic/libraries/architecture/viewmodel
Architecture,StateFlow over LiveData,Prefer StateFlow over LiveData in new code,Use StateFlow with collectAsStateWithLifecycle,Use LiveData in Compose projects,val state: StateFlow<UiState> = _state.asStateFlow(),val state: LiveData<UiState> = _state,Medium,https://developer.android.com/kotlin/flow/stateflow-and-sharedflow
Architecture,Single Activity,Use single Activity with Navigation Compose,One Activity multiple composable destinations,Multiple Activities for each screen,NavHost(navController startDest = 'home') { composable('home') {} },startActivity(Intent(this DetailActivity::class.java)),Medium,https://developer.android.com/guide/navigation/get-started
Architecture,Hilt ViewModel Injection,Inject dependencies into ViewModel via Hilt,Use @HiltViewModel with @Inject constructor,Create ViewModel with manual factory,@HiltViewModel class MyVM @Inject constructor(val repo: Repo) : ViewModel(),class MyVM : ViewModel() { val repo = Repo(ApiService()) },High,https://developer.android.com/training/dependency-injection/hilt-android
Architecture,Repository Pattern,Abstract data sources behind Repository interface,Repository mediates between data sources and domain,ViewModel directly calls API or database,class UserRepo(val api: Api val db: Db) { suspend fun getUser(id) = db.get(id) ?: api.fetch(id) },class MyVM { val data = Retrofit.create(Api::class).getData() },High,https://developer.android.com/topic/architecture/data-layer
Architecture,Sealed Interface for State,Use sealed interface for UI state modeling,Represent all possible states explicitly,Use nullable booleans for state,sealed interface UiState { data object Loading; data class Success(val data: List<Item>); data class Error(val msg: String) },data class UiState(val data: List<Item>? val loading: Boolean val error: String?),High,
Architecture,SavedStateHandle,Use SavedStateHandle for process death survival,Save minimal UI state in SavedStateHandle,Rely only on ViewModel surviving,class MyVM(saved: SavedStateHandle) { val query = saved.getStateFlow('query' '') },class MyVM { var query = '' } // lost on process death,Medium,https://developer.android.com/topic/libraries/architecture/viewmodel/viewmodel-savedstate
Architecture,Multi-Module Structure,Organize large projects into feature modules,feature/ core/ app/ modules with clear boundaries,Single monolithic app module,feature-home/ feature-auth/ core-network/ core-database/ app/,app/src/main/java/com/myapp/everything/,Medium,https://developer.android.com/topic/modularization
Coroutines,Dispatchers Usage,Use correct dispatcher for the work type,IO for network/disk Main for UI Default for CPU,Use Dispatchers.Main for everything,withContext(Dispatchers.IO) { repo.fetchData() },GlobalScope.launch(Dispatchers.Main) { api.fetch() },High,https://developer.android.com/kotlin/coroutines/coroutines-best-practices
Coroutines,Structured Concurrency,Use structured concurrency never GlobalScope,Use viewModelScope lifecycleScope or coroutineScope,Use GlobalScope for fire-and-forget,viewModelScope.launch { loadData() },GlobalScope.launch { loadData() } // leaks,Critical,https://developer.android.com/kotlin/coroutines/coroutines-best-practices
Coroutines,Exception Handling,Handle coroutine exceptions properly,Use try-catch or CoroutineExceptionHandler,Let exceptions crash silently,try { api.fetch() } catch (e: Exception) { emit(Error(e.message)) },launch { api.fetch() } // exception swallowed,High,
Coroutines,Flow Collection,Collect Flow lifecycle-aware in Compose,Use collectAsStateWithLifecycle,Use collectAsState without lifecycle,val state by viewModel.state.collectAsStateWithLifecycle(),val state by viewModel.state.collectAsState() // collects invisible,High,https://developer.android.com/kotlin/flow/stateflow-and-sharedflow
Coroutines,Cancellation,Respect coroutine cancellation properly,Check isActive use ensureActive() in loops,Ignore cancellation in long work,while (isActive) { processNextItem() },while (true) { processNextItem() } // not cancellable,Medium,
Lifecycle,Lifecycle-aware Collection,Collect flows respecting lifecycle,Use repeatOnLifecycle or flowWithLifecycle,Collect in onCreate without lifecycle,lifecycleScope.launch { repeatOnLifecycle(STARTED) { flow.collect {} } },lifecycleScope.launch { flow.collect {} } // background,Critical,https://developer.android.com/topic/libraries/architecture/coroutines
Lifecycle,Configuration Change,Handle configuration changes properly,Use ViewModel + rememberSaveable,Manually handle configChanges in manifest,ViewModel survives; rememberSaveable for UI state,android:configChanges='orientation' // blocks handling,High,https://developer.android.com/guide/topics/resources/runtime-changes
Lifecycle,Process Death,Handle process death restoration,Save state in SavedStateHandle and restore,Assume ViewModel always survives,SavedStateHandle for nav args and transient state,Only ViewModel without SavedStateHandle,Medium,https://developer.android.com/topic/libraries/architecture/saving-states
Lifecycle,onCleared Cleanup,Clean up resources in ViewModel onCleared,Cancel jobs close connections in onCleared,Let resources leak after ViewModel destroyed,override fun onCleared() { connection.close() },No cleanup in onCleared,High,
Lifecycle,BackHandler,Handle predictive back gesture properly,Use BackHandler composable for custom back,Override onBackPressed in Activity,BackHandler(enabled = showDialog) { showDialog = false },override fun onBackPressed() {} // deprecated,Medium,https://developer.android.com/develop/ui/views/touch-and-input/gestures/predictive-back
Performance,Baseline Profile,Generate Baseline Profiles for startup,Use Macrobenchmark to generate include in app,Skip baseline profiles for release,profileinstaller + macrobenchmark BaselineProfileRule,No baseline profile module,High,https://developer.android.com/topic/performance/baselineprofiles
Performance,R8 Full Mode,Enable R8 full mode for max optimization,Set android.enableR8.fullMode=true,Use default R8 mode only,android.enableR8.fullMode=true in gradle.properties,Default R8 without full mode,Medium,https://developer.android.com/build/shrink-code
Performance,Strict Mode,Use StrictMode in debug to detect issues,Enable disk/network on main thread detection,Run StrictMode in release,StrictMode.setThreadPolicy(detectAll().penaltyLog().build()),No StrictMode configured,Medium,https://developer.android.com/reference/android/os/StrictMode
Performance,Compose Stability,Check Compose compiler stability report,Generate stability report fix unstable params,Ignore stability warnings,composeCompiler { reportsDestination = buildDir('compose_reports') },No stability analysis,Medium,https://developer.android.com/develop/ui/compose/performance/stability
Performance,Image Loading Size,Load images at display size not original,Use Coil/Glide size transformations,Load full-res images into small views,AsyncImage(model = ImageRequest.Builder(ctx).data(url).size(200).build()),AsyncImage(model = url) // loads full size,High,
Performance,ProGuard Rules,Write correct ProGuard/R8 rules,Keep serialization models add rules for reflection,Keep everything or nothing,-keep class com.myapp.model.** { *; },-keep class ** { *; } // keeps everything,Medium,https://developer.android.com/build/shrink-code
Performance,Lazy Performance,Optimize LazyColumn/LazyRow performance,Use key contentType avoid heavy items,No keys no contentType,LazyColumn { items(list key = { it.id } contentType = { it.type }) {} },LazyColumn { items(list) { HeavyComposable() } },High,https://developer.android.com/develop/ui/compose/lists
Testing,Compose Test Rule,Use ComposeTestRule for UI tests,Set up test rule with createComposeRule,Test compose with Espresso only,@get:Rule val rule = createComposeRule(); rule.setContent { MyScreen() },ActivityScenarioRule for Compose tests,Medium,https://developer.android.com/develop/ui/compose/testing
Testing,Coroutine Test,Use runTest for testing coroutines,Use Turbine for Flow TestDispatcher for time,Test with Thread.sleep or delay,runTest { viewModel.state.test { assertEquals(Loading awaitItem()) } },runBlocking { delay(1000); assertEquals(expected) },High,https://developer.android.com/kotlin/coroutines/test
Testing,Hilt Test,Use HiltTestApplication for integration tests,Annotate @HiltAndroidTest use @BindValue for fakes,Create Hilt modules manually in tests,@HiltAndroidTest class MyTest { @BindValue val repo: Repo = FakeRepo() },Manual DI setup in test classes,Medium,https://developer.android.com/training/dependency-injection/hilt-testing
Testing,Screenshot Test,Use Paparazzi for Compose screenshot tests,Test visual regressions without emulator,Only visual testing on device,@Test fun snapshot() { paparazzi.snapshot { MyScreen(state) } },Manual visual checking only,Low,https://github.com/cashapp/paparazzi
Material3,Dynamic Color,Use dynamic color theming with Material3,dynamicDarkColorScheme/dynamicLightColorScheme on Android 12+,Hardcoded colors ignoring system theme,val colorScheme = if (Build.VERSION.SDK_INT >= 31) dynamicDarkColorScheme(context) else DarkColorScheme,val colorScheme = darkColorScheme() // ignores wallpaper,Medium,https://developer.android.com/develop/ui/compose/designsystems/material3
Material3,TopAppBar Scroll,Use TopAppBar with scroll behavior,TopAppBar with scrollBehavior for collapsing,Static TopAppBar that doesn't respond to scroll,TopAppBar(title = { Text(title) } scrollBehavior = scrollBehavior),TopAppBar(title = { Text(title) }) // no scroll behavior,Medium,https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary#TopAppBar
Material3,Scaffold Usage,Use Scaffold for standard screen layout,Scaffold with topBar bottomBar snackbarHost floatingActionButton,Manual Column layout mimicking scaffold,Scaffold(topBar = { TopAppBar() } bottomBar = { NavBar() } snackbarHost = { SnackbarHost(hostState) }) { paddingValues -> Content(Modifier.padding(paddingValues)) },Column { TopBar(); Content(); BottomBar() } // no insets,High,https://developer.android.com/develop/ui/compose/components/scaffold
Material3,SnackbarHost,Use SnackbarHostState with Scaffold for snackbars,SnackbarHostState + LaunchedEffect to show snackbar,Toast.makeText for user feedback,val snackbarHostState = remember { SnackbarHostState() }; LaunchedEffect(message) { snackbarHostState.showSnackbar(message) },Toast.makeText(context message Toast.LENGTH_SHORT).show(),Medium,https://developer.android.com/develop/ui/compose/components/snackbar
Material3,BottomSheet,Use ModalBottomSheet from Material3,ModalBottomSheet with rememberModalBottomSheetState,Custom Dialog trying to look like bottom sheet,ModalBottomSheet(onDismissRequest = { onDismiss() } sheetState = sheetState) { Content() },Dialog { Surface(shape = BottomSheetShape) { Content() } } // wrong,Medium,https://developer.android.com/reference/kotlin/androidx/compose/material3/package-summary#ModalBottomSheet
Material3,TextField Variants,Use OutlinedTextField or TextField from M3,OutlinedTextField with proper label supportingText isError,BasicTextField for standard input,OutlinedTextField(value = text onValueChange = { text = it } label = { Text('Email') } isError = hasError supportingText = { if (hasError) Text('Invalid email') }),BasicTextField(value = text onValueChange = { text = it }) // no styling,Medium,https://developer.android.com/develop/ui/compose/text/user-input
Material3,NavigationBar,Use NavigationBar for bottom navigation,NavigationBar with NavigationBarItem and selected state,Custom Row with icon buttons for navigation,NavigationBar { items.forEach { NavigationBarItem(selected = it == current onClick = { nav(it) } icon = { Icon(it.icon) } label = { Text(it.label) }) } },Row { icons.forEach { IconButton(onClick = {}) { Icon(it) } } },High,https://developer.android.com/develop/ui/compose/components/bottom-navigation
Material3,Adaptive Layout,Use adaptive layouts for different screen sizes,WindowSizeClass for responsive layout decisions,Fixed layout ignoring screen size,val windowSizeClass = calculateWindowSizeClass(this); when (windowSizeClass.widthSizeClass) { Compact -> PhoneLayout(); Medium -> TabletLayout() },Fixed single-column layout on all screens,Medium,https://developer.android.com/develop/ui/compose/layouts/adaptive
Gradle,Version Catalog,Use Gradle Version Catalog (libs.versions.toml),Centralize versions in gradle/libs.versions.toml,Hardcode versions in each build.gradle,implementation(libs.compose.material3) // from version catalog,implementation('androidx.compose.material3:material3:1.2.0') // hardcoded,High,https://developer.android.com/build/migrate-to-catalogs
Gradle,Convention Plugins,Use convention plugins for shared build logic,buildSrc or build-logic module with convention plugins,Copy-paste build config across modules,plugins { id('myapp.android.library') } // convention plugin,Duplicate android {} block in every module,Medium,https://developer.android.com/build/migrate-to-catalogs
Gradle,Compose BOM,Use Compose BOM to manage Compose versions,Single BOM controls all Compose library versions,Manually version each Compose dependency,implementation(platform(libs.compose.bom)); implementation(libs.compose.material3) // no version,implementation('androidx.compose.ui:ui:1.6.0') // manual version,High,https://developer.android.com/develop/ui/compose/bom
Gradle,KSP over KAPT,Use KSP instead of KAPT for annotation processing,KSP for Hilt Room - 2x faster builds,KAPT slows build and is in maintenance mode,ksp(libs.hilt.compiler); ksp(libs.room.compiler),kapt(libs.hilt.compiler) // slower deprecated,High,https://developer.android.com/build/migrate-to-ksp
Gradle,Build Config,Use BuildConfig for environment-specific values,buildConfigField for API URLs and feature flags,Hardcode API URLs in source code,"buildConfigField('String' 'BASE_URL' '\https://api.example.com\""')""",const val BASE_URL = 'https://api.example.com' // hardcoded,Medium,
Gradle,Dependency Configurations,Use correct dependency configurations,implementation for internal api for exposed testImplementation for tests,Use api for everything leaking transitive deps,implementation(libs.retrofit) // internal to module,api(libs.retrofit) // exposes to all consumers,Medium,https://developer.android.com/build/dependencies
Navigation,Type-Safe Routes,Use type-safe Navigation Compose routes,@Serializable data classes for route definitions,String-based route patterns,@Serializable data class DetailRoute(val id: Int); composable<DetailRoute> { entry -> DetailScreen(entry.toRoute<DetailRoute>().id) },composable('detail/{id}') { backStackEntry -> val id = backStackEntry.arguments?.getString('id') },High,https://developer.android.com/guide/navigation/design/type-safety
Navigation,Nested NavGraphs,Use nested navigation graphs for feature grouping,Separate NavGraph per feature module,Single flat navigation graph,navigation<FeatureRoute>(startDestination = ListRoute) { composable<ListRoute> {}; composable<DetailRoute> {} },All composable() in single NavHost // no grouping,Medium,https://developer.android.com/guide/navigation/design/nested-graphs
Navigation,Result Passing,Pass results back via SavedStateHandle,previousBackStackEntry.savedStateHandle for results,SharedViewModel or global state for screen results,navController.previousBackStackEntry?.savedStateHandle?.set('result' value),sharedViewModel.result = value // wrong scope,Medium,
Compose,Modifier.semantics,Add semantics for accessibility,Proper contentDescription and semantic properties,Skip accessibility annotations,Image(painter icon contentDescription = 'Profile photo'),Image(painter icon contentDescription = null) // inaccessible,High,https://developer.android.com/develop/ui/compose/accessibility
Compose,SubcomposeLayout,Use SubcomposeLayout for dependent measurements,SubcomposeLayout when child size depends on sibling,BoxWithConstraints for all measurement needs,SubcomposeLayout { constraints -> val mainPlaceable = subcompose('main') { MainContent() }.first().measure(constraints) },BoxWithConstraints everywhere // less efficient,Low,
Compose,Shared Element Transitions,Use shared element transitions in Navigation,SharedTransitionLayout with AnimatedContent,No transition between screens,SharedTransitionLayout { AnimatedContent(targetState) { state -> when(state) { ... } } },No transitions between screens,Low,https://developer.android.com/develop/ui/compose/animation/shared-elements
Architecture,Data Layer Organization,Define a clear data layer containing repositories and data sources in a data package or module,"Create repositories even for single data sources, organize in data/ package",Let UI components interact directly with databases or APIs directly,,ViewModel directly accessing Room DAO or Retrofit service,High,https://developer.android.com/topic/architecture/recommendations
Architecture,UI Layer Organization,Define a clear UI layer for displaying data and handling user interaction in a ui package or module,Organize UI types in ui/ package or module,Mix UI and data layer types in same package,,,High,https://developer.android.com/topic/architecture/recommendations
Architecture,Domain Layer,Use domain layer with use cases when reusing business logic across multiple ViewModels or simplifying complex ViewModel logic,Add use cases for shared cross-ViewModel business logic,Add domain layer to every project regardless of complexity,class GetLatestNewsUseCase(val repo: NewsRepo) { operator fun invoke(): Flow<List<News>> = repo.getNews() },Duplicate business logic across ViewModels,Medium,https://developer.android.com/topic/architecture/recommendations
Architecture,Unidirectional Data Flow,Follow UDF where ViewModels expose UI state via observer pattern and receive actions from UI through method calls,ViewModels expose StateFlow and receive user actions via methods,Bidirectional data binding or direct state mutation from UI,class MyVM : ViewModel() { val uiState: StateFlow<UiState>; fun onAction(action: Action) {} },Two-way data binding modifying ViewModel state directly,Critical,https://developer.android.com/topic/architecture/recommendations
Architecture,No ViewModel Events to UI,Process events immediately in ViewModel and cause a state update with the result rather than sending one-off events to UI,Process events in ViewModel and update state,Send SingleLiveEvent or Channel events to UI,fun onBookmark() { _uiState.update { it.copy(isBookmarked = true) } },val events: Channel<Event> // one-off events to UI,High,https://developer.android.com/topic/architecture/recommendations
Architecture,Use Jetpack Compose,"Use Jetpack Compose for building new apps on phones, tablets, foldables, and Wear OS",Adopt Compose for new projects and new screens,Start new projects with XML Views only,,New project using only XML layouts and fragments,Medium,https://developer.android.com/topic/architecture/recommendations
ViewModel,Lifecycle Agnostic ViewModel,"ViewModels should not hold references to Lifecycle-related types like Activity, Fragment, Context, or Resources",Keep ViewModel free of Android framework references,"Pass Activity, Fragment, Context, or Resources to ViewModel",class MyVM @Inject constructor(val repo: Repo) : ViewModel(),class MyVM(val context: Context) : ViewModel() // holds Context,Critical,https://developer.android.com/topic/architecture/recommendations
ViewModel,Screen-Level ViewModel,Use ViewModels only at screen level not in reusable UI components,Use ViewModels in screen composables or Activity/Fragment/nav destinations,Use ViewModels in reusable composable components,@Composable fun ProfileScreen(vm: ProfileVM = hiltViewModel()) {},@Composable fun UserAvatar(vm: AvatarVM = viewModel()) // reusable component with VM,High,https://developer.android.com/topic/architecture/recommendations
ViewModel,Plain State Holders for Reusable UI,"Use plain state holder classes for managing complexity in reusable UI components, allowing state to be hoisted and controlled externally",Create state holder classes for complex reusable UI,Use ViewModel for reusable UI component state,class DatePickerState(initial: LocalDate) { var selectedDate by mutableStateOf(initial) },@HiltViewModel class DatePickerVM // ViewModel for reusable component,High,https://developer.android.com/topic/architecture/recommendations
ViewModel,Avoid AndroidViewModel,Use ViewModel class instead of AndroidViewModel. Move Application dependencies to UI or data layer.,Use ViewModel with proper DI instead of AndroidViewModel,Use AndroidViewModel to access Application context,@HiltViewModel class MyVM @Inject constructor(repo: Repo) : ViewModel(),class MyVM(app: Application) : AndroidViewModel(app) { val ctx = app },Medium,https://developer.android.com/topic/architecture/recommendations
ViewModel,Expose Single UiState,Expose UI state through a single uiState property as StateFlow. Use stateIn with WhileSubscribed(5000) for stream data or MutableStateFlow for simpler cases.,Single uiState StateFlow with stateIn WhileSubscribed(5000),Multiple scattered LiveData or state properties,"val uiState: StateFlow<UiState> = repo.dataStream().map { UiState.Success(it) }.stateIn(viewModelScope, SharingStarted.WhileSubscribed(5_000), UiState.Loading)",val loading = MutableLiveData<Boolean>(); val data = MutableLiveData<List<Item>>(); val error = MutableLiveData<String>() // scattered,High,https://developer.android.com/topic/architecture/recommendations
Lifecycle,No Lifecycle Method Override,Do not override lifecycle methods like onResume in Activities or Fragments. Use LifecycleObserver and repeatOnLifecycle API instead.,Use LifecycleObserver and repeatOnLifecycle,"Override onResume, onPause, onStart in Activity/Fragment",lifecycle.addObserver(object : DefaultLifecycleObserver { override fun onResume(owner: LifecycleOwner) {} }),override fun onResume() { super.onResume(); loadData() },High,https://developer.android.com/topic/architecture/recommendations
Architecture,DI Scoping,Scope dependencies to a container when the type contains mutable shared data or is expensive to initialize and widely used,Scope expensive or shared-state dependencies to appropriate container,Create new instances of expensive objects every time,@Singleton class UserSessionManager @Inject constructor(),fun provideUserSession() = UserSessionManager() // new instance each time,High,https://developer.android.com/topic/architecture/recommendations
Testing,Know What to Test,"At minimum: unit test ViewModels including Flows, unit test data layer entities, and UI navigation tests for regression in CI","Test ViewModels, repositories, data sources, and navigation",Skip testing or only test manually,"@Test fun uiState_initially_loading() = runTest { assertEquals(Loading, viewModel.uiState.value) }",No automated tests,High,https://developer.android.com/topic/architecture/recommendations
Testing,Prefer Fakes Over Mocks,Use fake implementations instead of mocking frameworks for test doubles,Create Fake implementations of interfaces,Use Mockito/Mockk for everything,class FakeUserRepo : UserRepo { override suspend fun getUser(id: String) = testUser },val repo = mockk<UserRepo>(); every { repo.getUser(any()) } returns testUser,High,https://developer.android.com/topic/architecture/recommendations
Testing,Test StateFlows,"When testing StateFlow: assert on value property when possible, create collectJob when using WhileSubscribed",Assert StateFlow.value directly or use Turbine,Use Thread.sleep or delay to wait for state,"@Test fun test() = runTest { val vm = MyVM(); assertEquals(expected, vm.uiState.value) }","@Test fun test() { Thread.sleep(1000); assertEquals(expected, vm.state.value) }",High,https://developer.android.com/topic/architecture/recommendations
Architecture,Model Per Layer,"In complex apps create separate models per layer: remote DTOs, local entities, and UI models",Map between network/database/UI models at layer boundaries,Use single model class across all layers,data class UserDto(...); data class UserEntity(...); data class UserUiModel(...),data class User(...) // same class for API DB and UI,Medium,https://developer.android.com/topic/architecture/recommendations
Naming,Method Naming,Methods should be named as verb phrases,Use verb phrases for method names,Use noun phrases for methods,fun makePayment(),fun payment(),Low,https://developer.android.com/topic/architecture/recommendations
Naming,Property Naming,Properties should be named as noun phrases,Use noun phrases for property names,Use verb phrases for properties,val inProgressTopicSelection,val selectTopicsInProgress,Low,https://developer.android.com/topic/architecture/recommendations
Naming,Stream Naming,Name stream-returning functions as get{Model}Stream(). Use plural for lists: get{Models}Stream(),Follow get{Model}Stream() pattern for Flow/LiveData functions,Inconsistent naming for stream functions,fun getAuthorStream(): Flow<Author>; fun getAuthorsStream(): Flow<List<Author>>,fun fetchAuthor(): Flow<Author>; fun observeAuthors(): Flow<List<Author>>,Low,https://developer.android.com/topic/architecture/recommendations
Naming,Interface Implementation Naming,Use meaningful names for interface implementations. Use Default prefix if no better name. Fake prefix for test doubles.,Name implementations descriptively like OfflineFirstNewsRepo,Generic Impl suffix for all implementations,class OfflineFirstNewsRepository : NewsRepository; class FakeNewsRepository : NewsRepository,class NewsRepositoryImpl : NewsRepository // generic Impl,Low,https://developer.android.com/topic/architecture/recommendations
SOLID,Single Responsibility Principle,"Each class should have one reason to change. ViewModel owns UI logic, Repository owns data access, UseCase owns business rules. When a class changes for multiple unrelated reasons split it.",One class = one job. ViewModel for UI state; Repository for data; UseCase for business logic,God class handling networking + caching + UI state + validation in one place,"class AuthRepository @Inject constructor(private val api: AuthApi, private val dao: AuthDao) { suspend fun login(credentials: Credentials): Result<User> = try { val user = api.login(credentials); dao.insert(user); Result.success(user) } catch (e: Exception) { Result.failure(e) } }","class LoginViewModel : ViewModel() { private val retrofit = Retrofit.Builder().baseUrl(URL).build(); private val db = Room.databaseBuilder(ctx, AppDb::class.java, 'db').build(); fun login(email: String, pwd: String) { /* validates + calls API + caches + updates UI state */ } }",Critical,
SOLID,Open-Closed Principle,Software entities should be open for extension but closed for modification. Add new behavior through new implementations of interfaces rather than modifying existing code with conditional branches.,Define interfaces and add new implementations; avoid growing if/else or when chains,Modify existing classes every time a new variant is needed,interface NotificationSender { suspend fun send(notification: Notification) }; class PushNotificationSender @Inject constructor(private val fcm: FirebaseMessaging) : NotificationSender { override suspend fun send(n: Notification) { fcm.send(n.toRemoteMessage()) } }; class EmailNotificationSender @Inject constructor(private val mailer: Mailer) : NotificationSender { override suspend fun send(n: Notification) { mailer.send(n.toEmail()) } },"fun sendNotification(type: String, notification: Notification) { when (type) { 'push' -> { /* FCM logic */ }; 'email' -> { /* email logic */ }; 'sms' -> { /* sms logic */ } /* add new else branch for every type forever */ } }",High,
SOLID,Liskov Substitution Principle,Subtypes must be substitutable for their base types. Every implementation of an interface must fully honor its contract without throwing unexpected exceptions or silently skipping behavior.,Subclasses honor the full contract of the parent interface or class,Subclasses that throw UnsupportedOperationException or silently no-op required methods,interface UserRepository { fun getUsers(): Flow<List<User>>; suspend fun save(user: User) }; class LocalUserRepository @Inject constructor(private val dao: UserDao) : UserRepository { override fun getUsers() = dao.observeAll(); override suspend fun save(user: User) = dao.upsert(user) },class ReadOnlyUserRepository : UserRepository { override fun getUsers() = flowOf(cachedList); override suspend fun save(user: User) { throw UnsupportedOperationException('Read-only') /* violates contract */ } },High,
SOLID,Interface Segregation Principle,No client should be forced to depend on methods it does not use. Split fat interfaces into smaller role-specific ones so implementations and consumers only see what they need.,Small focused interfaces per role; classes implement only what they need,One large interface forcing every implementation to stub unused methods,interface UserReader { fun getUser(id: String): Flow<User> }; interface UserWriter { suspend fun saveUser(user: User) }; class ProfileViewModel @Inject constructor(private val reader: UserReader) : ViewModel() { val user = reader.getUser(userId) },interface UserRepository { fun getUser(id: String): Flow<User>; suspend fun saveUser(user: User); suspend fun deleteUser(id: String); suspend fun exportUsers(): File; suspend fun syncUsers() } /* ProfileScreen only needs getUser but depends on everything */ ,High,
SOLID,Dependency Inversion Principle,High-level modules should depend on abstractions not on concrete low-level details. ViewModel depends on a Repository interface not on Retrofit or Room directly. Bindings are configured in DI modules.,Depend on interfaces. Bind implementations in Hilt modules,ViewModel or UseCase directly creating or referencing Retrofit/Room/SharedPreferences,"interface OrderRepository { fun getOrders(): Flow<List<Order>> }; @HiltViewModel class OrderViewModel @Inject constructor(private val repo: OrderRepository) : ViewModel() { val orders = repo.getOrders().stateIn(viewModelScope, SharingStarted.WhileSubscribed(5_000), emptyList()) }",class OrderViewModel : ViewModel() { private val api = RetrofitClient.instance.create(OrderApi::class.java); private val dao = AppDatabase.instance.orderDao(); fun load() { viewModelScope.launch { val orders = api.getOrders(); dao.insertAll(orders) } } },Critical,
CleanCode,Small Focused Functions,Each function should do exactly one thing at one level of abstraction. If you need comments to separate sections inside a function it should be multiple functions. Aim for 5-20 lines per function.,One function = one task. Extract each logical step into a well-named private function,Functions longer than 30 lines doing multiple unrelated steps,suspend fun syncUser(id: String) { val remote = fetchRemoteUser(id); val merged = mergeWithLocal(remote); saveUser(merged) }; private suspend fun fetchRemoteUser(id: String): UserDto = api.getUser(id); private suspend fun mergeWithLocal(remote: UserDto): User { val local = dao.getUser(remote.id); return local?.merge(remote.toDomain()) ?: remote.toDomain() }; private suspend fun saveUser(user: User) = dao.upsert(user),"suspend fun syncUser(id: String) { /* 80 lines: fetch from API, check cache, parse JSON, transform model, handle 5 error cases, update DB, notify UI, log analytics */ }",High,
CleanCode,Meaningful Naming,Names should reveal intent and use domain vocabulary. Avoid abbreviations (mgr ctx btn) single-letter variables and generic names (data info temp handler). Longer scope = longer name.,Names describe what/why not how. Use domain terms. Full words over abbreviations,val isUserAuthenticated: Boolean; suspend fun fetchUserProfile(userId: String): User; class PaymentRepository; sealed interface CheckoutUiState,val flag: Boolean; fun proc(s: String): Any?; class Mgr; data class Data(val x: List<Any>),High,,
CleanCode,Avoid Magic Numbers and Strings,Replace every hardcoded literal with a named constant or enum. Named constants serve as documentation and create single-source-of-truth for values used in multiple places.,Named constants in companion object or top-level. Use enums for related sets,Raw numbers and strings scattered in logic and UI code,private companion object { const val MAX_RETRY = 3; const val TIMEOUT_MS = 5_000L; const val DEBOUNCE_MS = 300L }; retry(MAX_RETRY) { withTimeout(TIMEOUT_MS) { api.fetch() } },if (count < 3) { delay(5000); api.fetch() } // what is 3? what is 5000?,Medium,
CleanCode,Guard Clauses and Early Return,Validate preconditions at the top of functions and return/throw early. This eliminates nesting and keeps the happy path at the lowest indentation level.,Return or throw early for invalid cases. Happy path stays unnested at base indentation,Deeply nested if/else pyramids,fun processPayment(order: Order?): Result<Receipt> { if (order == null) return Result.failure(IllegalArgumentException('Order required')); if (order.items.isEmpty()) return Result.failure(EmptyCartException()); if (!order.isValid()) return Result.failure(InvalidOrderException()); return paymentGateway.charge(order) },fun processPayment(order: Order?): Result<Receipt> { if (order != null) { if (order.items.isNotEmpty()) { if (order.isValid()) { return paymentGateway.charge(order) } else { return Result.failure(InvalidOrderException()) } } else { return Result.failure(EmptyCartException()) } } else { return Result.failure(IllegalArgumentException('Order required')) } },Medium,
CleanCode,DRY - Extract Shared Logic,When the same logic appears in two or more places extract it into a single shared function or extension. Update all call sites to use the shared version.,Extract repeated logic into extension functions or shared helpers,Copy-pasting the same validation/formatting/mapping logic across classes,"fun String.toDisplayDate(): String = LocalDate.parse(this).format(DateTimeFormatter.ofPattern('MMM dd, yyyy')); /* used in OrderScreen, ProfileScreen, HistoryScreen */","// OrderScreen: LocalDate.parse(date).format(DateTimeFormatter.ofPattern('MMM dd, yyyy')); // ProfileScreen: LocalDate.parse(date).format(DateTimeFormatter.ofPattern('MMM dd, yyyy')); // HistoryScreen: same again",High,
CleanCode,Immutability by Default,Use val over var and immutable collections over mutable. Data classes with val properties are inherently safe to share across threads. Mutable state should be isolated and controlled.,val for everything. Immutable data classes. MutableStateFlow only inside ViewModel,var and MutableList scattered across classes,"data class UserUiState(val name: String, val email: String, val posts: ImmutableList<Post> = persistentListOf()); class UserViewModel : ViewModel() { private val _uiState = MutableStateFlow(UserUiState()); val uiState: StateFlow<UserUiState> = _uiState.asStateFlow() }",class UserViewModel : ViewModel() { var name = ''; var email = ''; var posts = mutableListOf<Post>(); var isLoading = false },High,
CleanCode,Kotlin Extension Functions,Use extension functions to add behavior to existing types instead of utility classes with static methods. Keep extensions focused and discoverable by placing them near their domain.,Extension functions on types for domain operations. Place near usage or in type-specific files,Java-style static utility classes,"fun User.toUiModel() = UserUiModel(displayName = '$firstName $lastName', avatar = avatarUrl.orDefault()); fun Long.toFormattedDuration(): String { val minutes = this / 60_000; val seconds = (this % 60_000) / 1000; return '${minutes}m ${seconds}s' }",object UserUtils { fun getDisplayName(user: User) = '${user.firstName} ${user.lastName}'; fun getAvatar(user: User) = user.avatarUrl ?: DEFAULT }; object TimeUtils { fun format(ms: Long): String { /* ... */ } },Medium,
CleanCode,Sealed Types for Exhaustive State,Model finite state sets with sealed class/interface so the compiler enforces exhaustive when branches. Adding a new subtype triggers compile errors at every unhandled when.,Sealed interface for UI state and result types. when expression handles all cases,Boolean flags or nullable fields creating impossible/ambiguous state combinations,sealed interface HomeUiState { data object Loading : HomeUiState; data class Success(val articles: List<Article>) : HomeUiState; data class Error(val message: String) : HomeUiState }; when (state) { is Loading -> CircularProgressIndicator(); is Success -> ArticleList(state.articles); is Error -> ErrorMessage(state.message) },"data class HomeUiState(val articles: List<Article>? = null, val isLoading: Boolean = false, val error: String? = null) // isLoading=true AND error!=null at same time?",High,
CleanCode,Avoid Deep Nesting,Maximum 2-3 levels of indentation. Use early returns and when expressions and function extraction to flatten deeply nested code. Deep nesting signals that a function is doing too much.,Max 2-3 indent levels. Flatten with early return + when + extract function,4+ levels of nested if/for/try blocks,fun getUserLabel(user: User?): String { val name = user?.name ?: return 'Guest'; if (name.isBlank()) return 'Anonymous'; return name.replaceFirstChar { it.uppercase() } },fun getUserLabel(user: User?): String { if (user != null) { if (user.name != null) { if (user.name.isNotBlank()) { return user.name.replaceFirstChar { it.uppercase() } } else { return 'Anonymous' } } else { return 'Guest' } } else { return 'Guest' } },Medium,
CleanCode,Composition Over Inheritance,Favor interfaces and delegation over class hierarchies. Kotlin class delegation (by keyword) makes composition as concise as inheritance while being more flexible and avoiding fragile base class issues.,Interface + delegation for shared behavior. Shallow hierarchy max 1-2 levels,Deep inheritance chains or abstract base classes with half-implemented methods,"interface Analytics { fun track(event: String) }; class ScreenViewModel(private val analytics: Analytics) : ViewModel(), Analytics by analytics",open class BaseViewModel : ViewModel() { /* shared stuff */ }; open class BaseListViewModel : BaseViewModel() { /* list stuff */ }; open class BaseSearchableListViewModel : BaseListViewModel() { /* search stuff */ }; class UserListViewModel : BaseSearchableListViewModel() // 4 levels deep,High,
DI,Constructor Injection Always,Always prefer constructor injection. It makes dependencies explicit visible in the class signature and trivially testable. Use field injection (@Inject lateinit var) only in Android framework classes where constructors are not controlled (Activity Fragment).,@Inject constructor for all classes. Field injection only in Activity/Fragment,Field injection in ViewModel Repository UseCase or any non-framework class,"class UserRepository @Inject constructor(private val api: UserApi, private val dao: UserDao, @IoDispatcher private val dispatcher: CoroutineDispatcher)",class UserRepository { @Inject lateinit var api: UserApi; @Inject lateinit var dao: UserDao /* hidden dependencies impossible to provide in tests */ },High,https://developer.android.com/training/dependency-injection#di-manual
DI,Hilt Module Organization,"Group Hilt modules by layer: DataModule for repositories and data sources, NetworkModule for Retrofit/OkHttp, DatabaseModule for Room. Use @Binds for interface-to-impl mapping and @Provides for third-party objects.",Separate modules per layer. @Binds for interfaces; @Provides for builders and third-party types,Single AppModule providing everything in one giant file,@Module @InstallIn(SingletonComponent::class) interface DataModule { @Binds fun bindUserRepo(impl: OfflineFirstUserRepo): UserRepository; @Binds fun bindOrderRepo(impl: DefaultOrderRepo): OrderRepository }; @Module @InstallIn(SingletonComponent::class) object NetworkModule { @Provides @Singleton fun provideOkHttp(): OkHttpClient = OkHttpClient.Builder().addInterceptor(AuthInterceptor()).build() },"@Module @InstallIn(SingletonComponent::class) object AppModule { @Provides fun provideDb(app: Application) = Room.databaseBuilder(...).build(); @Provides fun provideApi() = Retrofit.Builder()...; @Provides fun provideRepo(api: Api, db: Db) = UserRepo(api, db); /* 50+ provides in one file */ }",Medium,https://developer.android.com/training/dependency-injection/hilt-android#hilt-modules
DI,Qualifier Annotations,"Use @Qualifier to distinguish multiple bindings of the same type: different CoroutineDispatchers, different API base URLs, different OkHttpClient configs. Without qualifiers Hilt cannot tell which instance to inject.",Custom @Qualifier for same-type bindings like @IoDispatcher @DefaultDispatcher @MainDispatcher,Providing same type twice without qualifier causing Hilt compile error or wrong injection,@Qualifier @Retention(AnnotationRetention.BINARY) annotation class IoDispatcher; @Qualifier @Retention(AnnotationRetention.BINARY) annotation class DefaultDispatcher; @Module @InstallIn(SingletonComponent::class) object DispatcherModule { @Provides @IoDispatcher fun provideIo(): CoroutineDispatcher = Dispatchers.IO; @Provides @DefaultDispatcher fun provideDefault(): CoroutineDispatcher = Dispatchers.Default },@Provides fun provideDispatcher(): CoroutineDispatcher = Dispatchers.IO // only one binding; which dispatcher is this?,Medium,https://developer.android.com/training/dependency-injection/hilt-android#multiple-bindings
DI,Assisted Injection,Use @AssistedInject when a class needs both DI-provided dependencies and runtime parameters (like a screen ID or user input). Avoids writing manual ViewModelProvider.Factory boilerplate.,@AssistedInject + @AssistedFactory for combining DI deps with runtime params,Manual ViewModelProvider.Factory implementations for every ViewModel that needs an argument,"class DetailViewModel @AssistedInject constructor(@Assisted private val articleId: Long, private val repo: ArticleRepository) : ViewModel() { val article = repo.getArticle(articleId).stateIn(viewModelScope, SharingStarted.WhileSubscribed(5_000), null) }; @AssistedFactory interface Factory { fun create(articleId: Long): DetailViewModel }",class DetailViewModel(private val articleId: Long) : ViewModel() { class Factory(private val articleId: Long) : ViewModelProvider.Factory { override fun <T : ViewModel> create(modelClass: Class<T>): T = DetailViewModel(articleId) as T } } // manual factory boilerplate for every screen,Medium,https://developer.android.com/training/dependency-injection/hilt-android
DI,Scope to Component Lifecycle,"Match DI scope to the Android component lifecycle. @Singleton for app-wide singletons, @ActivityRetainedScoped to survive config changes, @ViewModelScoped for per-screen sharing. Over-scoping wastes memory; under-scoping causes redundant instances.",Match scope to lifecycle. @Singleton only for truly app-wide; @ViewModelScoped for screen-level sharing,@Singleton on everything or no scoping at all,@Module @InstallIn(ViewModelComponent::class) interface ScreenModule { @Binds @ViewModelScoped fun bindGetArticlesUseCase(impl: DefaultGetArticlesUseCase): GetArticlesUseCase }; @Module @InstallIn(SingletonComponent::class) interface AppModule { @Binds @Singleton fun bindAuthManager(impl: DefaultAuthManager): AuthManager },@Singleton class GetArticlesUseCase @Inject constructor(val repo: ArticleRepo) // lives forever even when no screen needs it; @Singleton on every class just to be safe,High,https://developer.android.com/training/dependency-injection/hilt-android#component-scopes
DI,Interface Abstraction for Testability,Every Repository and DataSource should have an interface. Inject the interface type everywhere. In tests provide a Fake implementation via @BindValue or a test Hilt module. This makes tests fast and deterministic.,Interface for every data layer class. Inject interface types. Swap with Fakes in tests,Inject concrete classes making tests require real network/database,"interface ArticleRepository { fun getArticles(): Flow<List<Article>>; suspend fun refresh() }; class OfflineFirstArticleRepository @Inject constructor(private val api: ArticleApi, private val dao: ArticleDao) : ArticleRepository { override fun getArticles() = dao.observeAll(); override suspend fun refresh() { dao.upsertAll(api.getAll().map { it.toEntity() }) } }; // In test: class FakeArticleRepository : ArticleRepository { private val articles = MutableStateFlow<List<Article>>(emptyList()); override fun getArticles() = articles; override suspend fun refresh() { articles.value = testArticles } }","class ArticleRepository @Inject constructor(private val api: ArticleApi, private val dao: ArticleDao) { /* concrete class injected everywhere; tests need real Room + Retrofit or heavy mocking */ }",Critical,https://developer.android.com/training/dependency-injection
Room,Entity Design,Use @Entity with explicit tableName and @PrimaryKey. Define indices for columns used in WHERE and ORDER BY clauses. Use @ColumnInfo to control column names independently from Kotlin property names.,Explicit tableName + indices + @ColumnInfo for query-heavy columns,Default table/column names and no indices,"@Entity(tableName = 'articles', indices = [Index(value = ['author_id']), Index(value = ['published_at'])]) data class ArticleEntity(@PrimaryKey val id: String, @ColumnInfo(name = 'author_id') val authorId: String, @ColumnInfo(name = 'published_at') val publishedAt: Long)","@Entity data class ArticleEntity(@PrimaryKey val id: String, val authorId: String, val publishedAt: Long) // no indices slow queries",High,https://developer.android.com/training/data-storage/room/defining-data
Room,DAO Return Flow,Return Flow from DAO queries to get automatic updates when underlying data changes. Use suspend for one-shot write operations. Never return LiveData from DAO in new code.,Flow for observable reads; suspend for writes,Returning raw List requiring manual refresh or LiveData in new code,@Dao interface ArticleDao { @Query('SELECT * FROM articles ORDER BY published_at DESC') fun observeAll(): Flow<List<ArticleEntity>>; @Insert(onConflict = OnConflictStrategy.REPLACE) suspend fun upsertAll(articles: List<ArticleEntity>); @Query('DELETE FROM articles') suspend fun deleteAll() },@Dao interface ArticleDao { @Query('SELECT * FROM articles') fun getAll(): List<ArticleEntity> // blocks thread no auto-update; @Query('SELECT * FROM articles') fun getAllLive(): LiveData<List<ArticleEntity>> // LiveData in DAO },High,https://developer.android.com/training/data-storage/room/async-queries
Room,Migration Strategy,Provide Migration objects for schema changes in production. Use fallbackToDestructiveMigration only in debug builds. Test migrations with MigrationTestHelper to prevent data loss.,Write Migration(oldVer newVer) for every schema change. Test with MigrationTestHelper,fallbackToDestructiveMigration in production losing user data,"Room.databaseBuilder(ctx, AppDb::class.java, 'app.db').addMigrations(MIGRATION_1_2, MIGRATION_2_3).build(); val MIGRATION_1_2 = object : Migration(1, 2) { override fun migrate(db: SupportSQLiteDatabase) { db.execSQL('ALTER TABLE articles ADD COLUMN category TEXT DEFAULT NULL') } }","Room.databaseBuilder(ctx, AppDb::class.java, 'app.db').fallbackToDestructiveMigration().build() // users lose all data on schema change",Critical,https://developer.android.com/training/data-storage/room/migrating-db-versions
Room,TypeConverters,"Use @TypeConverter for complex types (Date, Enum, List) that Room cannot store natively. Place converters on the Database class for global availability. Use kotlinx.serialization for JSON columns.",@TypeConverter for non-primitive types. JSON serialization for embedded lists,Storing complex objects without converters causing compile errors or flattening manually,"class Converters { @TypeConverter fun fromTimestamp(value: Long?): Instant? = value?.let { Instant.fromEpochMilliseconds(it) }; @TypeConverter fun toTimestamp(instant: Instant?): Long? = instant?.toEpochMilliseconds() }; @Database(entities = [...], version = 1) @TypeConverters(Converters::class) abstract class AppDatabase : RoomDatabase()",Storing Date as String with manual parsing everywhere; or adding 10 columns to flatten a nested object,Medium,https://developer.android.com/training/data-storage/room/referencing-data
Room,Embedded and Relations,Use @Embedded for value objects within entities and @Relation for one-to-many queries. Avoids manual JOIN parsing and keeps code type-safe.,@Embedded for value objects; @Relation with data class for JOINs,Manual SQL JOINs parsed into maps of maps,"data class AuthorWithArticles(@Embedded val author: AuthorEntity, @Relation(parentColumn = 'id', entityColumn = 'author_id') val articles: List<ArticleEntity>); @Query('SELECT * FROM authors WHERE id = :id') fun getAuthorWithArticles(id: String): Flow<AuthorWithArticles>","@Query('SELECT a.*, b.* FROM authors a JOIN articles b ON a.id = b.author_id WHERE a.id = :id') fun getJoined(id: String): Flow<List<Map<String, Any>>> // untyped manual parsing",Medium,https://developer.android.com/training/data-storage/room/relationships
Room,Database Inspector,Use Android Studio Database Inspector to browse Room tables in real time during debugging. Also write DAO unit tests with in-memory database for CI.,Database Inspector for debugging; in-memory Room for unit tests,Log.d with cursor dumps or only testing on device,"@Test fun insertAndRead() = runTest { val db = Room.inMemoryDatabaseBuilder(ctx, AppDb::class.java).build(); db.articleDao().upsertAll(testArticles); val result = db.articleDao().observeAll().first(); assertEquals(testArticles.size, result.size) }","Log.d('DB', cursor.getString(0)) // manual logging for debugging",Medium,https://developer.android.com/studio/inspect/database
DataStore,Preferences DataStore Over SharedPreferences,Replace SharedPreferences with Preferences DataStore for async non-blocking key-value storage. DataStore uses Kotlin coroutines and Flow guaranteeing no UI thread blocking and data consistency.,Preferences DataStore for simple key-value. Async access via Flow,SharedPreferences with commit/apply risking ANR and race conditions,val Context.settingsStore by preferencesDataStore(name = 'settings'); val DARK_MODE = booleanPreferencesKey('dark_mode'); val isDarkMode: Flow<Boolean> = ctx.settingsStore.data.map { prefs -> prefs[DARK_MODE] ?: false }; suspend fun setDarkMode(enabled: Boolean) { ctx.settingsStore.edit { it[DARK_MODE] = enabled } },"val prefs = getSharedPreferences('settings', MODE_PRIVATE); val isDark = prefs.getBoolean('dark_mode', false); prefs.edit().putBoolean('dark_mode', true).apply() // no type safety; possible ANR with commit()",High,https://developer.android.com/topic/libraries/architecture/datastore
DataStore,Proto DataStore for Typed Data,Use Proto DataStore with Protocol Buffers for complex structured settings that need type safety and schema evolution. Define a .proto schema for compile-time type checking.,Proto DataStore for structured settings with schema evolution,Preferences DataStore with dozens of keys for related settings,// settings.proto: message Settings { bool dark_mode = 1; string locale = 2; int32 font_size = 3; }; val settingsFlow: Flow<Settings> = protoDataStore.data; suspend fun updateLocale(locale: String) { protoDataStore.updateData { it.toBuilder().setLocale(locale).build() } },// 20+ individual PreferencesKeys for one settings screen; no schema validation; possible key typos,Medium,https://developer.android.com/topic/libraries/architecture/datastore#proto-datastore
DataStore,DataStore Singleton,Create DataStore as a singleton at the top level using the property delegate. Never create multiple DataStore instances for the same file as this causes corruption.,Single top-level property delegate per file. Inject via Hilt,Multiple DataStore instances for the same file in different classes,val Context.userPrefs by preferencesDataStore(name = 'user_prefs'); // single declaration at file top level; inject context to access,class RepoA { val store = PreferencesDataStoreFactory.create { File('user_prefs') } }; class RepoB { val store = PreferencesDataStoreFactory.create { File('user_prefs') } } // two instances = corruption,Critical,https://developer.android.com/topic/libraries/architecture/datastore#preferences-datastore
DataStore,DataStore Error Handling,Handle IOExceptions from DataStore reads by catching in the Flow chain with catch operator. Emit default values on error to prevent app crashes.,catch IOException in Flow and emit defaults,Uncaught exceptions crashing the app on corrupted DataStore,val settings: Flow<UserSettings> = dataStore.data.catch { exception -> if (exception is IOException) { emit(emptyPreferences()) } else { throw exception } }.map { prefs -> UserSettings(darkMode = prefs[DARK_MODE] ?: false) },val settings: Flow<Preferences> = dataStore.data // IOException crashes app if file corrupted,High,https://developer.android.com/topic/libraries/architecture/datastore
WorkManager,Use WorkManager for Deferrable Work,Use WorkManager for reliable background work that must complete even if the app exits or device restarts. Not for immediate in-process tasks which should use coroutines.,WorkManager for guaranteed deferrable tasks (sync upload backup),Coroutines for tasks that must survive process death; WorkManager for immediate tasks,"val syncRequest = OneTimeWorkRequestBuilder<SyncWorker>().setConstraints(Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).build()).build(); WorkManager.getInstance(ctx).enqueueUniqueWork('sync', ExistingWorkPolicy.KEEP, syncRequest)",viewModelScope.launch { syncToServer() } // lost if app killed; or WorkManager for 100ms in-process task,High,https://developer.android.com/topic/libraries/architecture/workmanager
WorkManager,CoroutineWorker,Extend CoroutineWorker instead of Worker for suspend function support. Return Result.success() or Result.retry() or Result.failure() from doWork().,CoroutineWorker with suspend doWork(),Worker with blocking Thread.sleep or manual coroutine launching,"class SyncWorker @AssistedInject constructor(@Assisted ctx: Context, @Assisted params: WorkerParameters, private val repo: SyncRepository) : CoroutineWorker(ctx, params) { override suspend fun doWork(): Result = try { repo.syncAll(); Result.success() } catch (e: Exception) { Result.retry() } }","class SyncWorker(ctx: Context, params: WorkerParameters) : Worker(ctx, params) { override fun doWork(): Result { Thread.sleep(5000); return Result.success() } // blocks worker thread }",High,https://developer.android.com/topic/libraries/architecture/workmanager/advanced/coroutineworker
WorkManager,Work Constraints,"Set constraints (network connectivity, battery level, charging state, storage) to ensure work runs only when conditions are met. Avoids wasted battery and failed requests.",Set appropriate constraints matching the work requirements,Enqueuing network work without network constraint,"val constraints = Constraints.Builder().setRequiredNetworkType(NetworkType.CONNECTED).setRequiresBatteryNotLow(true).build(); val uploadRequest = OneTimeWorkRequestBuilder<UploadWorker>().setConstraints(constraints).setBackoffCriteria(BackoffPolicy.EXPONENTIAL, 30, TimeUnit.SECONDS).build()",WorkManager.getInstance(ctx).enqueue(OneTimeWorkRequestBuilder<UploadWorker>().build()) // runs without network = guaranteed failure,Medium,https://developer.android.com/topic/libraries/architecture/workmanager/how-to/define-work
WorkManager,Unique Work,Use enqueueUniqueWork or enqueueUniquePeriodicWork to prevent duplicate work. Choose KEEP to skip if running or REPLACE to restart.,Unique work names with KEEP or REPLACE policy,Enqueuing same work repeatedly creating duplicate executions,"WorkManager.getInstance(ctx).enqueueUniquePeriodicWork('daily_sync', ExistingPeriodicWorkPolicy.KEEP, PeriodicWorkRequestBuilder<SyncWorker>(1, TimeUnit.DAYS).build())",WorkManager.getInstance(ctx).enqueue(periodicRequest) // called on every app start = duplicate syncs,High,https://developer.android.com/topic/libraries/architecture/workmanager/how-to/managing-work
WorkManager,Hilt Worker Injection,Use @HiltWorker with @AssistedInject to inject dependencies into Workers. Requires HiltWorkerFactory setup in Application class.,@HiltWorker + @AssistedInject for DI in workers,Manual dependency construction inside Worker,"@HiltWorker class UploadWorker @AssistedInject constructor(@Assisted ctx: Context, @Assisted params: WorkerParameters, private val uploadRepo: UploadRepository) : CoroutineWorker(ctx, params) { override suspend fun doWork(): Result { uploadRepo.uploadPending(); return Result.success() } }","class UploadWorker(ctx: Context, params: WorkerParameters) : CoroutineWorker(ctx, params) { override suspend fun doWork(): Result { val api = Retrofit.Builder()...create(Api::class.java); api.upload() } // manual DI in worker }",Medium,https://developer.android.com/training/dependency-injection/hilt-android#workmanager
Networking,Retrofit Interface Design,"Define Retrofit service interfaces with suspend functions. Use @Body for POST/PUT, @Query for query params, @Path for URL segments. Return domain types or Response<T> when you need HTTP status codes.",Suspend functions in Retrofit interface. Return Response<T> when status code matters,Callbacks or blocking execute() calls,"interface ArticleApi { @GET('articles') suspend fun getArticles(@Query('page') page: Int, @Query('size') size: Int): List<ArticleDto>; @GET('articles/{id}') suspend fun getArticle(@Path('id') id: String): ArticleDto; @POST('articles') suspend fun createArticle(@Body article: CreateArticleRequest): Response<ArticleDto> }",interface ArticleApi { @GET('articles') fun getArticles(): Call<List<ArticleDto>> // callback-based; or .execute() blocking main thread },High,https://developer.android.com/training/basics/network-ops
Networking,OkHttp Interceptors,"Use OkHttp interceptors for cross-cutting concerns: authentication headers, logging, retry logic, caching. Application interceptors run once; network interceptors see redirects.",Application interceptor for auth/logging; network interceptor for caching,Duplicating auth header logic in every API call,"val okHttp = OkHttpClient.Builder().addInterceptor { chain -> val request = chain.request().newBuilder().addHeader('Authorization', 'Bearer ${tokenProvider.get()}').build(); chain.proceed(request) }.addInterceptor(HttpLoggingInterceptor().apply { level = if (BuildConfig.DEBUG) BODY else NONE }).build()",// Adding auth header manually in every repository method: api.getArticles(authHeader = 'Bearer $token'),High,https://square.github.io/okhttp/features/interceptors/
Networking,Kotlinx Serialization Over Gson,"Use kotlinx.serialization for JSON parsing. It is Kotlin-native, supports multiplatform, generates no reflection code, and works with R8/ProGuard without keep rules.",kotlinx.serialization with @Serializable data classes,Gson or Moshi requiring reflection or code generation for every model,"@Serializable data class ArticleDto(val id: String, val title: String, @SerialName('published_at') val publishedAt: Long); val retrofit = Retrofit.Builder().baseUrl(BASE_URL).addConverterFactory(Json.asConverterFactory('application/json'.toMediaType())).build()","data class ArticleDto(val id: String, val title: String, @SerializedName('published_at') val publishedAt: Long) // Gson: requires ProGuard rules + reflection at runtime",Medium,https://github.com/Kotlin/kotlinx.serialization
Networking,Timeout Configuration,"Configure connect, read, and write timeouts on OkHttpClient. Use per-request timeout for operations that need different limits. Default 10s is too short for uploads and too long for fast APIs.",Explicit timeouts matching expected API response times,Default timeouts causing either premature failures or hung connections,"val okHttp = OkHttpClient.Builder().connectTimeout(10, TimeUnit.SECONDS).readTimeout(30, TimeUnit.SECONDS).writeTimeout(30, TimeUnit.SECONDS).build()",OkHttpClient() // default 10s for everything; upload fails on slow network; health check hangs 10s,Medium,https://square.github.io/okhttp/
Networking,Network Error Mapping,Map network exceptions to domain-specific error types in the repository layer. Translate HttpException codes and IOException into user-friendly sealed class results.,Repository catches network errors and returns domain Result/sealed class,Letting Retrofit exceptions propagate to ViewModel or UI layer,suspend fun getArticles(): Result<List<Article>> = try { val dto = api.getArticles(); Result.success(dto.map { it.toDomain() }) } catch (e: HttpException) { when (e.code()) { 401 -> Result.failure(AuthExpiredException()); 404 -> Result.failure(NotFoundException()); else -> Result.failure(ServerException(e.code())) } } catch (e: IOException) { Result.failure(NetworkException(e)) },suspend fun getArticles() = api.getArticles() // HttpException crashes ViewModel; IOException shows raw stacktrace to user,High,
Networking,Certificate Pinning,"Pin server certificates in OkHttp for sensitive apps (banking, health, fintech) to prevent MITM attacks from compromised CAs. Rotate pins before certificate expiry.",CertificatePinner with backup pins for certificate rotation,No pinning in apps handling sensitive financial or health data,"val okHttp = OkHttpClient.Builder().certificatePinner(CertificatePinner.Builder().add('api.mybank.com', 'sha256/AAAA...=').add('api.mybank.com', 'sha256/BBBB...=').build()).build()",OkHttpClient() // no pinning; MITM with rogue CA can intercept banking traffic,High,https://square.github.io/okhttp/features/https/
OfflineFirst,Single Source of Truth,Make the local database the single source of truth. Network responses write to DB and UI observes DB via Flow. Never expose network data directly to UI.,DB is source of truth. Network -> DB -> UI flow,UI observes network response directly with DB as optional cache,"class ArticleRepository @Inject constructor(private val api: ArticleApi, private val dao: ArticleDao) { fun getArticles(): Flow<List<Article>> = dao.observeAll().map { entities -> entities.map { it.toDomain() } }; suspend fun refresh() { val remote = api.getArticles(); dao.upsertAll(remote.map { it.toEntity() }) } }",class ArticleRepository { suspend fun getArticles(): List<Article> = try { api.getArticles() } catch (e: Exception) { dao.getAll() } // network first; DB fallback; no reactive updates },Critical,
OfflineFirst,NetworkBoundResource Pattern,Implement the observe-DB-then-fetch-and-update pattern: emit cached data immediately then fetch fresh data and update DB. UI automatically gets both cached and fresh data via Flow.,Emit cached first then fetch and update DB; UI sees both through Flow,Loading spinner until network completes even when cached data is available,fun getArticles(): Flow<Resource<List<Article>>> = flow { emit(Resource.Loading); val cached = dao.getAll(); if (cached.isNotEmpty()) emit(Resource.Success(cached)); try { val fresh = api.getArticles(); dao.upsertAll(fresh); } catch (e: Exception) { if (cached.isEmpty()) emit(Resource.Error(e)) } }.flatMapLatest { dao.observeAll().map { Resource.Success(it) } },fun getArticles(): Flow<List<Article>> = flow { emit(api.getArticles()) } // no cache; empty screen while loading; error = crash,High,
OfflineFirst,Optimistic Updates,"For user actions (like, bookmark, delete) update the local DB immediately and sync to server in the background. Revert on server failure. This makes the UI feel instant.",Update DB first show result immediately then sync to server in background,Wait for server response before updating UI,"suspend fun toggleBookmark(articleId: String) { dao.toggleBookmark(articleId); try { api.syncBookmark(articleId, dao.isBookmarked(articleId)) } catch (e: Exception) { dao.toggleBookmark(articleId) // revert on failure } }",suspend fun toggleBookmark(id: String) { val result = api.toggleBookmark(id); if (result.isSuccess) dao.toggleBookmark(id) } // 1-2s delay before UI updates; fails silently offline,Medium,
OfflineFirst,Sync Queue with WorkManager,Queue failed write operations and retry with WorkManager when connectivity returns. Use a pending_operations table to track unsynced changes.,Pending operations table + WorkManager for retry on connectivity,Silently dropping writes when offline or manual retry buttons,"@Entity data class PendingOperation(val id: String, val type: String, val payload: String, val createdAt: Long); class SyncWorker : CoroutineWorker() { override suspend fun doWork(): Result { val pending = dao.getPendingOps(); pending.forEach { api.execute(it); dao.deletePendingOp(it.id) }; return Result.success() } }",suspend fun save(item: Item) { try { api.save(item) } catch (e: IOException) { /* silently lost */ } } // offline writes disappear,Medium,
Permissions,Runtime Permission with Compose,Use rememberLauncherForActivityResult with ActivityResultContracts.RequestPermission for single permissions or RequestMultiplePermissions for multiple. Check permission state before requesting.,rememberLauncherForActivityResult + check shouldShowRationale before requesting,requestPermissions in Activity with onRequestPermissionsResult callback,"val permissionLauncher = rememberLauncherForActivityResult(ActivityResultContracts.RequestPermission()) { granted -> if (granted) onPermissionGranted() else onPermissionDenied() }; if (ContextCompat.checkSelfPermission(ctx, CAMERA) == GRANTED) { onPermissionGranted() } else { permissionLauncher.launch(CAMERA) }","override fun onRequestPermissionsResult(requestCode: Int, permissions: Array<String>, results: IntArray) { /* deprecated callback pattern */ }",High,https://developer.android.com/training/permissions/requesting
Permissions,Permission Rationale,Show rationale UI explaining why the permission is needed before requesting. Use shouldShowRequestPermissionRationale to detect when the system suggests showing rationale.,Check shouldShowRationale and show explanation dialog before requesting,Request permission immediately without context; user denies permanently,"val activity = ctx as Activity; when { ContextCompat.checkSelfPermission(ctx, CAMERA) == GRANTED -> openCamera(); activity.shouldShowRequestPermissionRationale(CAMERA) -> showRationaleDialog(onConfirm = { launcher.launch(CAMERA) }); else -> launcher.launch(CAMERA) }",launcher.launch(CAMERA) // no explanation; user taps Deny twice = permanent denial with no recourse,High,https://developer.android.com/training/permissions/requesting#explain
Permissions,Minimum Permissions,"Request only the permissions your app actually needs. Use Photo Picker instead of READ_MEDIA_IMAGES, use MediaStore for media access, use FileProvider for sharing files.",Use platform APIs that avoid permissions entirely where possible,Requesting broad permissions when narrow alternatives exist,// Photo Picker - no permission needed: val pickMedia = rememberLauncherForActivityResult(PickVisualMedia()) { uri -> uri?.let { processImage(it) } }; pickMedia.launch(PickVisualMediaRequest(ImageOnly)),// Requesting READ_EXTERNAL_STORAGE just to pick one photo: launcher.launch(READ_EXTERNAL_STORAGE),Medium,https://developer.android.com/training/permissions/evaluating
Paging,Paging 3 PagingSource,Implement PagingSource for loading paginated data from a single source (API or DB). Define load() to fetch pages and return LoadResult.Page with prevKey/nextKey.,PagingSource with proper prevKey/nextKey for bidirectional paging,Manual page tracking in ViewModel with growing MutableList,"class ArticlePagingSource @Inject constructor(private val api: ArticleApi) : PagingSource<Int, ArticleDto>() { override suspend fun load(params: LoadParams<Int>): LoadResult<Int, ArticleDto> { val page = params.key ?: 1; return try { val response = api.getArticles(page, params.loadSize); LoadResult.Page(data = response, prevKey = if (page == 1) null else page - 1, nextKey = if (response.isEmpty()) null else page + 1) } catch (e: Exception) { LoadResult.Error(e) } } }",class ArticleVM : ViewModel() { var page = 1; val articles = mutableListOf<Article>(); fun loadMore() { viewModelScope.launch { articles.addAll(api.getArticles(page++)) } } } // manual pagination; no error/loading states,High,https://developer.android.com/topic/libraries/architecture/paging/v3-paged-data
Paging,RemoteMediator for Offline Paging,"Use RemoteMediator to implement offline-first pagination: load pages from network into Room, PagingSource reads from Room. Provides seamless offline scrolling with automatic refresh.",RemoteMediator for network-to-DB pagination; PagingSource from Room,Separate online/offline list implementations,"@OptIn(ExperimentalPagingApi::class) val pager = Pager(config = PagingConfig(pageSize = 20), remoteMediator = ArticleRemoteMediator(api, db), pagingSourceFactory = { db.articleDao().pagingSource() })",// Two separate code paths: if (isOnline) api.getPage(n) else db.getAll() // no automatic merge or refresh,Medium,https://developer.android.com/topic/libraries/architecture/paging/v3-network-db
Paging,collectAsLazyPagingItems,Use collectAsLazyPagingItems() in Compose to connect Pager Flow to LazyColumn. Handle loadState for loading/error indicators at top and bottom of list.,collectAsLazyPagingItems + loadState checks for append/refresh states,Manual loading/error state management alongside LazyColumn,"val articles = viewModel.articles.collectAsLazyPagingItems(); LazyColumn { items(articles.itemCount, key = articles.itemKey { it.id }) { index -> articles[index]?.let { ArticleCard(it) } }; item { if (articles.loadState.append is LoadState.Loading) CircularProgressIndicator() } }",LazyColumn { items(viewModel.list) { ArticleCard(it) }; item { Button(onClick = { viewModel.loadMore() }) { Text('Load More') } } } // manual load-more button,High,https://developer.android.com/topic/libraries/architecture/paging/v3-paged-data#consume-ui
Paging,PagingConfig Tuning,"Configure PagingConfig with appropriate pageSize (typically 20-30), prefetchDistance for preloading, and enablePlaceholders for stable scroll position.",pageSize=20-30 with prefetchDistance for smooth scrolling,Very small pages causing excessive API calls or very large pages wasting bandwidth,"val pager = Pager(config = PagingConfig(pageSize = 20, prefetchDistance = 5, initialLoadSize = 40, enablePlaceholders = false), pagingSourceFactory = { ArticlePagingSource(api) }).flow.cachedIn(viewModelScope)",Pager(PagingConfig(pageSize = 5)) // too small; constant network requests while scrolling; or pageSize = 200 loads too much,Medium,https://developer.android.com/topic/libraries/architecture/paging/v3-paged-data
Accessibility,Touch Target Size,"Ensure all interactive elements have a minimum touch target of 48dp x 48dp. Use Modifier.sizeIn(minWidth = 48.dp, minHeight = 48.dp) or Modifier.minimumInteractiveComponentSize().",Minimum 48dp touch targets. Use minimumInteractiveComponentSize() modifier,Small icons or text buttons with touch targets below 48dp,"IconButton(onClick = { onAction() }, modifier = Modifier.minimumInteractiveComponentSize()) { Icon(Icons.Default.Favorite, contentDescription = 'Add to favorites') }","Icon(Icons.Default.Favorite, contentDescription = null, modifier = Modifier.size(16.dp).clickable { }) // 16dp touch target; inaccessible",High,https://developer.android.com/develop/ui/compose/accessibility
Accessibility,Content Descriptions,Provide meaningful contentDescription for all images and icons. Use null only for purely decorative elements. Screen readers use these to describe UI to visually impaired users.,Descriptive contentDescription for functional elements; null for decorative only,contentDescription = null on all images or generic descriptions,"Icon(Icons.Default.Delete, contentDescription = 'Delete article'); Image(painter = painterResource(R.drawable.hero), contentDescription = null) // purely decorative background","Icon(Icons.Default.Delete, contentDescription = null) // TalkBack says nothing; Icon(Icons.Default.Settings, contentDescription = 'icon') // unhelpful",High,https://developer.android.com/develop/ui/compose/accessibility
Accessibility,Heading Semantics,Mark section headings with Modifier.semantics { heading() } so TalkBack users can navigate between sections using swipe gestures. Apply to screen titles and section headers.,semantics { heading() } on section titles and screen headers,No heading semantics making long screens difficult to navigate,"Text('Settings', style = MaterialTheme.typography.headlineMedium, modifier = Modifier.semantics { heading() })","Text('Settings', style = MaterialTheme.typography.headlineMedium) // no heading semantics; TalkBack reads as plain text",Medium,https://developer.android.com/develop/ui/compose/accessibility#headings
Accessibility,Color Contrast,"Ensure text and interactive elements meet WCAG AA contrast ratio: 4.5:1 for normal text, 3:1 for large text. Use Material3 color roles which are designed to meet contrast requirements.",Use Material3 color roles. Test with Accessibility Scanner,Low-contrast custom colors without checking ratios,"Text('Important', color = MaterialTheme.colorScheme.onSurface) // Material3 guarantees contrast; Surface(color = MaterialTheme.colorScheme.errorContainer) { Text('Error', color = MaterialTheme.colorScheme.onErrorContainer) }","Text('Warning', color = Color(0xFFFFCC00), modifier = Modifier.background(Color.White)) // yellow on white = 1.5:1 ratio; unreadable",Medium,https://developer.android.com/develop/ui/compose/accessibility
Security,Encrypted Storage,Use EncryptedSharedPreferences or EncryptedFile from AndroidX Security for storing sensitive data like tokens and API keys. Never store secrets in plain SharedPreferences or BuildConfig.,EncryptedSharedPreferences for tokens/secrets,Plain SharedPreferences or BuildConfig for sensitive data,"val masterKey = MasterKey.Builder(ctx).setKeyScheme(MasterKey.KeyScheme.AES256_GCM).build(); val securePrefs = EncryptedSharedPreferences.create(ctx, 'secret_prefs', masterKey, PrefKeyEncryptionScheme.AES256_SIV, PrefValueEncryptionScheme.AES256_GCM); securePrefs.edit().putString('auth_token', token).apply()","val prefs = getSharedPreferences('prefs', MODE_PRIVATE); prefs.edit().putString('auth_token', token).apply() // plaintext on disk; root access = stolen token",Critical,https://developer.android.com/topic/security/data
Security,Network Security Config,"Configure network_security_config.xml to enforce HTTPS, disable cleartext traffic, and pin certificates. Debug config can allow cleartext for local development only.",network_security_config with cleartextTrafficPermitted=false in production,Allowing cleartext HTTP in production or no security config,<!-- res/xml/network_security_config.xml --> <network-security-config><base-config cleartextTrafficPermitted='false'><trust-anchors><certificates src='system' /></trust-anchors></base-config><debug-overrides><trust-anchors><certificates src='user' /></trust-anchors></debug-overrides></network-security-config>,android:usesCleartextTraffic='true' in manifest // all HTTP traffic unencrypted in production,High,https://developer.android.com/privacy-and-security/security-config
Security,Biometric Authentication,Use BiometricPrompt from AndroidX Biometric for fingerprint/face authentication. Use CryptoObject for cryptographic operations tied to biometric auth.,BiometricPrompt with CryptoObject for sensitive operations,Custom fingerprint scanning or password-only for sensitive actions,"val biometricPrompt = BiometricPrompt(fragment, executor, object : AuthenticationCallback() { override fun onAuthenticationSucceeded(result: AuthenticationResult) { val cipher = result.cryptoObject?.cipher; decryptSensitiveData(cipher) } }); biometricPrompt.authenticate(promptInfo, BiometricPrompt.CryptoObject(cipher))",// Only username/password for banking transactions; or FingerprintManager (deprecated API),Medium,https://developer.android.com/training/sign-in/biometric-auth
Security,ProGuard Obfuscation,"Enable code shrinking and obfuscation with R8 in release builds. Write keep rules only for reflection-used classes (serialization models, JNI). Obfuscation makes reverse engineering harder.",R8 with minifyEnabled=true and proper keep rules for release,No obfuscation in release or keeping everything,"android { buildTypes { release { isMinifyEnabled = true; isShrinkResources = true; proguardFiles(getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro') } } }",buildTypes { release { isMinifyEnabled = false } } // full source code visible in APK; or -keep class ** { *; } keeping everything,High,https://developer.android.com/build/shrink-code
Security,SQL Injection Prevention,Always use parameterized queries with Room @Query or SupportSQLiteDatabase.query(). Never concatenate user input into SQL strings.,Parameterized queries via Room @Query with :param placeholders,String concatenation in raw SQL queries,@Query('SELECT * FROM users WHERE name = :searchName') fun findByName(searchName: String): Flow<List<UserEntity>> // Room parameterizes automatically,"val cursor = db.rawQuery('SELECT * FROM users WHERE name = ''' + userInput + '''', null) // SQL injection vulnerability",Critical,
ErrorHandling,Result Wrapper Pattern,"Define a sealed interface Result<T> with Success, Error, and Loading states. All repository methods return this type. ViewModel maps to UiState.",Sealed Result type returned from repository; ViewModel maps to UiState,Throwing exceptions from repository or using nullable return types,sealed interface Result<out T> { data class Success<T>(val data: T) : Result<T>; data class Error(val exception: Throwable) : Result<Nothing>; data object Loading : Result<Nothing> }; class ArticleRepo { suspend fun getArticle(id: String): Result<Article> = try { Result.Success(api.get(id).toDomain()) } catch (e: Exception) { Result.Error(e) } },suspend fun getArticle(id: String): Article? = try { api.get(id) } catch (e: Exception) { null } // null = error or not found? no error info; or throwing raw exceptions to ViewModel,High,
ErrorHandling,Retry with Exponential Backoff,Implement retry logic with exponential backoff for transient network failures. Limit retry count. Use Flow.retryWhen or custom retry loop.,Exponential backoff with max retries for transient failures,Infinite retries or immediate retries hammering a failing server,"suspend fun <T> retryWithBackoff(maxRetries: Int = 3, initialDelayMs: Long = 1000, block: suspend () -> T): T { var currentDelay = initialDelayMs; repeat(maxRetries) { attempt -> try { return block() } catch (e: IOException) { if (attempt == maxRetries - 1) throw e; delay(currentDelay); currentDelay *= 2 } }; throw IllegalStateException() }",suspend fun fetchWithRetry() { while (true) { try { return api.fetch() } catch (e: Exception) { delay(100) } } } // infinite retry; 100ms = hammering server,Medium,
ErrorHandling,Global Error Handler,Set up a centralized error handling mechanism using CoroutineExceptionHandler or a shared error channel. Avoid duplicate error handling logic across ViewModels.,Shared error handling utility or base pattern; centralized crash reporting,try-catch in every ViewModel method with duplicated error-to-message logic,class ErrorMapper @Inject constructor() { fun toUserMessage(e: Throwable): String = when (e) { is HttpException -> when (e.code()) { 401 -> 'Session expired'; 403 -> 'Access denied'; 500 -> 'Server error'; else -> 'Network error' }; is IOException -> 'No internet connection'; else -> 'Something went wrong' } },// Every ViewModel: try { repo.fetch() } catch (e: HttpException) { if (e.code() == 401) 'Session expired' else if (e.code() == 500) 'Server error' ... } // duplicated in 20 ViewModels,Medium,
AppStartup,App Startup Library,Use the App Startup library to initialize components lazily at app start using a single ContentProvider instead of multiple. Reduces startup time by batching initialization.,App Startup Initializer for SDK initialization with dependency ordering,Multiple ContentProviders each SDK registering its own,class AnalyticsInitializer : Initializer<Analytics> { override fun create(ctx: Context): Analytics { return Analytics.init(ctx) }; override fun dependencies() = listOf(WorkManagerInitializer::class.java) },// Each SDK adds its own ContentProvider in manifest; 5 ContentProviders = 5x provider creation overhead at startup,Medium,https://developer.android.com/topic/libraries/app-startup
AppStartup,Splash Screen API,Use the SplashScreen API (Android 12+) for a consistent branded launch experience. Avoid custom splash activities which add unnecessary Activity creation overhead.,SplashScreen API with installSplashScreen() in theme,Custom SplashActivity with a delay before navigating to main,class MainActivity : ComponentActivity() { override fun onCreate(savedInstanceState: Bundle?) { val splashScreen = installSplashScreen(); splashScreen.setKeepOnScreenCondition { viewModel.isLoading.value }; super.onCreate(savedInstanceState) } },"class SplashActivity : AppCompatActivity() { override fun onCreate(s: Bundle?) { super.onCreate(s); setContentView(R.layout.splash); Handler().postDelayed({ startActivity(Intent(this, MainActivity::class.java)); finish() }, 2000) } // fake 2s delay; extra Activity overhead }",Medium,https://developer.android.com/develop/ui/views/launch/splash-screen
AppStartup,Lazy Initialization,Defer initialization of expensive objects until first use. Use Kotlin lazy delegation or Hilt's Provider<T> for on-demand creation. Avoids loading unused features at startup.,lazy {} or Provider<T> for expensive rarely-used dependencies,Initializing all dependencies eagerly in Application.onCreate(),val heavyAnalytics by lazy { HeavyAnalyticsEngine.init(ctx) } // only initialized when first accessed,// In Application.onCreate(): HeavyAnalyticsEngine.init(this); CrashReporter.init(this); FeatureFlags.init(this); AdSdk.init(this); // everything upfront even if user never uses ads,Medium,
AppStartup,Startup Tracing,Use Macrobenchmark with StartupTimingMetric to measure cold/warm/hot start times. Profile with Perfetto trace to identify initialization bottlenecks.,Macrobenchmark startup tests in CI; Perfetto traces for profiling,Guessing startup performance without measurement,"@RunWith(AndroidJUnit4::class) class StartupBenchmark { @get:Rule val rule = MacrobenchmarkRule(); @Test fun startupCompilationFull() { rule.measureRepeated(packageName = PACKAGE, metrics = listOf(StartupTimingMetric()), iterations = 10, startupMode = StartupMode.COLD) { pressHome(); startActivityAndWait() } }",// No startup benchmarks; 'feels fast enough' without data; surprised by Play Store vitals showing 3s cold start,Medium,https://developer.android.com/topic/performance/benchmarking/macrobenchmark-overview
Animation,AnimatedVisibility,"Use AnimatedVisibility for enter/exit animations on composables. Customize with fadeIn/fadeOut, slideIn/slideOut, expandIn/shrinkOut transitions.",AnimatedVisibility with appropriate enter/exit transitions,Conditional if/else with no animation,"AnimatedVisibility(visible = showDetails, enter = fadeIn() + expandVertically(), exit = fadeOut() + shrinkVertically()) { DetailContent() }",if (showDetails) { DetailContent() } // instant appear/disappear; jarring UX,Medium,https://developer.android.com/develop/ui/compose/animation/composables-modifiers
Animation,animate*AsState,"Use animateFloatAsState, animateColorAsState, animateDpAsState for smooth value transitions. Compose automatically animates between old and new values.",animate*AsState for property transitions with customizable animationSpec,Instant value changes with no interpolation,"val backgroundColor by animateColorAsState(targetValue = if (isSelected) MaterialTheme.colorScheme.primaryContainer else MaterialTheme.colorScheme.surface, animationSpec = tween(300)); Surface(color = backgroundColor) { content() }",Surface(color = if (isSelected) primaryContainer else surface) { content() } // instant color switch; no transition,Medium,https://developer.android.com/develop/ui/compose/animation/value-based
Animation,updateTransition,Use updateTransition for coordinating multiple animations that should run together based on a state change. Groups related animations with a single state source.,updateTransition for multi-property animations tied to one state,Multiple independent animate*AsState with manual state synchronization,"val transition = updateTransition(targetState = tabState, label = 'tab'); val indicatorOffset by transition.animateDp(label = 'offset') { state -> state.offset }; val indicatorWidth by transition.animateDp(label = 'width') { state -> state.width }; val indicatorColor by transition.animateColor(label = 'color') { state -> state.color }",val offset by animateDpAsState(state.offset); val width by animateDpAsState(state.width); val color by animateColorAsState(state.color) // three independent animations; may desync,Low,https://developer.android.com/develop/ui/compose/animation/value-based#updateTransition
Animation,Motion Specs,"Use spring() for natural feeling interactions and tween() for precise timing. Spring for user-triggered animations (press, drag); tween for system animations (enter/exit).",spring for interactive; tween for predictable; avoid hard-coded durations in multiple places,LinearEasing tween for everything or no animation spec,"val scale by animateFloatAsState(targetValue = if (pressed) 0.95f else 1f, animationSpec = spring(dampingRatio = Spring.DampingRatioMediumBouncy, stiffness = Spring.StiffnessLow))","val scale by animateFloatAsState(if (pressed) 0.95f else 1f, tween(100, easing = LinearEasing)) // robotic linear feel for press interaction",Low,https://developer.android.com/develop/ui/compose/animation/customize
Widgets,Glance for App Widgets,Use Jetpack Glance to build app widgets with Compose-like syntax. Glance translates composables to RemoteViews automatically. Replace legacy RemoteViews XML.,Glance composables for app widgets,Manual RemoteViews with XML layouts,"class ArticleWidget : GlanceAppWidget() { override suspend fun provideGlance(ctx: Context, id: GlanceId) { provideContent { val articles = getArticles(); LazyColumn { items(articles) { article -> Text(article.title) } } } } }","class ArticleWidget : AppWidgetProvider() { override fun onUpdate(ctx: Context, mgr: AppWidgetManager, ids: IntArray) { val views = RemoteViews(ctx.packageName, R.layout.widget); views.setTextViewText(R.id.title, 'Hello'); mgr.updateAppWidget(ids, views) } } // XML layouts; no Compose",Medium,https://developer.android.com/develop/ui/compose/glance
Widgets,GlanceStateDefinition,Use GlanceStateDefinition with DataStore to persist widget state. Update widget data in a CoroutineWorker and trigger widget refresh.,DataStore-backed state + WorkManager for background updates,SharedPreferences for widget state or fetching data in onUpdate,class ArticleWidgetReceiver : GlanceAppWidgetReceiver() { override val glanceAppWidget = ArticleWidget() }; class RefreshWorker : CoroutineWorker() { override suspend fun doWork(): Result { val articles = repo.fetchLatest(); updateWidgetState(articles); ArticleWidget().updateAll(ctx); return Result.success() } },"override fun onUpdate(...) { val data = prefs.getString('cached', ''); /* parse and display stale data; no background refresh */ }",Medium,https://developer.android.com/develop/ui/compose/glance/create-app-widget
Widgets,Widget Size Classes,"Handle different widget sizes using SizeMode.Responsive with multiple size layouts. Provide appropriate content density for small, medium, and large widget placements.",SizeMode.Responsive with breakpoints for different widget sizes,Fixed single-size layout that looks wrong when resized,"override val sizeMode = SizeMode.Responsive(setOf(DpSize(120.dp, 120.dp), DpSize(250.dp, 120.dp), DpSize(250.dp, 250.dp))); @Composable override fun Content() { val size = LocalSize.current; when { size.width < 200.dp -> CompactWidget(); size.height < 200.dp -> WideWidget(); else -> FullWidget() } }",override val sizeMode = SizeMode.Single // same layout stretched/squished for all widget sizes,Low,https://developer.android.com/develop/ui/compose/glance/create-app-widget#size
Notifications,Notification Channels,Create notification channels (required on Android 8+) organized by user-facing category. Allow users to control importance per channel. Create channels in Application.onCreate().,Separate channels per notification type created at app start,Single default channel for all notifications or creating channels lazily,"fun createChannels(ctx: Context) { val mgr = ctx.getSystemService<NotificationManager>(); mgr.createNotificationChannel(NotificationChannel('messages', 'Messages', IMPORTANCE_HIGH).apply { description = 'New message notifications' }); mgr.createNotificationChannel(NotificationChannel('updates', 'Updates', IMPORTANCE_LOW).apply { description = 'App update notifications' }) }","// Single channel: NotificationChannel('default', 'Default', IMPORTANCE_DEFAULT); // or no channel creation = notifications silently fail on Android 8+",High,https://developer.android.com/develop/ui/views/notifications/channels
Notifications,NotificationCompat Builder,"Use NotificationCompat.Builder from AndroidX for backward-compatible notifications. Set required fields: smallIcon, contentTitle, contentText, channelId. Add PendingIntent for tap action.",NotificationCompat.Builder with all required fields + PendingIntent + channelId,Notification.Builder (platform) without compat or missing required fields,"val intent = PendingIntent.getActivity(ctx, 0, Intent(ctx, MainActivity::class.java).apply { flags = Intent.FLAG_ACTIVITY_SINGLE_TOP; putExtra('articleId', id) }, PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT); val notification = NotificationCompat.Builder(ctx, 'messages').setSmallIcon(R.drawable.ic_notification).setContentTitle(title).setContentText(body).setContentIntent(intent).setAutoCancel(true).build()","Notification.Builder(ctx, 'messages').setContentTitle(title).build() // no smallIcon = crash on some devices; no PendingIntent = tap does nothing; no compat = API differences",High,https://developer.android.com/develop/ui/views/notifications/build-notification
Notifications,POST_NOTIFICATIONS Permission,Request POST_NOTIFICATIONS runtime permission on Android 13+ before showing notifications. Without it notifications are silently blocked.,Request POST_NOTIFICATIONS on Android 13+ at an appropriate moment,Showing notifications without permission on Android 13+ = silently dropped,"if (Build.VERSION.SDK_INT >= 33) { val launcher = rememberLauncherForActivityResult(RequestPermission()) { granted -> if (granted) scheduleNotifications() }; LaunchedEffect(Unit) { if (ContextCompat.checkSelfPermission(ctx, POST_NOTIFICATIONS) != GRANTED) launcher.launch(POST_NOTIFICATIONS) } }",// No permission request; notifications silently fail on Android 13+; user never sees them,High,https://developer.android.com/develop/ui/views/notifications/notification-permission
DeepLinks,Navigation Deep Links,Define deep links in Navigation Compose using deepLinks parameter on composable destinations. Handle both custom scheme and https links.,Deep links declared on composable destinations with proper URI patterns,Manual intent parsing in Activity with complex when/if chains,composable<ArticleRoute>(deepLinks = listOf(navDeepLink<ArticleRoute>(basePath = 'https://myapp.com/articles'))) { entry -> val route = entry.toRoute<ArticleRoute>(); ArticleScreen(route.id) },// In MainActivity: override fun onNewIntent(intent: Intent) { val uri = intent.data; if (uri?.path?.startsWith('/articles') == true) { val id = uri.lastPathSegment; navController.navigate('article/$id') } } // fragile manual parsing,High,https://developer.android.com/guide/navigation/design/deep-link
DeepLinks,App Links Verification,Set up Android App Links with Digital Asset Links for verified https deep links. This makes your app the default handler without disambiguation dialog.,Verified App Links with assetlinks.json on server,Unverified deep links showing disambiguation dialog every time,<!-- AndroidManifest.xml --> <intent-filter android:autoVerify='true'><action android:name='android.intent.action.VIEW' /><category android:name='android.intent.category.DEFAULT' /><category android:name='android.intent.category.BROWSABLE' /><data android:scheme='https' android:host='myapp.com' /></intent-filter>; /* Plus .well-known/assetlinks.json on server */,<!-- No autoVerify --> <intent-filter><data android:scheme='https' android:host='myapp.com' /></intent-filter> // disambiguation dialog every time; poor UX,Medium,https://developer.android.com/training/app-links/verify-android-applinks
DeepLinks,Deep Link Testing,Test deep links using adb commands and Navigation testing APIs. Verify all deep link routes resolve correctly in both cold start and warm start scenarios.,adb shell am start for manual testing; Navigation test for automated,Only testing deep links by clicking actual links in browser,"adb shell am start -a android.intent.action.VIEW -d 'https://myapp.com/articles/123' com.myapp; /* Plus automated: */ @Test fun articleDeepLink_navigatesToDetail() { val navController = TestNavHostController(ctx); navController.handleDeepLink(Intent().apply { data = Uri.parse('https://myapp.com/articles/123') }); assertEquals(ArticleRoute(id = '123'), navController.currentDestination) }",// Only test by manually opening links in Chrome; no automated testing; broken deep links found by users,Medium,https://developer.android.com/guide/navigation/design/deep-link
CICD,GitHub Actions Android CI,"Set up GitHub Actions CI with build, lint, and test steps. Cache Gradle dependencies for faster builds. Run on pull requests to catch issues early.",CI pipeline: build + lint + test on every PR with Gradle caching,No CI; manual builds on developer machines only,# .github/workflows/android.yml: jobs: build: runs-on: ubuntu-latest; steps: - uses: actions/checkout@v4; - uses: actions/setup-java@v4 with: java-version: 17; - uses: gradle/actions/setup-gradle@v3; - run: ./gradlew build lintDebug testDebugUnitTest,No CI pipeline; bugs found after merging to main; manual './gradlew build' before each commit,Medium,
CICD,Gradle Build Cache,Enable Gradle build cache and configuration cache for faster CI and local builds. Remote cache shared across team members eliminates redundant compilation.,Build cache + configuration cache enabled; remote cache for team,No caching; full rebuild every CI run,# gradle.properties: org.gradle.caching=true; org.gradle.configuration-cache=true; # settings.gradle.kts: buildCache { local { isEnabled = true }; remote<HttpBuildCache> { url = uri('https://cache.myteam.com/'); isPush = System.getenv('CI') != null } },# Every CI run: 8-minute full rebuild; every developer rebuilds everything locally,Medium,https://developer.android.com/build/optimize-your-build
CICD,Automated Release with Signing,Automate APK/AAB signing in CI using environment secrets for keystore. Never commit keystores to version control. Use bundletool for local AAB testing.,Keystore secrets in CI environment variables; AAB for Play Store,Keystore committed to git or manual signing on developer machine,# CI: KEYSTORE_BASE64 and KEY_PASSWORD as secrets; android { signingConfigs { release { storeFile = file(System.getenv('KEYSTORE_PATH')); storePassword = System.getenv('STORE_PASSWORD'); keyAlias = System.getenv('KEY_ALIAS'); keyPassword = System.getenv('KEY_PASSWORD') } } },// keystore.jks committed to git; passwords in gradle.properties pushed to remote // OR: manual signing on one developers machine before each release,High,
CICD,Detekt and Ktlint,"Integrate static analysis (Detekt for code smells, Ktlint for formatting) in CI. Fail the build on violations to maintain code quality standards.",Detekt + Ktlint in CI pipeline failing on violations,No static analysis; code style debates in PR reviews,// build.gradle.kts: plugins { id('io.gitlab.arturbosch.detekt'); id('org.jlleitschuh.gradle.ktlint') }; detekt { config.setFrom('config/detekt.yml'); buildUponDefaultConfig = true }; // CI step: ./gradlew detekt ktlintCheck,No automated style checks; inconsistent formatting across team; 50-comment PR reviews about spacing,Medium,https://detekt.dev/docs/intro
Android 10 (API 29),Scoped Storage,Apps targeting API 29+ get scoped access to external storage by default limiting access to app-specific directories and media the app created. Apps can temporarily opt out via requestLegacyExternalStorage=true.,Use MediaStore or SAF for shared files; app-specific dirs for private files,Directly access arbitrary files on external storage via file paths,getExternalFilesDir(null) for private; MediaStore.Images for shared photos,File('/sdcard/Download/file.txt') // direct path access fails on API 29+,Critical,https://developer.android.com/about/versions/10/privacy/changes
Android 10 (API 29),Background Activity Restrictions,Apps running in the background cannot start activities directly on API 29+. Must use high-priority notifications with full-screen intents instead.,Use high-priority notification with fullScreenIntent for urgent alerts,Start activities from background services or broadcast receivers,"NotificationCompat.Builder(ctx, 'urgent').setFullScreenIntent(pendingIntent, true).setPriority(PRIORITY_HIGH).build()",startActivity(intent) // from background service; blocked on API 29+,High,https://developer.android.com/guide/components/activities/background-starts
Android 10 (API 29),Background Location Permission,Apps must request ACCESS_BACKGROUND_LOCATION to access location in the background on API 29+. Foreground services accessing location must declare foregroundServiceType=location.,Request ACCESS_BACKGROUND_LOCATION separately; declare foregroundServiceType=location,Assume location access works in background with only ACCESS_FINE_LOCATION,<service android:foregroundServiceType='location' />; requestPermissions(arrayOf(ACCESS_BACKGROUND_LOCATION)),// Only ACCESS_FINE_LOCATION requested; location stops working in background,High,https://developer.android.com/develop/sensors-and-location/location/permissions
Android 11 (API 30),Scoped Storage Enforcement,Scoped storage is fully enforced on API 30+. The requestLegacyExternalStorage manifest flag is ignored. Apps must use MediaStore SAF or app-specific directories for all file access.,Use MediaStore APIs SAF or app-specific directories exclusively,Rely on requestLegacyExternalStorage flag; it is ignored on API 30+,"contentResolver.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, projection, selection, null, null)",android:requestLegacyExternalStorage='true' // ignored on API 30+; File() paths fail,Critical,https://developer.android.com/about/versions/11/privacy/storage
Android 11 (API 30),Package Visibility,Apps targeting API 30+ cannot query all installed packages by default. Must declare specific packages or intent filters using the queries element in the manifest to discover other apps.,Declare queries element in manifest for packages your app needs to interact with,Call queryIntentActivities or getInstalledPackages without queries declaration,<queries><package android:name='com.example.app' /><intent><action android:name='android.intent.action.SEND' /></intent></queries>,// packageManager.getInstalledPackages(0) returns empty on API 30+ without queries,High,https://developer.android.com/about/versions/11/privacy/package-visibility
Android 11 (API 30),One-Time Permissions,Users can grant location camera and microphone permissions as Only this time on API 30+. Permission is auto-revoked when the app activity is no longer visible and no foreground service is running.,Handle permission being revoked between sessions; re-check before use,Assume permission persists after a single grant,if (checkSelfPermission(CAMERA) == GRANTED) { openCamera() } else { requestPermission() },// Assume camera permission granted once lasts forever; crash when revoked,Medium,https://developer.android.com/about/versions/11/privacy/permissions
Android 11 (API 30),Foreground Service Camera Mic Type,Apps targeting API 30+ that access camera or microphone from a foreground service must declare foregroundServiceType camera or microphone in manifest.,Declare foregroundServiceType=camera|microphone for services using these sensors,Access camera or microphone from foreground service without declaring type,<service android:name='.RecordingService' android:foregroundServiceType='camera|microphone' />,<service android:name='.RecordingService' /> // no type; camera/mic access denied from foreground service,High,https://developer.android.com/about/versions/11/privacy/foreground-services
Android 12 (API 31),Exported Components Required,Any activity service or broadcast receiver with intent filters must explicitly set android:exported=true or false. Missing this causes an installation error on API 31+.,Explicitly set android:exported on all components with intent-filters,Omit android:exported attribute on components with intent filters,<activity android:name='.MainActivity' android:exported='true'><intent-filter>...</intent-filter></activity>,<activity android:name='.MainActivity'><intent-filter>...</intent-filter></activity> // install fails on API 31+,Critical,https://developer.android.com/about/versions/12/behavior-changes-12
Android 12 (API 31),Exact Alarm Permission,Apps must declare SCHEDULE_EXACT_ALARM and verify via canScheduleExactAlarms() before calling setExact() or setExactAndAllowWhileIdle() on AlarmManager.,Declare SCHEDULE_EXACT_ALARM; check canScheduleExactAlarms() before use,Call setExact() without permission; crashes on API 31+,"if (alarmManager.canScheduleExactAlarms()) { alarmManager.setExact(AlarmManager.RTC_WAKEUP, triggerTime, pendingIntent) }","alarmManager.setExact(AlarmManager.RTC_WAKEUP, triggerTime, pendingIntent) // SecurityException on API 31+",High,https://developer.android.com/develop/background-work/services/alarms
Android 12 (API 31),SplashScreen API Migration,Android 12 applies a system default splash screen on cold/warm starts for all apps. Apps must migrate to the SplashScreen API to avoid duplicate splash screens.,Use installSplashScreen() and migrate from custom splash Activity,Keep custom SplashActivity with delay; causes duplicate splash on Android 12+,installSplashScreen().setKeepOnScreenCondition { viewModel.isLoading.value },// Custom SplashActivity + Handler.postDelayed = user sees TWO splash screens on Android 12+,High,https://developer.android.com/develop/ui/views/launch/splash-screen/migrate
Android 12 (API 31),Approximate Location Option,Users can grant only approximate (coarse) location even when apps request fine location on API 31+. Apps must declare both ACCESS_FINE_LOCATION and ACCESS_COARSE_LOCATION.,Declare both ACCESS_FINE_LOCATION and ACCESS_COARSE_LOCATION; handle approximate grants,Request only ACCESS_FINE_LOCATION; system ignores the request on API 31+,"requestPermissions(arrayOf(ACCESS_FINE_LOCATION, ACCESS_COARSE_LOCATION), REQUEST_CODE)",requestPermissions(arrayOf(ACCESS_FINE_LOCATION)) // system ignores; no permission dialog shown on API 31+,High,https://developer.android.com/about/versions/12/behavior-changes-all
Android 12 (API 31),New Bluetooth Permissions,Apps targeting API 31+ must use BLUETOOTH_SCAN BLUETOOTH_CONNECT and BLUETOOTH_ADVERTISE instead of legacy BLUETOOTH and BLUETOOTH_ADMIN. Location no longer required for scanning if neverForLocation is set.,Use new granular Bluetooth permissions; set neverForLocation on BLUETOOTH_SCAN,Use deprecated BLUETOOTH/BLUETOOTH_ADMIN permissions on API 31+,<uses-permission android:name='android.permission.BLUETOOTH_CONNECT' />; <uses-permission android:name='android.permission.BLUETOOTH_SCAN' android:usesPermissionFlags='neverForLocation' />,<uses-permission android:name='android.permission.BLUETOOTH' /> // deprecated; does nothing on API 31+,High,https://developer.android.com/develop/connectivity/bluetooth/bt-permissions
Android 12 (API 31),PendingIntent Mutability Flag,Every PendingIntent must specify FLAG_MUTABLE or FLAG_IMMUTABLE on API 31+. Creating a PendingIntent without one of these flags throws IllegalArgumentException.,Always specify FLAG_IMMUTABLE (default) or FLAG_MUTABLE when needed,Create PendingIntent without mutability flag; crashes on API 31+,"PendingIntent.getActivity(ctx, 0, intent, PendingIntent.FLAG_IMMUTABLE or PendingIntent.FLAG_UPDATE_CURRENT)","PendingIntent.getActivity(ctx, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT) // IllegalArgumentException on API 31+",Critical,https://developer.android.com/about/versions/12/behavior-changes-12
Android 13 (API 33),Photo Picker,Android 13 introduces a system photo picker for selecting images and videos without broad storage permissions. No runtime permissions needed to use it.,Use the system Photo Picker via PickVisualMedia contract for media selection,Request READ_EXTERNAL_STORAGE for simple media selection; use custom gallery pickers,val pickMedia = rememberLauncherForActivityResult(PickVisualMedia()) { uri -> uri?.let { processImage(it) } }; pickMedia.launch(PickVisualMediaRequest(PickVisualMedia.ImageOnly)),// Custom file picker with READ_EXTERNAL_STORAGE; or ACTION_GET_CONTENT for media selection,High,https://developer.android.com/training/data-storage/shared/photo-picker
Android 13 (API 33),Granular Media Permissions,READ_EXTERNAL_STORAGE is replaced by READ_MEDIA_IMAGES READ_MEDIA_VIDEO and READ_MEDIA_AUDIO on API 33+. Each must be requested individually based on the type of media accessed.,Request specific READ_MEDIA_* permissions matching the media types your app uses,Request READ_EXTERNAL_STORAGE on API 33+; it is denied automatically,"if (Build.VERSION.SDK_INT >= 33) requestPermissions(arrayOf(READ_MEDIA_IMAGES, READ_MEDIA_VIDEO))",requestPermissions(arrayOf(READ_EXTERNAL_STORAGE)) // auto-denied on API 33+; no media access,Critical,https://developer.android.com/about/versions/13/behavior-changes-13
Android 13 (API 33),POST_NOTIFICATIONS Permission,Apps targeting API 33+ must request POST_NOTIFICATIONS runtime permission before sending notifications. Without it all non-exempt notifications are silently blocked.,Request POST_NOTIFICATIONS at an appropriate moment before sending notifications,Skip permission request; notifications silently fail on API 33+,"if (Build.VERSION.SDK_INT >= 33) { requestPermissions(arrayOf(Manifest.permission.POST_NOTIFICATIONS), REQUEST_CODE) }",// Show notifications without POST_NOTIFICATIONS permission; users never see them on API 33+,Critical,https://developer.android.com/develop/ui/views/notifications/notification-permission
Android 13 (API 33),Per-App Language Preferences,Android 13 adds system APIs for per-app language that let users set a different language per app. Apps should migrate from custom in-app language pickers to LocaleManager.,Use LocaleManager.setApplicationLocales() / getApplicationLocales() and declare localeConfig in manifest,Use custom SharedPreferences-based locale switching or AppCompatDelegate.setApplicationLocales only,<locale-config> in res/xml; LocaleManager.getApplicationLocales() for reading user preference,// Custom locale logic: AppCompatDelegate.setApplicationLocales() without system integration; no localeConfig,Medium,https://developer.android.com/guide/topics/resources/app-languages
Android 13 (API 33),Exact Alarm Pre-Grant Removed,SCHEDULE_EXACT_ALARM is no longer pre-granted for fresh installs on API 33+. Apps that are not alarm/timer/calendar apps should migrate to USE_EXACT_ALARM or inexact alarms.,Use USE_EXACT_ALARM for alarm-clock apps; migrate others to inexact alarms or WorkManager,Assume SCHEDULE_EXACT_ALARM is granted by default on API 33+,// For alarm apps: <uses-permission android:name='android.permission.USE_EXACT_ALARM' />; // For others: alarmManager.setWindow() or WorkManager,// SCHEDULE_EXACT_ALARM assumed granted; alarms silently fail on fresh install API 33+,High,https://developer.android.com/about/versions/14/changes/schedule-exact-alarms
Android 14 (API 34),Foreground Service Types Required,All foreground services must declare a specific foregroundServiceType in the manifest on API 34+. Starting a service without a declared type throws MissingForegroundServiceTypeException.,Declare foregroundServiceType for every foreground service in manifest,Start foreground service without declaring foregroundServiceType; crashes on API 34+,"<service android:name='.SyncService' android:foregroundServiceType='dataSync' />; startForeground(id, notification, FOREGROUND_SERVICE_TYPE_DATA_SYNC)",<service android:name='.SyncService' /> // MissingForegroundServiceTypeException on API 34+,Critical,https://developer.android.com/about/versions/14/changes/fgs-types-required
Android 14 (API 34),Partial Photo Video Access,Users can grant access to selected photos/videos only instead of the entire library on API 34+. Apps should request READ_MEDIA_VISUAL_USER_SELECTED and handle partial grants with re-selection.,Request READ_MEDIA_VISUAL_USER_SELECTED; handle partial grants and prompt re-selection when needed,Assume full media library access after permission grant on API 34+,"requestPermissions(arrayOf(READ_MEDIA_IMAGES, READ_MEDIA_VISUAL_USER_SELECTED)); // Handle PERMISSION_GRANTED vs partial",// Assume all photos accessible after grant; app shows empty gallery when user selected only a few photos,High,https://developer.android.com/about/versions/14/changes/partial-photo-video-access
Android 14 (API 34),Screenshot Detection API,A new privacy-preserving API lets apps register per-activity callbacks when users take a screenshot. The callback notifies the app but does not provide the screenshot image itself.,Register Activity.ScreenCaptureCallback for screenshot-sensitive screens,Use FileObserver on screenshot directories or no screenshot awareness,"registerScreenCaptureCallback(mainExecutor, callback); // callback.onScreenCaptured() triggers UI notice",// FileObserver on /Pictures/Screenshots; or no detection at all for sensitive banking screens,Medium,https://developer.android.com/about/versions/14/features/screenshot-detection
Android 14 (API 34),Full-Screen Intent Restriction,USE_FULL_SCREEN_INTENT is restricted to calling and alarm apps only on API 34+. Google Play revokes this permission for non-qualifying apps. Check canUseFullScreenIntent() before use.,Check NotificationManager.canUseFullScreenIntent(); only use for calls/alarms,Use USE_FULL_SCREEN_INTENT for marketing notifications or non-urgent alerts,"if (notificationManager.canUseFullScreenIntent()) { builder.setFullScreenIntent(pendingIntent, true) }",// USE_FULL_SCREEN_INTENT for promotional notifications; permission revoked by Play on API 34+,High,https://developer.android.com/about/versions/14/behavior-changes-14
Android 14 (API 34),Implicit Intent Restrictions,Implicit intents are only delivered to exported components on API 34+. Sending an implicit intent to a non-exported component or mutable PendingIntent without specifying component throws an exception.,Use explicit intents for internal components; specify component/package on PendingIntents,Send implicit intents to internal components without exported=true,"val intent = Intent(ctx, MyReceiver::class.java) // explicit intent for internal component",sendBroadcast(Intent('com.myapp.ACTION')) // implicit intent to internal receiver; exception on API 34+,High,https://developer.android.com/about/versions/14/behavior-changes-14
Android 14 (API 34),Minimum targetSdkVersion 23,Apps with targetSdkVersion lower than 23 cannot be installed on Android 14+ devices. This ensures all apps support the runtime permissions model from Android 6.0.,Ensure targetSdkVersion >= 23 (ideally latest); follow Play Store target API requirements,Target SDK versions below 23; app cannot be installed on Android 14+,android { defaultConfig { targetSdk = 35 } },android { defaultConfig { targetSdk = 22 } } // cannot be installed on Android 14+ devices,Critical,https://developer.android.com/about/versions/14/behavior-changes-14
Android 15 (API 35),Edge-to-Edge Enforced,Apps targeting API 35 are displayed edge-to-edge by default drawing behind status bar and navigation bar. Apps must handle window insets properly to prevent UI from being obscured by system bars.,Handle WindowInsets with Modifier.windowInsetsPadding or Scaffold contentPadding,Ignore insets; UI content hidden behind status bar and navigation bar on API 35+,Scaffold { innerPadding -> Content(Modifier.padding(innerPadding)) }; // Or: Modifier.windowInsetsPadding(WindowInsets.systemBars),// No inset handling; text and buttons hidden behind status bar and gesture navigation bar on API 35+,Critical,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),16KB Page Size Support,Apps using NDK libraries must be rebuilt to support 16KB memory page sizes. Google Play requires all apps with native code targeting Android 15 to support 16KB pages.,Rebuild native libraries with 16KB page alignment; test on 16KB devices/emulators,Ship native libraries built with 4KB page alignment only; crashes on 16KB devices,// build.gradle: android.defaultConfig.ndk.abiFilters 'arm64-v8a'; // CMake: -DCMAKE_ANDROID_PAGE_SIZE=16384,// Native libraries compiled with 4KB page size only; crash or fail to load on 16KB page devices,Critical,https://developer.android.com/guide/practices/page-sizes
Android 15 (API 35),Predictive Back Enforced,The developer option for predictive back animations is removed on API 35. System back animations (back-to-home cross-task cross-activity) are now active by default for opted-in apps.,Set enableOnBackInvokedCallback=true; use OnBackPressedCallback for custom animations,Override onBackPressed or rely on deprecated back handling,<application android:enableOnBackInvokedCallback='true'>; // Use OnBackPressedCallback for custom logic,override fun onBackPressed() {} // deprecated; breaks predictive back animation on API 35+,High,https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture
Android 15 (API 35),Private Space Support,Android 15 introduces Private Space a separate user profile for sensitive apps. Apps cannot detect if they run in Private Space. Launchers must declare ACCESS_HIDDEN_PROFILES to interact with it.,Support Private Space by using standard profile-aware APIs; handle multiple user profiles,Try to detect Private Space; assume single user profile only,// Use LauncherApps.getProfiles() for multi-profile support; declare ACCESS_HIDDEN_PROFILES for launchers,// Assume single user profile; launcher ignores Private Space apps entirely,Medium,https://developer.android.com/about/versions/15/behavior-changes-all
Android 15 (API 35),Non-SDK Interface Restrictions,Android 15 updates restricted non-SDK (hidden/internal) interface lists. Apps using blocked non-SDK methods will crash. Must migrate to public SDK alternatives.,Use only public SDK APIs; check for non-SDK usage with veridex tool,Use reflection to access hidden Android framework APIs,// Use official public APIs; run veridex scan: ./veridex --dex=app.apk,"// val method = Class.forName('android.os.SystemProperties').getMethod('get', String::class.java); method.invoke(null, 'ro.build.version') // blocked on API 35",High,https://developer.android.com/about/versions/15/changes/non-sdk-15
Android 15 (API 35),Media Projection Consent Per Session,Each MediaProjection capture session requires fresh user consent on API 35. Apps cannot reuse the Intent from createScreenCaptureIntent() across sessions. Calling createVirtualDisplay() more than once throws SecurityException.,Request fresh consent for each screen capture session via createScreenCaptureIntent(),Cache and reuse MediaProjection intent token across multiple sessions,val mediaProjectionManager = getSystemService<MediaProjectionManager>(); launcher.launch(mediaProjectionManager.createScreenCaptureIntent()) // every session,// Cache resultData from onActivityResult; reuse across sessions = SecurityException on API 35+,High,https://developer.android.com/media/grow/media-projection
Android 15 (API 35),Foreground Service dataSync 6-Hour Timeout,"dataSync foreground services are limited to 6 hours cumulative in a 24-hour period on API 35+. System calls Service.onTimeout(int, int) when limit reached. App must call stopSelf() within seconds or system throws RemoteServiceException and crashes the app.","Implement onTimeout() callback; call stopSelf() immediately; migrate long-running syncs to WorkManager or alternative job APIs",Run dataSync foreground services beyond 6 hours; ignore onTimeout callback; assume unlimited runtime,"override fun onTimeout(fgsType: Int, startId: Int) { stopSelf() // MUST stop within seconds }; // Use WorkManager for long syncs: WorkManager.getInstance(ctx).enqueue(OneTimeWorkRequestBuilder<SyncWorker>().build())","// No onTimeout implementation = RemoteServiceException crash after 6 hours; override fun onTimeout(fgsType: Int, startId: Int) { /* empty */ } // does not stop = crash",Critical,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Foreground Service mediaProcessing Type,"New mediaProcessing foreground service type for transcoding and converting media files. Subject to same 6-hour timeout as dataSync. Must implement onTimeout() and request FOREGROUND_SERVICE_MEDIA_PROCESSING permission.",Declare foregroundServiceType=mediaProcessing in manifest; implement onTimeout(); use for media transcoding only,Use dataSync type for media processing; ignore the 6-hour timeout limit,"<uses-permission android:name='android.permission.FOREGROUND_SERVICE_MEDIA_PROCESSING' />; <service android:name='.TranscodeService' android:foregroundServiceType='mediaProcessing' />","<service android:name='.TranscodeService' android:foregroundServiceType='dataSync' /> // wrong type; should use mediaProcessing",High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),BOOT_COMPLETED FGS Restrictions,"BOOT_COMPLETED broadcast receivers cannot launch dataSync camera mediaPlayback phoneCall mediaProjection or microphone foreground service types on API 35+. System throws ForegroundServiceStartNotAllowedException.",Do not start restricted FGS types from BOOT_COMPLETED; defer to user interaction or use WorkManager for background work,Start camera or dataSync foreground services from BOOT_COMPLETED receiver,"class BootReceiver : BroadcastReceiver() { override fun onReceive(ctx: Context, intent: Intent) { WorkManager.getInstance(ctx).enqueue(syncRequest) // use WorkManager instead } }","class BootReceiver : BroadcastReceiver() { override fun onReceive(ctx: Context, intent: Intent) { ctx.startForegroundService(Intent(ctx, DataSyncService::class.java)) } } // ForegroundServiceStartNotAllowedException on API 35+",Critical,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Minimum targetSdkVersion 24,"Apps with targetSdkVersion below 24 cannot be installed on Android 15+ devices. Ensures all apps support runtime permissions model from Android 6.0. Already-installed apps remain but new installs are blocked.",Ensure targetSdkVersion >= 24 (ideally latest stable API); update legacy apps to modern APIs,Keep targetSdkVersion below 24; rely on legacy permission model without runtime requests,android { defaultConfig { targetSdk = 35 } } // target latest stable API,android { defaultConfig { targetSdk = 22 } } // INSTALL_FAILED_DEPRECATED_SDK_VERSION on Android 15,Critical,https://developer.android.com/about/versions/15/behavior-changes-all
Android 15 (API 35),TLS 1.0 and 1.1 Disabled,"TLS versions 1.0 and 1.1 are disabled for apps targeting API 35+. All HTTPS connections must use TLS 1.2 or higher. Connections to servers supporting only TLS 1.0/1.1 will fail with SSLHandshakeException.",Ensure all API endpoints and servers support TLS 1.2+; update server configurations; test with network profiler,Rely on TLS 1.0/1.1 for legacy server connections; ignore SSLHandshakeException errors,// TLS 1.2+ is automatic with OkHttp and HttpURLConnection on API 35+; // Verify server: openssl s_client -connect api.example.com:443 -tls1_2,// Server only supports TLS 1.0 = SSLHandshakeException on API 35+; // Forcing TLS 1.0: sslContext.init(SSLContext.getInstance('TLSv1')) // fails,High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),String.format Stricter Validation,"String.format() and Formatter.format() now enforce stricter argument index validation on API 35+. Argument index 0 is illegal (indices start at 1). Invalid format strings throw IllegalFormatArgumentIndexException at runtime.",Audit all String.format() calls; ensure argument indices start at 1; run lint checks,"Use argument index 0 in format strings; rely on lenient formatting behavior from older Android versions","String.format('%1\$s has %2\$d items', name, count) // indices start at 1","String.format('%0\$s has %1\$d items', name, count) // IllegalFormatArgumentIndexException on API 35+",High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Arrays.asList().toArray() Type Change,"Arrays.asList(...).toArray() now returns Object[] instead of the original element type on API 35+. Casting the result to a typed array throws ClassCastException. Use toArray(T[]) overload instead.",Use toArray(new String[0]) or toArray(T[]) overload for typed arrays,Cast Arrays.asList().toArray() directly to typed array,"val elements: Array<String> = listOf('one', 'two').toArray(arrayOf<String>()) // typed overload","val elements = Arrays.asList('one', 'two').toArray() as Array<String> // ClassCastException on API 35+",High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Kotlin removeFirst/removeLast Conflict,"Android 15 adds SequencedCollection.removeFirst()/removeLast() methods that conflict with Kotlin stdlib extensions. Code compiled with compileSdk=35 calling list.removeFirst() will throw NoSuchMethodError on Android 14 and below.",Use list.removeAt(0) and list.removeAt(list.lastIndex) instead; run lint to detect the issue,Use removeFirst()/removeLast() on MutableList when minSdk < 35,"val first = list.removeAt(0); val last = list.removeAt(list.lastIndex) // works on all API levels","val first = list.removeFirst() // NoSuchMethodError on API < 35; compiles fine with compileSdk=35",High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Locale Language Code Changes,"Obsolete locale language codes are no longer auto-converted on API 35+. Hebrew 'iw' is not converted to 'he'; Yiddish 'ji' not to 'yi'; Indonesian 'in' not to 'id'. Apps using old codes may get wrong locale behavior.",Use modern ISO 639 codes directly: 'he' for Hebrew 'yi' for Yiddish 'id' for Indonesian,Use obsolete codes 'iw' 'ji' 'in' and rely on automatic conversion,"Locale('he') // Hebrew; Locale('id') // Indonesian; Locale('yi') // Yiddish","Locale('iw') // no longer converted to 'he' on API 35+; wrong locale; Locale('in') // not converted to 'id'",Medium,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),TextView Width for Complex Scripts,"Android 15 allocates more width for TextViews rendering cursive fonts and complex letter shapes to prevent clipping. New APIs useBoundsForWidth and shiftDrawingOffsetForStartOverhang control this behavior. May cause layout shifts in existing apps.",Test text rendering with cursive/complex fonts; use useBoundsForWidth=true and shiftDrawingOffsetForStartOverhang=true for proper rendering,Ignore width changes; hard-code fixed widths for text with complex scripts,textView.setUseBoundsForWidth(true); textView.setShiftDrawingOffsetForStartOverhang(true); // Or XML: android:useBoundsForWidth='true',// Hard-coded fixed width for cursive text; clipped letters on API 35+ or unexpected layout width changes,Medium,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Configuration screenWidthDp Includes System Bars,"Configuration.screenWidthDp and screenHeightDp now include system bars dimensions on API 35+. Apps using Configuration for layout calculations will get larger values than before. Use WindowMetrics for accurate layout dimensions.",Use WindowMetricsCalculator.computeCurrentWindowMetrics() for layout calculations; subtract insets explicitly,Rely on Configuration.screenWidthDp for exact content area dimensions,"val metrics = WindowMetricsCalculator.getOrCreate().computeCurrentWindowMetrics(activity); val bounds = metrics.bounds // accurate content area","val width = resources.configuration.screenWidthDp // now includes status and nav bar on API 35+; layout overflow",Medium,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Audio Focus Requires Foreground,"Apps must be the top app or running an audio-related foreground service to request audio focus on API 35+. Background audio focus requests return AUDIOFOCUS_REQUEST_FAILED.",Request audio focus only when app is visible or has mediaPlayback foreground service running,Request audio focus from background without a foreground service,startForeground(id notification FOREGROUND_SERVICE_TYPE_MEDIA_PLAYBACK); audioManager.requestAudioFocus(focusRequest) // succeeds,// Background request: audioManager.requestAudioFocus(focusRequest) // returns AUDIOFOCUS_REQUEST_FAILED on API 35+,High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Do Not Disturb Mode Changes,"Apps targeting API 35+ can no longer modify global DND state or policy. setInterruptionFilter() and setNotificationPolicy() now create implicit AutomaticZenRule instead of changing global state directly.",Use AutomaticZenRule for custom DND rules; stop relying on global DND state modification,Call setInterruptionFilter() or setNotificationPolicy() expecting global DND state change,"val rule = AutomaticZenRule.Builder('App Rule', Uri.parse('condition')).setInterruptionFilter(INTERRUPTION_FILTER_PRIORITY).build(); notificationManager.addAutomaticZenRule(rule)","notificationManager.setInterruptionFilter(INTERRUPTION_FILTER_PRIORITY) // creates implicit rule instead of global change on API 35+",Medium,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Background Activity Launch Restrictions Tightened,"PendingIntent creators can no longer grant background activity launch privileges by default on API 35+. Non-visible overlay windows cannot trigger background activity launches. Prevents malicious background-to-foreground transitions.",Use Notifications with PendingIntent for background-to-foreground navigation; use FLAG_IMMUTABLE; require user interaction,"Rely on PendingIntent background activity launch privileges; use SYSTEM_ALERT_WINDOW to launch activities from background","val pi = PendingIntent.getActivity(ctx, 0, intent, FLAG_IMMUTABLE or FLAG_UPDATE_CURRENT); notificationBuilder.setContentIntent(pi) // user taps to launch","val pi = PendingIntent.getActivity(ctx, 0, intent, FLAG_MUTABLE); // Background launch blocked on API 35+; SYSTEM_ALERT_WINDOW no longer sufficient alone",High,https://developer.android.com/about/versions/15/behavior-changes-15
Android 15 (API 35),Screen Recording Detection API,"Android 15 adds Window.addScreenRecordingCallback() to detect when the app is being screen recorded. Use to hide sensitive information during recording. Works independently of FLAG_SECURE.",Register screen recording callback to hide sensitive content during recording; combine with FLAG_SECURE for full protection,Ignore screen recording; display sensitive data during screen capture,window.addScreenRecordingCallback(mainExecutor) { state -> if (state == SCREEN_RECORDING_STATE_VISIBLE) hideSensitiveContent() else showSensitiveContent() },// No screen recording detection; sensitive data visible during screen recording and screen sharing,Medium,https://developer.android.com/about/versions/15/features#screen-recording-detection
Android 15 (API 35),Stopped State Pending Intent Cancellation,"On Android 15 the system cancels ALL pending intents when an app enters the stopped state (force-stopped). App widgets are disabled and grayed out. Pending intents must be re-registered when the app exits stopped state.",Re-register all pending intents on app restart; handle widget re-enablement on ACTION_BOOT_COMPLETED,Assume pending intents survive force-stop; forget to re-register widget update intents,"class BootReceiver : BroadcastReceiver() { override fun onReceive(ctx: Context, intent: Intent) { // Re-register all pending intents and refresh widgets AppWidgetManager.getInstance(ctx).updateAppWidget(ids, views) } }","// Assuming pending intents survive force-stop; widgets stay grayed out; alarms never fire after force-stop",Medium,https://developer.android.com/about/versions/15/behavior-changes-all
Android 16 (API 36),Edge-to-Edge No Opt-Out,Apps targeting API 36 can no longer opt out of edge-to-edge display. The windowOptOutEdgeToEdgeEnforcement attribute is deprecated and disabled. Apps MUST handle drawing behind system bars.,Use enableEdgeToEdge() and handle WindowInsets with Modifier.windowInsetsPadding or Scaffold contentPadding,Use windowOptOutEdgeToEdgeEnforcement; it is ignored on API 36+,enableEdgeToEdge(); Scaffold { innerPadding -> Content(Modifier.padding(innerPadding)) },<item name='android:windowOptOutEdgeToEdgeEnforcement'>true</item> // ignored on API 36+,Critical,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Predictive Back Mandatory,Predictive back system animations are enabled by default on API 36. onBackPressed() is no longer called and KeyEvent.KEYCODE_BACK is not dispatched for back interception. Apps must migrate to OnBackPressedCallback.,Use BackHandler composable or OnBackPressedCallback for custom back handling,Override onBackPressed() or intercept KEYCODE_BACK; no longer called on API 36+,BackHandler(enabled = hasUnsavedChanges) { showConfirmDialog = true },override fun onBackPressed() { if (hasUnsavedChanges) showDialog() } // never called on API 36+,Critical,https://developer.android.com/guide/navigation/custom-back/predictive-back-gesture
Android 16 (API 36),Adaptive Layouts Large Screens,On displays with smallest width >= 600dp (tablets foldables Chromebooks) all orientation resizability and aspect ratio manifest restrictions are ignored on API 36+. Apps fill the entire display window.,Build adaptive layouts using WindowSizeClass; support all orientations and multi-window,Lock orientation with screenOrientation=portrait or set resizableActivity=false; ignored on large screens,@Composable fun AdaptiveScreen(wsc: WindowSizeClass) { when (wsc.widthSizeClass) { Compact -> ListScreen(); else -> Row { ListPane(Modifier.weight(0.4f)); DetailPane(Modifier.weight(0.6f)) } } },<activity android:screenOrientation='portrait' android:resizableActivity='false' /> // IGNORED on >= 600dp screens,Critical,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Health Permissions Granularization,BODY_SENSORS and BODY_SENSORS_BACKGROUND are replaced by granular android.permission.health.* permissions on API 36+. Apps MUST declare a privacy policy activity or permissions will be revoked.,Replace BODY_SENSORS with specific health.READ_HEART_RATE etc; add maxSdkVersion=35 to legacy permission; declare privacy policy activity,Continue using BODY_SENSORS without granular permissions; forget privacy policy activity,<uses-permission android:name='android.permission.BODY_SENSORS' android:maxSdkVersion='35' />; <uses-permission android:name='android.permission.health.READ_HEART_RATE' />,<uses-permission android:name='android.permission.BODY_SENSORS' /> // does not work on API 36+; no privacy policy = permissions revoked,High,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Local Network Permission Preview,Apps will need NEARBY_WIFI_DEVICES permission for local network access (RFC1918 mDNS broadcast). Currently opt-in for testing but will become mandatory. Affects OkHttp Retrofit WebViews raw sockets NsdManager.,Start testing with restriction enabled; declare NEARBY_WIFI_DEVICES; handle permission denial gracefully,Ignore this change; assume local network access is always available; fail to handle EPERM errors,<uses-permission android:name='android.permission.NEARBY_WIFI_DEVICES' />; if (checkSelfPermission(NEARBY_WIFI_DEVICES) == GRANTED) connectToLocalDevice(),// Direct local network call without permission; crashes with EPERM when restriction is enforced,High,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),JobScheduler Quota Tightened,Job execution runtime quotas are enforced based on app standby bucket even when a foreground service is running. Affects JobScheduler WorkManager and DownloadManager on all apps running on Android 16.,Log stop reasons via WorkInfo.getStopReason(); use getPendingJobReasonsHistory() to diagnose; keep jobs short,Assume foreground service exempts jobs from quotas; run long background jobs without monitoring stop reasons,"override fun onStopJob(params: JobParameters): Boolean { Log.w('Jobs', 'Stopped reason: ${params.stopReason}'); return true }",startForegroundService(intent); // Jobs still get throttled on Android 16; assuming FGS prevents quota enforcement,Critical,https://developer.android.com/about/versions/16/behavior-changes-all
Android 16 (API 36),Abandoned Jobs Detection,When JobParameters is garbage collected before jobFinished() is called the system reports STOP_REASON_TIMEOUT_ABANDONED. Frequent abandoned jobs trigger system mitigation reducing job frequency.,Always maintain strong reference to JobParameters; always call jobFinished() when job completes,Let JobParameters get GC'd without calling jobFinished(); ignore abandoned stop reason,"class MyJobService : JobService() { private var params: JobParameters? = null; override fun onStartJob(p: JobParameters): Boolean { params = p; scope.launch { try { doWork() } finally { jobFinished(p, false) } }; return true } }",override fun onStartJob(params: JobParameters): Boolean { GlobalScope.launch { doWork() } // params GC'd; jobFinished never called; STOP_REASON_TIMEOUT_ABANDONED; return true },High,https://developer.android.com/about/versions/16/behavior-changes-all
Android 16 (API 36),16KB Page Size Compat Mode,Android 16 shows a compatibility dialog for apps with 4KB-aligned native code on 16KB page devices. For best performance upgrade to AGP 8.5.1+ and NDK r28+ which produce 16KB-aligned binaries by default.,Upgrade AGP and NDK; replace hardcoded 4096 with getpagesize() or sysconf(_SC_PAGESIZE); test on 16KB emulator,Hardcode PAGE_SIZE=4096 in native code; use old NDK producing 4KB-aligned binaries; ignore compatibility dialog,"size_t page = sysconf(_SC_PAGESIZE); void* p = mmap(NULL, size, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0);","#define PAGE_SIZE 4096; void* p = memalign(PAGE_SIZE, size); // fails on 16KB devices",High,https://developer.android.com/guide/practices/page-sizes
Android 16 (API 36),Safer Intents Strict Matching,New security feature: receiving apps can opt in to enforceIntentFilter matching. When enabled explicit intents must match the target intent filter and intents without an action cannot match any filter.,Opt in with intentMatchingFlags=enforceIntentFilter on receivers; test all intent flows after enabling,Send intents without an action to components with enforceIntentFilter; blindly opt out with removeLaunchSecurityProtection(),<application android:intentMatchingFlags='enforceIntentFilter'>; <receiver android:name='.MyReceiver' android:exported='true'><intent-filter><action android:name='com.example.ACTION' /></intent-filter></receiver>,"val intent = Intent(); intent.component = ComponentName('com.other', 'Receiver'); sendBroadcast(intent) // BLOCKED: no action to match filter",Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Accessibility Announcements Deprecated,announceForAccessibility() and TYPE_ANNOUNCEMENT events are deprecated on Android 16. Apps must use structured alternatives like paneTitle liveRegion or setError() instead.,Use Modifier.semantics { paneTitle } for screen changes; liveRegion for real-time updates; setError() for errors,Use announceForAccessibility() or dispatch TYPE_ANNOUNCEMENT events,"Text(text = score, modifier = Modifier.semantics { liveRegion = LiveRegionMode.Polite })",view.announceForAccessibility('Results loaded') // deprecated; inconsistent TalkBack experience,Medium,https://developer.android.com/about/versions/16/behavior-changes-all
Android 16 (API 36),Broadcast Priority Scoped to Process,android:priority on broadcast receivers no longer guarantees delivery order across different processes on Android 16. Priority ordering is only respected within the same app process.,Avoid relying on cross-process broadcast ordering; use bound services or ContentProviders for ordered IPC,Rely on android:priority to control broadcast order across different apps or processes,"// Use explicit IPC: bindService(Intent(this, OrderedService::class.java), conn, BIND_AUTO_CREATE)",<receiver android:name='.HighPriority' android:priority='999'> // no longer guarantees order across processes,Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Intent Redirection Security,Android 16 blocks potentially dangerous intent redirection for all apps. When an app launches a sub-level intent from extras of an incoming intent the system blocks unsafe launches by default.,Validate all incoming intents before launching sub-level intents; only use removeLaunchSecurityProtection() after security review,Blindly call removeLaunchSecurityProtection() on all intents; launch unvalidated sub-level intents from extras,"val sub: Intent? = intent.getParcelableExtra('sub', Intent::class.java); if (sub != null && isAllowedComponent(sub.component)) startActivity(sub)","val sub: Intent? = intent.getParcelableExtra('sub', Intent::class.java); sub?.removeLaunchSecurityProtection(); sub?.let { startActivity(it) } // blindly opted out",Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Predictive Back 3-Button Navigation,Predictive back animations now work with 3-button navigation on Android 16 via long-press on the back button. Affects all apps that have opted in to predictive back.,Test predictive back with both gesture and 3-button navigation modes,Assume predictive back only applies to gesture navigation; skip 3-button testing,// Test with: adb shell settings put secure navigation_mode 0 (3-button); long-press back to preview,// Only tested with gesture nav; broken back animation with 3-button nav on Android 16,Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Monochrome Adaptive Icon,Starting Android 16 QPR2 the system auto-generates themed icons for apps without a monochrome layer. Provide your own monochrome layer in adaptive-icon XML to control the themed appearance.,Include monochrome drawable in adaptive-icon XML for proper themed icon appearance,Skip monochrome layer and rely on auto-generated themed icon which may not match brand,<adaptive-icon><background android:drawable='@color/bg'/><foreground android:drawable='@drawable/fg'/><monochrome android:drawable='@drawable/ic_mono'/></adaptive-icon>,<adaptive-icon><background android:drawable='@color/bg'/><foreground android:drawable='@drawable/fg'/></adaptive-icon> // auto-themed icon may look wrong,Low,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Progress-Centric Notifications,"Android 16 introduces Notification.ProgressStyle for tracking user-initiated journeys like rideshare delivery and navigation. Supports visual progress bars with segments points and tracker icons replacing simple progress notifications for multi-step workflows.",Use Notification.ProgressStyle with segments and points for journey tracking; update progress frequently; include action buttons,Use basic setProgress() for multi-step user journeys; forget to update progress state frequently,"val ps = Notification.ProgressStyle().setProgress(456).setProgressTrackerIcon(Icon.createWithResource(ctx, R.drawable.ic_car)).setProgressSegments(listOf(Notification.ProgressStyle.Segment(41).setColor(Color.BLACK), Notification.ProgressStyle.Segment(552).setColor(Color.YELLOW))).setProgressPoints(listOf(Notification.ProgressStyle.Point(60).setColor(Color.RED)))","builder.setProgress(100, 45, false) // basic progress bar; no segments points or journey tracking for multi-step flows",Medium,https://developer.android.com/about/versions/16/features/progress-centric-notifications
Android 16 (API 36),elegantTextHeight Deprecated and Disabled,"The elegantTextHeight TextView attribute is deprecated and disabled on API 36+. Apps targeting API 36 will always use the new default text metrics for Arabic Lao Myanmar Tamil Gujarati Kannada Malayalam Odia Telugu and Thai scripts.",Remove all elegantTextHeight attribute usage; test layouts with non-Latin scripts; adjust padding/margins as needed,Set elegantTextHeight=false expecting compact text height; it is ignored on API 36+,"<TextView android:layout_height='wrap_content' android:text='@string/arabic_text' /> // uses default metrics on API 36+; adjust padding if needed","<TextView android:elegantTextHeight='false' android:text='@string/arabic_text' /> // attribute ignored on API 36+; layout may shift unexpectedly",Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),ScheduledExecutorService Fixed Rate Change,"scheduleAtFixedRate() behavior changed: previously all missed executions ran immediately when app returned to valid lifecycle. Now only ONE missed execution runs immediately. Affects timing-sensitive periodic tasks.",Test periodic task execution timing; do not rely on catching up all missed executions; use AlarmManager or WorkManager for critical periodic work,Assume all missed periodic executions will run immediately when app resumes,"val executor = ScheduledThreadPoolExecutor(1); executor.scheduleAtFixedRate({ syncData() }, 0, 5, TimeUnit.MINUTES) // at most 1 missed run on resume","// Relying on all 12 missed 5-minute executions running immediately on resume = only 1 runs on API 36+",Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),ART Internal Structure Changes,"Apps and libraries relying on internal ART structures may break on Android 16+ via Google Play System updates. Affects Android 12+ devices. Libraries using non-SDK ART interfaces may crash or behave unexpectedly.",Test thoroughly on Android 16; avoid non-SDK interfaces; use only public APIs; check known impacted libraries list; file bugs for missing public APIs,Use reflection to access internal ART structures; depend on undocumented class layouts or method signatures,// Use only public APIs: val runtime = Runtime.getRuntime(); runtime.gc() // public API,"// val artMethod = Class.forName('java.lang.reflect.ArtMethod'); // Non-SDK interface; may crash on Android 16+",High,https://developer.android.com/about/versions/16/behavior-changes-all
Android 16 (API 36),MediaStore Version Per-App Uniqueness,"MediaStore.getVersion() now returns unique values per app on API 36+ to prevent device fingerprinting. Apps cannot parse or compare version strings across apps. Use only for local cache invalidation.",Use MediaStore.getVersion() only for cache invalidation within your app; do not parse or assume format,Parse MediaStore version string for device identification; compare versions across different apps,"val version = MediaStore.getVersion(context); if (version != cachedVersion) { cachedVersion = version; invalidateMediaCache() }","val parts = MediaStore.getVersion(context).split('_'); val deviceId = parts[0] // parsing fails on API 36+; unique per app",Medium,https://developer.android.com/about/versions/16/behavior-changes-16
Android 16 (API 36),Health Connect Activity Intensity,"Android 16 Health Connect adds ACTIVITY_INTENSITY data type based on WHO-defined moderate/vigorous activity levels. Also introduces medical records support with FHIR format requiring explicit user consent.",Integrate ACTIVITY_INTENSITY for fitness tracking; implement FHIR medical records with proper consent flows,Ignore new Health Connect data types; skip user consent for medical records access,"// Read activity intensity: val request = ReadRecordsRequest(ActivityIntensity::class, timeRangeFilter); healthConnectClient.readRecords(request)","// Only using legacy step/heart rate data; missing WHO-standard activity intensity classification",Low,https://developer.android.com/about/versions/16/features
Android 16 (API 36),Camera Hybrid Auto-Exposure,"Android 16 adds hybrid AE priority modes for manual control of ISO sensitivity or exposure time while keeping other parameters automatic. Enables professional-grade exposure control in camera apps.",Check CONTROL_AE_AVAILABLE_PRIORITY_MODES; use SENSOR_SENSITIVITY_PRIORITY for ISO control or SENSOR_EXPOSURE_TIME_PRIORITY for shutter speed,Use only full manual or full auto exposure; miss the hybrid middle ground for pro users,"reqBuilder.set(CaptureRequest.CONTROL_AE_MODE, CameraMetadata.CONTROL_AE_MODE_ON); reqBuilder.set(CaptureRequest.CONTROL_AE_PRIORITY_MODE, CameraMetadata.CONTROL_AE_PRIORITY_MODE_SENSOR_SENSITIVITY_PRIORITY); reqBuilder.set(CaptureRequest.SENSOR_SENSITIVITY, 400)","// Only full auto: reqBuilder.set(CaptureRequest.CONTROL_AE_MODE, CONTROL_AE_MODE_ON) // no ISO/shutter priority for pro users",Low,https://developer.android.com/about/versions/16/features
Android 16 (API 36),Photo Picker App-Owned Pre-Selection,"On API 36+ the photo picker pre-selects photos owned by the requesting app. Users see their previously-captured photos pre-selected when granting photo/video access. Minimal code changes needed.",Update privacy policy to explain app-owned photo access; test photo picker flow with pre-selection behavior,Assume all photos start unselected; confuse users about pre-selection behavior,"val pickMedia = registerForActivityResult(PickVisualMedia()) { uri -> uri?.let { processPhoto(it) } }; pickMedia.launch(PickVisualMediaRequest(ImageOnly)) // pre-selection automatic on API 36+","// No photo picker usage; requesting READ_MEDIA_IMAGES directly without considering pre-selection UX",Low,https://developer.android.com/about/versions/16/behavior-changes-16
Performance,Remember for Expensive Calculations,Composable functions can recompose very frequently (every animation frame). Store expensive calculation results with remember to avoid recalculating on every recomposition. Use keys with remember to recalculate only when dependencies change.,Cache expensive calculations using remember with dependency keys,Perform expensive calculations directly in composable body,"val sortedList = remember(items, sortBy) { items.sortedBy { sortBy(it) } }; LazyColumn { items(sortedList, key = { it.id }) { ItemCard(it) } }",LazyColumn { items(items.sortedBy { sortBy(it) }) { ItemCard(it) } } // sorts on every recomposition,High,https://developer.android.com/develop/ui/compose/performance/bestpractices
Performance,DerivedStateOf Optimization,Use derivedStateOf when you want to observe a computed value from other state but only recompose when the computation result changes. This prevents recomposition when intermediate state changes rapidly but the derived result stays the same (e.g. scroll position changes every pixel but 'show button' is boolean).,Wrap frequently-changing state computations in derivedStateOf to reduce recompositions,Read rapidly-changing state directly causing excessive recomposition,val showButton by remember { derivedStateOf { listState.firstVisibleItemIndex > 0 } }; AnimatedVisibility(visible = showButton) { ScrollToTopButton() },val showButton = listState.firstVisibleItemIndex > 0; AnimatedVisibility(visible = showButton) { ScrollToTopButton() } // recomposes on every scroll pixel,High,https://developer.android.com/develop/ui/compose/performance/bestpractices
Performance,Defer State Reads with Lambdas,Pass state as lambdas to child composables instead of reading state values directly in parent scope. This defers the state read until it's actually needed narrowing the recomposition scope. For layout-only operations use Modifier.offset { } lambda variant to skip recomposition entirely.,Pass state as lambda parameters to narrow recomposition scope,Read state in parent causing wide recomposition,"@Composable fun Title(scrollProvider: () -> Int) { Column(Modifier.offset { IntOffset(x = 0, y = scrollProvider()) }) { /* content */ } }",@Composable fun Title(scrollValue: Int) { Column(Modifier.offset(y = scrollValue.dp)) { /* content */ } } // parent recomposes on every scroll,Medium,https://developer.android.com/develop/ui/compose/performance/bestpractices
Startup,Baseline Profiles Production Setup,Baseline Profiles improve startup by 30% and navigation smoothness from first launch. Use Macrobenchmark to generate profiles covering critical user journeys. Deploy profiles with release builds via the baseline-prof.txt file in src/main. Profiles are ahead-of-time compiled by Play Store on device installation.,Generate baseline profiles using Macrobenchmark; deploy with release builds; include critical user journeys,Ship app without baseline profiles; only profile development builds; skip common navigation paths,"// In benchmark module: @Test fun generateBaselineProfile() = macrobenchmarkWithStartupMode(packageName = 'com.app', StartupMode.COLD, iterations = 3) { pressHome(); startActivityAndWait(); device.findObject(By.text('Settings')).click(); device.wait(Until.hasObject(By.text('Profile')), 5000) }; // baseline-prof.txt auto-generated in src/main",// No Baseline Profile - app relies only on JIT causing slower first launch and navigation,High,https://developer.android.com/topic/performance/baselineprofiles/overview
Startup,App Startup Library Integration,The App Startup library consolidates component initialization into a single ContentProvider reducing startup overhead. Migrate from auto-initializing ContentProviders to Initializer components with explicit dependency ordering. Use WorkManager.Configuration.Provider interface for on-demand initialization pattern.,Implement Initializer<T> with dependencies(); share InitializationProvider; lazy-init non-critical components,Keep multiple auto-init ContentProviders; no dependency management; initialize everything eagerly,class LoggerInitializer : Initializer<Logger> { override fun create(context: Context) = Logger.getInstance(context); override fun dependencies() = emptyList<Class<out Initializer<*>>>() }; class AnalyticsInitializer : Initializer<Analytics> { override fun dependencies() = listOf(LoggerInitializer::class.java) }; // In AndroidManifest: <provider android:name='androidx.startup.InitializationProvider' tools:node='merge'><meta-data android:name='com.app.LoggerInitializer' android:value='androidx.startup' /></provider>,<provider android:name='com.logger.LoggerProvider' /> <provider android:name='com.analytics.AnalyticsProvider' /> <provider android:name='com.crashlytics.CrashlyticsProvider' /> // 3 separate providers slow startup,High,https://developer.android.com/topic/libraries/app-startup
Startup,WorkManager Lazy Initialization,Disable WorkManager auto-initialization by removing the default provider and implementing Configuration.Provider for on-demand initialization. Call WorkManager.initialize() only when scheduling first work reducing cold start time when WorkManager isn't immediately needed.,Implement Configuration.Provider; remove default initializer; call initialize() on-demand,Let WorkManager auto-initialize on every app start via default ContentProvider,"// In AndroidManifest: <provider android:name='androidx.work.impl.WorkManagerInitializer' tools:node='remove' />; // In Application: class App : Application(), Configuration.Provider { override val workManagerConfiguration get() = Configuration.Builder().setMinimumLoggingLevel(Log.INFO).build() }; // Initialize on-demand: fun scheduleWork() { WorkManager.getInstance(context).enqueue(request) }",// WorkManager auto-inits on startup even if no work scheduled - wasted time and memory,Medium,https://developer.android.com/topic/libraries/architecture/workmanager/advanced/custom-configuration
Startup,ViewStub for Deferred UI,ViewStub is a zero-size placeholder for lazily inflating complex view hierarchies after initial frame. Use for infrequently shown UI like error states empty views or premium features. In Compose use conditional state-based rendering with LaunchedEffect to defer expensive composables.,Defer rare UI with ViewStub; inflate only when needed; use state conditions in Compose,Inflate entire view hierarchy upfront including rarely-shown UI,// XML: <ViewStub android:id='@+id/error_stub' android:layout='@layout/error_view' android:inflatedId='@+id/error_view' />; // Kotlin: val stub: ViewStub = findViewById(R.id.error_stub); if (hasError) { val errorView = stub.inflate() }; // Compose: var showError by remember { mutableStateOf(false) }; if (showError) { ErrorView() } // only compose when needed,<include layout='@layout/error_view' android:visibility='gone' /> // still inflated on startup wasting time,Medium,https://developer.android.com/topic/performance/appstartup/best-practices
Startup,Performance Class API for Media,Android 12+ PerformanceClass API identifies devices meeting performance thresholds (PerformanceClass.MEDIA_PERFORMANCE_CLASS). Use to adapt media quality resolution and features based on device capabilities. Check Build.VERSION.MEDIA_PERFORMANCE_CLASS to deliver optimal experience without degrading on lower-tier devices.,Check MEDIA_PERFORMANCE_CLASS; adjust video quality and features; gracefully degrade on older devices,Assume all devices handle max quality; ignore device performance tier,if (Build.VERSION.SDK_INT >= 31) { when { Build.VERSION.MEDIA_PERFORMANCE_CLASS >= 33 -> enableHighQuality() // 4K 60fps; Build.VERSION.MEDIA_PERFORMANCE_CLASS >= 31 -> enableMediumQuality() // 1080p 60fps; else -> enableBasicQuality() // 720p 30fps } },// Always load 4K assets regardless of device causing jank and crashes on low-end devices,Medium,https://developer.android.com/about/versions/12/features/performance-class
Security,Android 16 Advanced Protection Mode,Android 16 Advanced Protection Mode provides comprehensive security shield integrating verified boot strong sandboxing memory tagging USB lockdown and automatic device rebooting. When enabled prevents deactivation of core security features blocks sideloading filters spam/scam texts restricts insecure 2G connections and tightens Chrome protections. Comparable to Apple Lockdown Mode for high-risk users.,Enable Advanced Protection Mode in Settings  Security for users needing maximum security; educate users about trade-offs,Ignore Advanced Protection Mode; not recommend to high-risk users like journalists activists executives,Settings.ACTION_ADVANCED_PROTECTION_SETTINGS; // Guide users: Settings  Security  Advanced Protection  Enable all modules,// No Advanced Protection guidance - high-risk users vulnerable to targeted attacks,High,https://developer.android.com/about/versions/16/features/advanced-protection
Security,Android 16 Identity Check,Identity Check (biometric gating) requires biometric authentication for sensitive operations when device is outside trusted locations. Automatically prompts for fingerprint or face scan instead of PIN when changing device PIN turning off theft protection or accessing Google account settings outside home/work. Protects against shoulder surfing and coercion attacks.,Leverage Identity Check for high-security flows; inform users to enable in Settings  Security  Identity Check,Rely only on PIN/password without location-aware biometric gating,// User setting: Settings  Security  Identity Check  Enable; Add trusted locations; // Android automatically enforces biometric prompt for sensitive actions outside trusted zones,// No Identity Check - PIN vulnerable to shoulder surfing when user outside home,High,https://developer.android.com/privacy-and-security/identity-check
Security,Android 16 OTP Shield,Android 16 OTP Shield (Notification Privacy) intelligently redacts sensitive information like one-time passwords from lock screen notifications in higher-risk scenarios. Prevents OTP exposure even if user configured settings to show sensitive content on lock screen ensuring privacy when phone might be in unfamiliar hands or locations.,Trust Android 16 OTP Shield automatic protection; no app changes needed; test notification privacy in various risk scenarios,Display OTPs in full notification content regardless of device state,// Android 16+ automatically redacts OTPs on lock screen in high-risk contexts; // In NotificationCompat.Builder: setCategory(CATEGORY_MESSAGE).setVisibility(VISIBILITY_PRIVATE),NotificationCompat.Builder().setVisibility(VISIBILITY_PUBLIC).setContentText('Your code: 123456') // always visible on lock screen,Medium,https://developer.android.com/about/versions/16/features/notification-privacy
Security,Biometric Authentication Best Practices,Biometric authentication provides secure convenient user verification. Use BIOMETRIC_STRONG (Class 3 biometrics with hardware security) for sensitive operations like payments account changes. BIOMETRIC_WEAK (Class 2) acceptable for app unlock convenience features. Always provide fallback authentication method. BiometricPrompt API replaces deprecated FingerprintManager since Android 9.,Implement BiometricPrompt with BIOMETRIC_STRONG for sensitive operations; set deviceCredential fallback; handle authentication errors gracefully,Use deprecated FingerprintManager; use BIOMETRIC_WEAK for payments; no fallback method,"val promptInfo = BiometricPrompt.PromptInfo.Builder().setTitle('Authenticate').setAllowedAuthenticators(BIOMETRIC_STRONG or DEVICE_CREDENTIAL).build(); BiometricPrompt(activity, executor, object : AuthenticationCallback() { override fun onAuthenticationSucceeded(result: AuthenticationResult) { /* proceed */ } }).authenticate(promptInfo)",@Deprecated FingerprintManager.authenticate() // deprecated since API 28; no fallback,High,https://developer.android.com/training/sign-in/biometric-auth
Security,Android Keystore Cryptographic Keys,Android Keystore system provides hardware-backed secure storage for cryptographic keys making them difficult to extract from device. Keys can be configured to require user authentication be time-limited or bound to specific purposes (encrypt/decrypt sign/verify). Use for API keys encryption keys signing keys OAuth tokens. Supports AES RSA EC algorithms.,Generate keys in Keystore with setUserAuthenticationRequired(); use for all sensitive cryptographic operations; leverage StrongBox on supported devices,Store encryption keys in code SharedPreferences or app-private files; hardcode API keys in BuildConfig,"val keyGenParameterSpec = KeyGenParameterSpec.Builder('myKey', PURPOSE_ENCRYPT or PURPOSE_DECRYPT).setBlockModes(BLOCK_MODE_GCM).setEncryptionPaddings(ENCRYPTION_PADDING_NONE).setUserAuthenticationRequired(true).setUserAuthenticationValidityDurationSeconds(30).build(); KeyGenerator.getInstance(AES, 'AndroidKeyStore').init(keyGenParameterSpec)",const val API_KEY = 'sk_live_hardcoded_key_123' // hardcoded in code easily extracted,Critical,https://developer.android.com/privacy-and-security/keystore
Security,Network Security Configuration,Network Security Config (network_security_config.xml) provides declarative TLS/SSL configuration without code changes. Configure cleartext traffic policies certificate pinning custom trust anchors debug overrides per-domain settings. Enforced at framework level preventing accidental insecure connections. Android 9+ blocks cleartext by default for targetSdk 28+.,Create res/xml/network_security_config.xml with base-config and domain-specific rules; reference in AndroidManifest; pin production certificates; use debug-overrides for development,Implement custom TrustManager accepting all certificates; ignore certificate validation errors; use android:usesCleartextTraffic='true',<!-- res/xml/network_security_config.xml --><network-security-config><base-config cleartextTrafficPermitted='false'><trust-anchors><certificates src='system'/></trust-anchors></base-config><domain-config><domain includeSubdomains='true'>api.example.com</domain><pin-set expiration='2027-01-01'><pin digest='SHA-256'>base64hash==</pin><pin digest='SHA-256'>backup_hash==</pin></pin-set></domain-config></network-security-config>,"val trustAllCerts = arrayOf<TrustManager>(object : X509TrustManager { override fun checkClientTrusted(chain: Array<X509Certificate>, authType: String) {} override fun checkServerTrusted(chain: Array<X509Certificate>, authType: String) {} override fun getAcceptedIssuers() = arrayOf<X509Certificate>() }) // DANGEROUS",Critical,https://developer.android.com/privacy-and-security/security-config
Security,Certificate Pinning Implementation,Certificate pinning prevents man-in-the-middle attacks by validating server certificates against known good values. Pin leaf certificate (rotates more frequently) or intermediate/root CA certificate (more stable). Include backup pins for certificate rotation. Monitor pin expiration dates. Use Network Security Config (recommended) or OkHttp CertificatePinner.,Pin certificates in network_security_config.xml; include backup pins; set expiration dates; test with production certificates in staging,Skip certificate pinning; pin only in production not staging; no backup pins; hardcode pins in code,"<!-- Recommended: Network Security Config --><domain-config><domain>api.bank.com</domain><pin-set expiration='2027-06-01'><pin digest='SHA-256'>primary_cert_hash==</pin><pin digest='SHA-256'>backup_cert_hash==</pin></pin-set></domain-config>; // Alternative: OkHttp; val pinner = CertificatePinner.Builder().add('api.bank.com', 'sha256/hash==').build()",// No certificate pinning - vulnerable to MITM attacks with rogue certificates,Critical,https://developer.android.com/privacy-and-security/security-config#CertificatePinning
Security,Play Integrity API Integration,Play Integrity API helps detect app tampering repackaging emulator environments rooted devices. Provides three verdicts: MEETS_DEVICE_INTEGRITY (genuine Google Play device) MEETS_BASIC_INTEGRITY (passes basic integrity checks) MEETS_STRONG_INTEGRITY (strongest assurance). Use server-side to validate token before allowing sensitive operations. Replaces deprecated SafetyNet Attestation API.,Request integrity token before sensitive operations; validate server-side; check device integrity verdict; handle PLAY_STORE_VERSION_UNKNOWN gracefully; rate limit requests,Skip integrity checks; validate client-side; use deprecated SafetyNet; no rate limiting,// Request token: IntegrityManagerFactory.create(context).requestIntegrityToken(IntegrityTokenRequest.builder().setCloudProjectNumber(projectId).build()).addOnSuccessListener { response -> sendToServer(response.token()) }; // Server-side validation: POST https://playintegrity.googleapis.com/v1/projects/{projectId}/apps:checkIntegrity with token; verify deviceIntegrity verdict,// No integrity check - modified APKs tampered apps can access backend APIs,High,https://developer.android.com/google/play/integrity
Security,Android 16 Private Space,Android 16 Private Space creates sandboxed environment for sensitive apps (banking health identity management). Apps in Private Space are invisible to rest of OS show no lock screen notifications require separate authentication cannot be accessed by other apps. Separate app data settings profiles. User can quickly lock/unlock Private Space via Settings or quick tile.,Recommend users enable Private Space for sensitive apps in Settings  Security  Private Space; guide users to move banking/health apps into Private Space,Assume all apps have same security context; no guidance on isolating sensitive apps,// User setup: Settings  Security  Private Space  Set up; Move sensitive apps; Set separate unlock; // No code changes needed; Android handles isolation automatically; // Quick lock: Swipe down  Private Space tile  Lock,// No Private Space usage - banking app accessible from any app via intent; notifications visible on lock screen,Medium,https://developer.android.com/about/versions/16/features/private-space
Security,Intent Security Best Practices,Intent security critical for preventing data leaks and hijacking attacks. Use explicit intents (specify component class) for intra-app communication. For exported components validate incoming intent data check caller identity use permissions. PendingIntents must use FLAG_IMMUTABLE (required Android 12+) specify explicit component. Avoid Intent redirection vulnerabilities by sanitizing extras before forwarding.,Use explicit intents for app components; validate all intent extras; set android:exported='false' by default; use FLAG_IMMUTABLE for PendingIntents; define custom permissions for sensitive components,Use implicit intents everywhere; trust intent data without validation; use FLAG_MUTABLE; export all components; forward intents without sanitization,"// Explicit intent: Intent(context, TargetActivity::class.java); // PendingIntent: PendingIntent.getActivity(context, 0, intent, FLAG_IMMUTABLE or FLAG_UPDATE_CURRENT); // Validate extras: val userId = intent.getStringExtra('user_id')?.takeIf { it.matches(Regex('[0-9]+')) } ?: return; // Manifest: <activity android:name='.SecureActivity' android:exported='false' />",// Implicit intent: Intent('com.example.ACTION_VIEW'); // PendingIntent: FLAG_MUTABLE // DANGEROUS; // No validation: val data = intent.getStringExtra('data'); startActivity(Intent(data)) // Intent redirection vulnerability,Critical,https://developer.android.com/privacy-and-security/risks/pending-intent
Security,WebView Security Configuration,WebView can expose apps to web vulnerabilities if misconfigured. Disable JavaScript unless absolutely required. Disable file access (setAllowFileAccess setAllowFileAccessFromFileURLs setAllowUniversalAccessFromFileURLs) to prevent local file inclusion attacks. Only use addJavascriptInterface with @JavascriptInterface annotation on API 17+ and load only trusted HTTPS content. Enable Safe Browsing.,Disable JavaScript by default; disable all file access methods; use @JavascriptInterface annotation; load only HTTPS trusted content; enable Safe Browsing,Enable JavaScript for all content; allow file access; expose native methods without @JavascriptInterface; load HTTP or untrusted content,"webView.settings.apply { javaScriptEnabled = false; allowFileAccess = false; allowFileAccessFromFileURLs = false; allowUniversalAccessFromFileURLs = false; safeBrowsingEnabled = true }; // Only for trusted content: class SecureBridge { @JavascriptInterface fun safeMethod() { } }; webView.addJavascriptInterface(SecureBridge(), 'bridge')","webView.settings.javaScriptEnabled = true; webView.settings.allowFileAccess = true; // File XSS vulnerability; webView.addJavascriptInterface(AppAPI(), 'api') // All public methods exposed",Critical,https://developer.android.com/privacy-and-security/risks/webview-unsafe-file-inclusion
Security,Tapjacking Prevention,Tapjacking (clickjacking for Android) tricks users into clicking hidden UI elements via overlay attacks. Use FLAG_SECURE to prevent screen recording and overlays on sensitive screens. Use filterTouchesWhenObscured to ignore touches when window is obscured. Set setObscuredTouchesFilter on sensitive views. Require SYSTEM_ALERT_WINDOW permission checks for overlays.,Use FLAG_SECURE for payment/auth screens; set filterTouchesWhenObscured on sensitive buttons; check for overlay permissions before sensitive operations,No overlay protection; allow touches when obscured; no FLAG_SECURE on sensitive screens,"// In Activity onCreate: window.setFlags(WindowManager.LayoutParams.FLAG_SECURE, WindowManager.LayoutParams.FLAG_SECURE); // For sensitive buttons: confirmButton.filterTouchesWhenObscured = true; // Or in XML: android:filterTouchesWhenObscured='true'; // Check for overlays: if (Settings.canDrawOverlays(context)) { showOverlayWarning() }",// No protection - overlay can hijack payment confirmation clicks; // Sensitive screens can be recorded,High,https://developer.android.com/privacy-and-security/risks/tapjacking
Security,Logging Security Best Practices,Logging sensitive data exposes PII credentials tokens to logcat which can be read by apps with READ_LOGS permission on some devices. Never log sensitive data. Use BuildConfig.DEBUG conditional logging for debug statements. Configure R8/ProGuard to strip all debug and verbose logs from release builds using -assumenosideeffects. Use internal storage for production logs if needed not logcat.,Wrap logs in BuildConfig.DEBUG; configure R8 to strip logs; never log PII passwords tokens API keys; use internal storage for production logs,Log sensitive data unconditionally; no R8 log stripping; log to logcat in production,"if (BuildConfig.DEBUG) { Log.d(TAG, 'Debug: $nonSensitiveData') }; // In proguard-rules.pro: -assumenosideeffects class android.util.Log { public static *** d(...); public static *** v(...); public static *** i(...); }; // Production logging: writeToInternalLog(sanitizedData)","Log.d(TAG, 'User token: $authToken'); Log.d(TAG, 'Password: $password'); // Always logs to logcat even in production",Critical,https://developer.android.com/privacy-and-security/risks/log-info-disclosure
Security,Backup Security,Android automatic backup can expose sensitive data via ADB or cloud backup. Use android:allowBackup='false' to disable or android:fullBackupContent to specify backup rules excluding sensitive files (databases tokens keys cache). Data backup rules use include/exclude tags. Mark sensitive activities with android:excludeFromRecents. Private Space provides additional backup isolation.,Set android:allowBackup='false' or create backup rules excluding sensitive data; use excludeFromRecents for sensitive activities; leverage Private Space,Allow full backup without restrictions; include sensitive databases tokens in backup; no excludeFromRecents,<!-- AndroidManifest.xml --> <application android:allowBackup='true' android:fullBackupContent='@xml/backup_rules'>; <!-- res/xml/backup_rules.xml --> <full-backup-content><exclude domain='database' path='sensitive.db'/><exclude domain='sharedpref' path='auth_prefs.xml'/><exclude domain='file' path='keys/'/></full-backup-content>; <!-- For highly sensitive apps --> <application android:allowBackup='false'>,<application android:allowBackup='true'> <!-- Everything backed up including tokens passwords databases,High,https://developer.android.com/identity/data/backup
Security,Clipboard Security,Clipboard data is accessible to all apps when device is unlocked exposing sensitive data like passwords tokens OTPs. Use ClipData.newPlainText with setSensitiveContent(true) on Android 13+ to prevent clipboard preview and cross-device sync. Clear clipboard after paste. Avoid auto-copying sensitive data. Monitor clipboard for data leakage.,Use setSensitiveContent(true) for sensitive clipboard data; clear clipboard after paste; avoid auto-copying passwords OTPs,Copy sensitive data to clipboard without restrictions; never clear clipboard; show full preview,"// Android 13+ sensitive clipboard: val clip = ClipData.newPlainText('password', sensitiveData).apply { description.extras = PersistableBundle().apply { putBoolean(ClipDescription.EXTRA_IS_SENSITIVE, true) } }; clipboardManager.setPrimaryClip(clip); // Clear after use: Handler(Looper.getMainLooper()).postDelayed({ clipboardManager.clearPrimaryClip() }, 30000)","clipboardManager.setPrimaryClip(ClipData.newPlainText('label', password)) // Visible in preview; syncs to other devices",Medium,https://developer.android.com/develop/ui/views/touch-and-input/copy-paste
Security,Screen Capture Prevention,WindowManager.LayoutParams.FLAG_SECURE prevents screenshots screen recording and display in recent apps for sensitive content. Essential for payment screens authentication banking health apps. Note: FLAG_SECURE doesn't work in accessibility services or rooted devices. Combine with root detection for comprehensive protection.,Use FLAG_SECURE for sensitive screens (payment auth banking); combine with root detection; inform users why screenshots disabled,No screen capture prevention; allow screenshots of sensitive data; visible in recent apps,"// In Activity or Fragment: override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState); window.setFlags(WindowManager.LayoutParams.FLAG_SECURE, WindowManager.LayoutParams.FLAG_SECURE) }; // Or in Application for all activities: registerActivityLifecycleCallbacks(object : ActivityLifecycleCallbacks { override fun onActivityCreated(activity: Activity, bundle: Bundle?) { activity.window.setFlags(FLAG_SECURE, FLAG_SECURE) } })",// No FLAG_SECURE - users can screenshot passwords; payment info visible in recent apps; screen can be recorded,High,https://developer.android.com/privacy-and-security/risks
Security,Deep Link Validation,Deep links (Intent filters App Links) can be exploited if parameters aren't validated. Attackers can craft malicious URIs to trigger unintended actions inject data or access unauthorized content. Validate all URI parameters against whitelist regex. Verify host and scheme. Don't trust deep link data for sensitive operations without authentication. Use App Links (https scheme) with Digital Asset Links for verified domains.,Validate all URI parameters with regex whitelist; verify host and scheme; require authentication for sensitive deep link actions; use verified App Links,Trust all deep link parameters; no validation; allow any host; perform sensitive actions from unverified deep links,"// Validate deep link: val uri = intent.data ?: return; if (uri.scheme != 'https' || uri.host != 'myapp.com') { finish(); return }; val itemId = uri.getQueryParameter('id')?.takeIf { it.matches(Regex('^[a-zA-Z0-9]{1,20}$')) } ?: run { finish(); return }; // Verify domain with App Links: <intent-filter android:autoVerify='true'><data android:scheme='https' android:host='myapp.com' /></intent-filter>",val uri = intent.data; val action = uri.getQueryParameter('action'); executeAction(action) // Can execute arbitrary malicious actions,Critical,https://developer.android.com/privacy-and-security/risks/unsafe-use-of-deeplinks
Security,SQL Injection Prevention Best Practices,SQL injection occurs when user input is concatenated into SQL queries allowing attackers to execute arbitrary SQL. Always use parameterized queries with Room @Query or SQLiteDatabase query() methods with selectionArgs. Never use rawQuery with string concatenation. Validate input before queries. Use ContentProvider with proper URI validation. Room compile-time verification prevents most SQL injection.,Use Room @Query with parameters; use query() with selectionArgs; validate inputs; never concatenate user input into SQL,Use rawQuery with string concatenation; concatenate user input into WHERE clauses; no input validation,"// Room (recommended): @Query('SELECT * FROM users WHERE email = :email AND active = :active') fun findUser(email: String, active: Boolean): User?; // SQLiteDatabase: val cursor = db.query('users', null, 'email = ? AND active = ?', arrayOf(email, active.toString()), null); // Input validation: val safeInput = input.takeIf { it.matches(Regex('^[a-zA-Z0-9@._-]+$')) } ?: throw IllegalArgumentException()",db.rawQuery('SELECT * FROM users WHERE email = $userInput') // Attacker can input: admin@example.com' OR '1'='1,Critical,https://developer.android.com/training/data-storage/room/accessing-data
Security,Google Play Data Safety Declaration,As of 2026 Google Play requires all apps to accurately complete the Data Safety form disclosing data collection sharing and security practices. Developers must declare data handled by third-party libraries/SDKs. Update declarations when data practices change. Failure to accurately disclose leads to app rejection or removal. Use Play Console Data Safety section to declare: data types collected purposes sharing practices retention encryption.,Accurately complete Data Safety form; declare all data collection including third-party SDKs; update when practices change; review before each release,Skip Data Safety declaration; incomplete or inaccurate information; don't declare SDK data collection; never update,// Review all dependencies' privacy policies: dependencies.forEach { reviewPrivacyPolicy(it) }; // Data Safety checklist: Location: Collected for maps analytics? User Data: Email name collected? Shared with third parties? Encrypted in transit/at rest? // Update in Play Console before every release; // Document SDK data practices in internal privacy audit,No Data Safety form or incomplete declaration; SDK data collection not disclosed,Critical,https://support.google.com/googleplay/android-developer/answer/10787469
Security,Photo/Video Permission Declaration,Google Play 2026 policy requires apps requesting READ_MEDIA_IMAGES or READ_MEDIA_VIDEO to submit declaration form justifying use. Apps must demonstrate these permissions are core to app functionality or remove them. Alternatives: use photo picker (no permission needed) request specific media types only use scoped storage. Apps without valid justification will be rejected.,Use photo picker API when possible; justify READ_MEDIA permissions with declaration form; request only necessary media types; consider scoped storage,Request broad photo/video permissions without justification; no declaration form; collect all media files unnecessarily,// Recommended: Photo Picker (no permission): val pickMedia = registerForActivityResult(PickVisualMedia()) { uri -> processPhoto(uri) }; pickMedia.launch(PickVisualMediaRequest(ImageOnly)); // If READ_MEDIA needed justify in Play Console declaration: 'Photo editing app requires access to modify user photos'; // Or scoped storage: MediaStore for specific files,Requesting READ_MEDIA_IMAGES/VIDEO without declaration form or valid core functionality justification,High,https://support.google.com/googleplay/android-developer/answer/14115180
Security,Accessibility API Restrictions,Google Play 2026 explicitly prohibits using Accessibility API for autonomous actions that change settings or circumvent privacy controls without user knowledge. Apps using AccessibilityService must have clear disability-related purpose. Misuse leads to immediate removal. Valid uses: screen readers navigation aids switch access. Invalid: automation ad clicking data harvesting bypassing security.,Use Accessibility API only for legitimate disability assistance; clear user disclosure; avoid autonomous actions changing settings,Misuse Accessibility API for automation ad clicking or bypassing security; no disclosure; background autonomous actions,// Valid use: class ScreenReaderService : AccessibilityService() { override fun onAccessibilityEvent(event: AccessibilityEvent) { announceForAccessibility(event.contentDescription) } }; // Manifest disclosure: \u003cservice android:name='.ScreenReaderService' android:permission='android.permission.BIND_ACCESSIBILITY_SERVICE'\u003e\u003cmeta-data android:name='android.accessibilityservice' android:resource='@xml/accessibility_service_config' /\u003e\u003c/service\u003e,Using AccessibilityService to: auto-click ads; harvest data from other apps; change system settings without permission; bypass security prompts,Critical,https://support.google.com/googleplay/android-developer/answer/13820226
Security,In-App Update Security,Google Play in-app updates allow seamless updates without leaving the app. Implement with AppUpdateManager using flexible or immediate modes. Validate update availability with Play Core library. Security: updates are signed and verified by Play Store encrypted in transit user must approve. Handle update failures gracefully. Test with internal testing track. Priority: high priority for critical security patches.,Use AppUpdateManager for in-app updates; handle flexible and immediate modes; prioritize security patches; test thoroughly; handle failures gracefully,No in-app update mechanism; force users to manual updates; no update priority for security fixes; untested update flow,"// Add dependency: implementation 'com.google.android.play:app-update:2.1.0'; val appUpdateManager = AppUpdateManagerFactory.create(context); appUpdateManager.appUpdateInfo.addOnSuccessListener { info -> if (info.updateAvailability() == UpdateAvailability.UPDATE_AVAILABLE && info.isUpdateTypeAllowed(AppUpdateType.IMMEDIATE)) { appUpdateManager.startUpdateFlowForResult(info, AppUpdateType.IMMEDIATE, activity, REQUEST_CODE) } }",No update mechanism; users stay on vulnerable versions; manual Play Store navigation required; security patches delayed,High,https://developer.android.com/guide/playcore/in-app-updates
Security,OWASP M1: Improper Credential Usage,OWASP Mobile Top 10 2024 M1 covers insecure credential handling storage and transmission. Never hardcode credentials API keys tokens. Use Android Keystore for sensitive keys EncryptedSharedPreferences for auth tokens. Implement strong authentication (MFA biometrics) token rotation secure password policies. Validate credentials server-side. Clear credentials on logout.,Use Android Keystore for keys; EncryptedSharedPreferences for tokens; implement MFA biometrics; token rotation; never hardcode credentials,Hardcode API keys passwords; store tokens in plain SharedPreferences; weak authentication; no token rotation; credentials in git,"// Generate key in Keystore: val keyGenerator = KeyGenerator.getInstance(KeyProperties.KEY_ALGORITHM_AES, 'AndroidKeyStore'); keyGenerator.init(KeyGenParameterSpec.Builder('auth_key', PURPOSE_ENCRYPT or PURPOSE_DECRYPT).setBlockModes(BLOCK_MODE_GCM).setEncryptionPaddings(ENCRYPTION_PADDING_NONE).build()); // Store token: EncryptedSharedPreferences encrypted token; // MFA: BiometricPrompt for sensitive operations",const val API_KEY = 'sk_live_abc123'; // Hardcoded exposed in APK; SharedPreferences.edit().putString('token' authToken) // Plaintext storage,Critical,https://owasp.org/www-project-mobile-top-10/
Security,OWASP M4: Insufficient Input Validation,OWASP M4 addresses injection attacks from unvalidated input. Validate all user input deep link parameters intent extras API responses with regex whitelisting length checks type validation. Sanitize output to prevent XSS. Use parameterized queries for SQL Room @Query. Validate file uploads. Check data types bounds special characters.,Validate all inputs with regex whitelist length type checks; sanitize outputs; parameterized queries; validate intents deep links API data,Trust all user input; no validation; string concatenation for SQL; accept any file upload; no sanitization,"// Input validation: fun validateEmail(input: String): String? = input.takeIf { it.matches(Regex('^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$')) && it.length \u003c= 254 }; // Deep link validation: val userId = uri.getQueryParameter('id')?.takeIf { it.matches(Regex('^[0-9]{1,10}$')) } ?: return; // SQL: @Query('SELECT * WHERE id = :id') parameterized",val userId = intent.getStringExtra('user_id'); deleteUser(userId) // No validation - injection; db.rawQuery('SELECT * WHERE name = $input') // SQL injection,Critical,https://owasp.org/www-project-mobile-top-10/
Security,OWASP M8: Security Misconfiguration,OWASP M8 covers misconfigurations: android:debuggable=true in production insecure defaults excessive permissions weak encryption cleartext traffic debug code shipped. Review: remove debug features use android:debuggable=false minimize permissions enforce HTTPS disable unused features secure default configurations production-ready builds.,Remove all debug code; android:debuggable=false; minimize permissions; HTTPS only; secure defaults; review before release,Ship with android:debuggable=true; debug features enabled; excessive permissions; HTTP allowed; insecure defaults; no configuration review,// Release build (build.gradle.kts): buildTypes { release { isDebuggable = false; isMinifyEnabled = true; proguardFiles(getDefaultProguardFile('proguard-android-optimize.txt')) } }; // AndroidManifest: \u003capplication android:debuggable='false' android:allowBackup='false'\u003e; // Network: \u003cnetwork-security-config\u003e\u003cbase-config cleartextTrafficPermitted='false'\u003e; // Minimal permissions,\u003capplication android:debuggable='true'\u003e in production; debug logs enabled; \u003cuses-permission android:name='android.permission.READ_CONTACTS' /\u003e unused; cleartextTrafficPermitted='true',High,https://owasp.org/www-project-mobile-top-10/
Security,OWASP M9: Insecure Data Storage,OWASP M9 addresses storing sensitive data insecurely. Encrypt all sensitive data at rest using EncryptedSharedPreferences EncryptedFile Room with SQLCipher. Use Android Keystore for key management. Don't store in: plain SharedPreferences external storage logs temporary files. Implement data retention policies secure deletion. Exclude sensitive data from backups.,Encrypt data at rest with EncryptedSharedPreferences EncryptedFile Room+SQLCipher; use Keystore; exclude from backups; secure deletion,Store sensitive data in plain SharedPreferences; external storage; no encryption; included in backups; no deletion policy,"// Encrypted storage: val masterKey = MasterKey.Builder(context).setKeyScheme(AES256_GCM).build(); val encryptedPrefs = EncryptedSharedPreferences.create(context, 'secure_prefs', masterKey, AES256_SIV, AES256_GCM); encryptedPrefs.edit().putString('token', authToken).apply(); // Backup exclusion: \u003cfull-backup-content\u003e\u003cexclude domain='sharedpref' path='secure_prefs.xml'/\u003e\u003c/full-backup-content\u003e","val prefs = getSharedPreferences('prefs', MODE_PRIVATE); prefs.edit().putString('password', userPassword).apply() // Plaintext readable via ADB backup; File(externalStorageDirectory, 'sensitive.txt').writeText(data) // Public storage",Critical,https://owasp.org/www-project-mobile-top-10/
Security,Third-Party SDK Compliance,Google Play 2026 increases scrutiny on third-party SDKs requiring developers to ensure SDK compliance with policies especially data collection background behavior. Review SDK privacy policies update regularly vet before integration use dependency scanning declare SDK data in Data Safety. Non-compliant SDKs lead to app rejection. Check SDK permissions network access data harvesting.,Vet all SDKs before integration; review privacy policies; dependency scanning; keep updated; declare in Data Safety; remove non-compliant SDKs,Use SDKs without vetting; outdated versions; no privacy review; undeclared in Data Safety; unknown data collection,// SDK vetting checklist: 1. Review privacy policy; 2. Check permissions SDK requests; 3. Scan with: ./gradlew dependencyCheckAnalyze; 4. Monitor SDK behavior with network proxy; 5. Declare in Data Safety; 6. Update regularly; // Use trusted SDKs: dependencies { implementation('androidx.security:security-crypto:1.1.0-alpha06') // Google official }; // Remove suspicious SDKs with excessive permissions or unknown data collection,dependencies { implementation('com.unknown:analytics:1.0.0') } // Unvetted outdated unknown; SDK requests CONTACTS LOCATION undisclosed; Not declared in Data Safety; Never updated,High,https://support.google.com/googleplay/android-developer/answer/9888076
Security,Runtime Permission Best Practices,Android 6+ requires runtime permissions for dangerous permissions (location camera contacts etc). Request permissions contextually with clear rationale using shouldShowRequestPermissionRationale. Handle denials gracefully. Request minimum permissions. Use permission groups. Check permissions before use. Consider alternatives: photo picker (no permission) approximate location. Alert users why permission needed.,Request permissions at runtime with rationale; minimal permissions; handle denials; explain to users; use alternatives when possible,Request all permissions at install; no rationale; don't handle denials; excessive permissions; no explanation,"// Request with rationale: if (ContextCompat.checkSelfPermission(this, ACCESS_FINE_LOCATION) != PERMISSION_GRANTED) { if (shouldShowRequestPermissionRationale(ACCESS_FINE_LOCATION)) { showRationale('Location needed for nearby stores') } else { requestPermissionLauncher.launch(ACCESS_FINE_LOCATION) } }; // Handle denial: registerForActivityResult(RequestPermission()) { granted -> if (!granted) offerAlternative() }","// Bad: Request all upfront: requestPermissions(arrayOf(CAMERA, CONTACTS, LOCATION, READ_SMS, CALL_PHONE), 0) // No explanation; if (checkSelfPermission(CAMERA) != GRANTED) { finish() } // Don't handle denial",High,https://developer.android.com/training/permissions/requesting
XML Views,ConstraintLayout Flat Hierarchy,"Use ConstraintLayout to create flat view hierarchies instead of deeply nested LinearLayouts or RelativeLayouts. Each nesting level adds a measure and layout pass, degrading performance. ConstraintLayout allows complex layouts with a single level of nesting using constraints, chains, barriers, and guidelines.",Use ConstraintLayout with constraints chains barriers guidelines for complex layouts,Nest multiple LinearLayouts or RelativeLayouts more than 2-3 levels deep,"<androidx.constraintlayout.widget.ConstraintLayout xmlns:app='http://schemas.android.com/apk/res-auto' android:layout_width='match_parent' android:layout_height='wrap_content'><ImageView android:id='@+id/avatar' app:layout_constraintStart_toStartOf='parent' app:layout_constraintTop_toTopOf='parent' /><TextView android:id='@+id/title' app:layout_constraintStart_toEndOf='@id/avatar' app:layout_constraintTop_toTopOf='@id/avatar' /><TextView android:id='@+id/subtitle' app:layout_constraintStart_toEndOf='@id/avatar' app:layout_constraintTop_toBottomOf='@id/title' /></androidx.constraintlayout.widget.ConstraintLayout>","<LinearLayout android:orientation='vertical'><LinearLayout android:orientation='horizontal'><LinearLayout android:orientation='vertical'><TextView /><TextView /></LinearLayout></LinearLayout></LinearLayout> // 3 levels deep for simple layout",High,https://developer.android.com/develop/ui/views/layout/constraint-layout
XML Views,View Binding,"Use View Binding to safely access views instead of findViewById or deprecated Kotlin synthetics. View Binding generates a binding class per XML layout with direct references to all views with IDs. It is null-safe, type-safe, and catches missing views at compile time.",Enable viewBinding in build.gradle; use generated binding classes in Activity Fragment Adapter,Use findViewById or Kotlin synthetics (deprecated),// build.gradle.kts: android { buildFeatures { viewBinding = true } }; // Activity: class MainActivity : AppCompatActivity() { private lateinit var binding: ActivityMainBinding; override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState); binding = ActivityMainBinding.inflate(layoutInflater); setContentView(binding.root); binding.titleText.text = 'Hello' } },val title = findViewById<TextView>(R.id.titleText) // null at runtime if ID wrong; or import kotlinx.android.synthetic.main.activity_main.* // deprecated,High,https://developer.android.com/topic/libraries/view-binding
XML Views,merge Tag for Include Layouts,"Use <merge> as the root element for layouts meant to be included via <include>. When a layout is included, the <merge> tag is removed and its children are added directly to the parent, eliminating an unnecessary extra ViewGroup layer.",Use <merge> as root for included layouts to eliminate redundant ViewGroup,Use a layout container (LinearLayout FrameLayout) as root of included layouts,"<!-- toolbar_layout.xml --> <merge xmlns:android='http://schemas.android.com/apk/res/android'><ImageView android:id='@+id/icon' /><TextView android:id='@+id/title' /></merge>; <!-- main_layout.xml --> <LinearLayout><include layout='@layout/toolbar_layout' /></LinearLayout>","<!-- toolbar_layout.xml --> <LinearLayout><ImageView /><TextView /></LinearLayout> // extra LinearLayout added when included; deeper hierarchy",Medium,https://developer.android.com/develop/ui/views/layout/improving-layouts/reusing-layouts#Merge
XML Views,include Tag for Layout Reuse,"Use <include> to embed reusable layout fragments into multiple parent layouts. This promotes DRY principle and ensures consistent UI across screens. Override layout_width and layout_height on the <include> tag to customize size per usage.",Extract common UI components into separate layout files and reuse via include,Copy-paste the same layout XML across multiple files,"<!-- common_header.xml --> <TextView android:id='@+id/header' android:layout_width='match_parent' android:layout_height='wrap_content' android:textAppearance='?attr/textAppearanceHeadline6' />; <!-- screen_a.xml --> <LinearLayout><include layout='@layout/common_header' /><RecyclerView /></LinearLayout>","<!-- Copy-paste header in every layout file --> <LinearLayout><TextView android:id='@+id/header' android:layout_width='match_parent' android:layout_height='wrap_content' /><RecyclerView /></LinearLayout> // duplicated in 10 screens; change requires 10 edits",Medium,https://developer.android.com/develop/ui/views/layout/improving-layouts/reusing-layouts
XML Views,RecyclerView ListAdapter with DiffUtil,"Use ListAdapter with DiffUtil.ItemCallback for efficient RecyclerView updates. DiffUtil computes the minimal set of changes (inserts, removes, moves) on a background thread avoiding full notifyDataSetChanged calls which rebind all items.",ListAdapter with DiffUtil.ItemCallback; submitList() for updates,RecyclerView.Adapter with notifyDataSetChanged or manual notify calls,"class UserAdapter : ListAdapter<User, UserViewHolder>(UserDiffCallback()) { override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = UserViewHolder(ItemUserBinding.inflate(LayoutInflater.from(parent.context), parent, false)); override fun onBindViewHolder(holder: UserViewHolder, position: Int) { holder.bind(getItem(position)) } }; class UserDiffCallback : DiffUtil.ItemCallback<User>() { override fun areItemsTheSame(old: User, new: User) = old.id == new.id; override fun areContentsTheSame(old: User, new: User) = old == new }","class UserAdapter(var items: List<User>) : RecyclerView.Adapter<UserViewHolder>() { fun updateList(new: List<User>) { items = new; notifyDataSetChanged() } } // rebinds all items; flickers; no animations",High,https://developer.android.com/reference/androidx/recyclerview/widget/ListAdapter
XML Views,RecyclerView setHasFixedSize,"Call setHasFixedSize(true) on RecyclerView when the adapter content does not change the RecyclerView size. This skips unnecessary layout recalculations when adapter data changes, improving scrolling performance.",Set setHasFixedSize(true) when RecyclerView size is constant regardless of adapter content,Skip setHasFixedSize causing unnecessary layout passes on data changes,recyclerView.setHasFixedSize(true); recyclerView.layoutManager = LinearLayoutManager(this); recyclerView.adapter = myAdapter,recyclerView.layoutManager = LinearLayoutManager(this); recyclerView.adapter = myAdapter // no setHasFixedSize; unnecessary relayouts,Medium,https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView#setHasFixedSize(boolean)
XML Views,RecyclerView View Types,"Use getItemViewType() to support multiple view types in RecyclerView. Create different ViewHolder subclasses for each type. Use sealed class/interface for list items to ensure exhaustive handling in when expressions.",Sealed class for item types; getItemViewType returns distinct int per type; typed ViewHolders,Single ViewHolder with visibility toggling for different item layouts,"sealed interface ListItem { data class Header(val title: String) : ListItem; data class Content(val user: User) : ListItem }; class MultiAdapter : ListAdapter<ListItem, RecyclerView.ViewHolder>(DiffCallback()) { override fun getItemViewType(position: Int) = when (getItem(position)) { is ListItem.Header -> TYPE_HEADER; is ListItem.Content -> TYPE_CONTENT }; override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = when (viewType) { TYPE_HEADER -> HeaderViewHolder(ItemHeaderBinding.inflate(inflater, parent, false)); else -> ContentViewHolder(ItemContentBinding.inflate(inflater, parent, false)) } }","class Adapter : RecyclerView.Adapter<MyViewHolder>() { override fun onBindViewHolder(holder: MyViewHolder, pos: Int) { if (items[pos].isHeader) { holder.contentLayout.visibility = GONE; holder.headerLayout.visibility = VISIBLE } else { holder.contentLayout.visibility = VISIBLE; holder.headerLayout.visibility = GONE } } } // inflates both layouts always; wastes memory",Medium,https://developer.android.com/develop/ui/views/layout/recyclerview-custom#multiple-view-types
XML Views,tools: Namespace for Previews,"Use tools: attributes in XML layouts for design-time preview data without affecting runtime behavior. tools:text, tools:src, tools:listitem, tools:itemCount, tools:visibility provide visual context in Android Studio layout editor.",Use tools:text tools:src tools:listitem for design-time preview data,Hardcode placeholder text in android:text that must be removed before release; or no preview data,"<TextView android:id='@+id/title' android:layout_width='wrap_content' android:layout_height='wrap_content' android:text='@string/title' tools:text='Sample Article Title' />; <RecyclerView android:id='@+id/list' tools:listitem='@layout/item_user' tools:itemCount='5' />","<TextView android:text='Sample Article Title' /> // hardcoded placeholder shipped to production; or <RecyclerView /> // blank in preview; can't visualize list",Low,https://developer.android.com/studio/write/tool-attributes
XML Views,String Resources,"Never hardcode user-facing strings in layouts or code. Extract all strings to res/values/strings.xml for localization support, maintainability, and Play Store translation services. Use string formatting with placeholders for dynamic content.",All user-facing text in strings.xml with descriptive names; use string placeholders for dynamic values,Hardcode strings in XML layout android:text or in Kotlin/Java code,"<TextView android:text='@string/welcome_message' />; <!-- strings.xml --> <string name='welcome_message'>Welcome back %1$s</string>; // Kotlin: getString(R.string.welcome_message, userName)","<TextView android:text='Welcome back' /> // hardcoded; not translatable; // Kotlin: textView.text = 'Welcome back $name' // not localizable",High,https://developer.android.com/guide/topics/resources/string-resource
XML Views,Dimension Resources,"Extract hardcoded dimensions to res/values/dimens.xml for consistent spacing, sizing, and easy adaptation to different screen densities. Define a spacing scale (4dp, 8dp, 16dp, 24dp) and reference throughout layouts.",Define dimensions in dimens.xml with semantic names; use dp for layout sp for text,Hardcode dp/sp values directly in XML layouts,"<!-- dimens.xml --> <dimen name='spacing_small'>8dp</dimen><dimen name='spacing_medium'>16dp</dimen><dimen name='spacing_large'>24dp</dimen><dimen name='text_body'>16sp</dimen>; <!-- layout --> <TextView android:layout_marginStart='@dimen/spacing_medium' android:textSize='@dimen/text_body' />","<TextView android:layout_marginStart='16dp' android:layout_marginEnd='16dp' android:textSize='14sp' /> // magic numbers; inconsistent spacing across screens; hard to update globally",Medium,https://developer.android.com/guide/topics/resources/more-resources#Dimension
XML Views,Style and Theme Inheritance,"Use styles to encapsulate common view attributes and themes for app-wide appearance. Use parent attribute or dot notation (Widget.App.Button) for style inheritance. Define styles in res/values/styles.xml and apply via style attribute or theme overlay.",Define reusable styles with inheritance; apply via style attribute; use theme overlays for scoped theming,Duplicate view attributes across layouts instead of extracting to styles,"<!-- styles.xml --> <style name='Widget.App.Button' parent='Widget.Material3.Button'><item name='android:textAllCaps'>false</item><item name='cornerRadius'>12dp</item></style>; <style name='Widget.App.Button.Outlined' parent='Widget.Material3.Button.OutlinedButton'><item name='android:textAllCaps'>false</item></style>; <!-- layout --> <Button style='@style/Widget.App.Button' android:text='@string/submit' />","<Button android:textAllCaps='false' android:backgroundTint='@color/primary' android:textColor='@color/white' android:paddingStart='24dp' android:paddingEnd='24dp' /> // duplicated on every button; change requires editing 30 files",Medium,https://developer.android.com/develop/ui/views/theming/themes
XML Views,Vector Drawables,"Use VectorDrawable (res/drawable/*.xml) instead of multiple PNG/WebP assets for icons and simple illustrations. Vector drawables scale to any density without quality loss, reduce APK size significantly, and support tinting via android:tint and app:tintMode.",Use vector drawables for icons and simple graphics; enable vectorDrawables.useSupportLibrary for API < 21,Use multiple PNG densities (mdpi hdpi xhdpi xxhdpi xxxhdpi) for icons,"// build.gradle.kts: android { defaultConfig { vectorDrawables.useSupportLibrary = true } }; <!-- ic_search.xml --> <vector xmlns:android='http://schemas.android.com/apk/res/android' android:width='24dp' android:height='24dp' android:viewportWidth='24' android:viewportHeight='24'><path android:fillColor='?attr/colorOnSurface' android:pathData='M15.5,14h-0.79l-0.28,-0.27A6.47,6.47,0,0,0,...' /></vector>; <ImageView android:src='@drawable/ic_search' app:tint='?attr/colorPrimary' />","res/drawable-mdpi/ic_search.png + res/drawable-hdpi/ic_search.png + res/drawable-xhdpi/ic_search.png + res/drawable-xxhdpi/ic_search.png // 4 files instead of 1; larger APK; no tinting",Medium,https://developer.android.com/develop/ui/views/graphics/vector-drawable-resources
XML Views,Night Mode Resources,"Use -night resource qualifier for dark theme support. Place dark theme colors in res/values-night/colors.xml and dark theme drawables in res/drawable-night/. Use DayNight theme as parent. Let the system handle switching automatically based on user preference.",Provide values-night/colors.xml and drawable-night/ variants; use DayNight theme; use ?attr/ color references,Hardcode colors directly in layouts; single color set with no dark mode support,"<!-- values/colors.xml --> <color name='background'>#FFFFFF</color><color name='on_background'>#1C1B1F</color>; <!-- values-night/colors.xml --> <color name='background'>#1C1B1F</color><color name='on_background'>#E6E1E5</color>; <!-- themes.xml --> <style name='Theme.App' parent='Theme.Material3.DayNight'>; <!-- layout --> <TextView android:textColor='@color/on_background' android:background='@color/background' />","<TextView android:textColor='#000000' android:background='#FFFFFF' /> // hardcoded; unreadable in dark mode; no DayNight support",High,https://developer.android.com/develop/ui/views/theming/darktheme
XML Views,Material Components in XML,"Use Material Design 3 components (MaterialButton, MaterialCardView, TextInputLayout, MaterialToolbar) instead of plain AppCompat or framework widgets. Material components provide consistent styling, motion, elevation, state handling, and automatic theme integration.",Use Material3 components: MaterialButton MaterialCardView TextInputLayout MaterialToolbar,Use plain Button EditText Toolbar from framework or AppCompat,"<com.google.android.material.button.MaterialButton android:layout_width='wrap_content' android:layout_height='wrap_content' android:text='@string/submit' app:cornerRadius='12dp' app:icon='@drawable/ic_send' app:iconGravity='end' />; <com.google.android.material.textfield.TextInputLayout android:layout_width='match_parent' android:layout_height='wrap_content' android:hint='@string/email' style='@style/Widget.Material3.TextInputLayout.OutlinedBox'><com.google.android.material.textfield.TextInputEditText android:layout_width='match_parent' android:layout_height='wrap_content' android:inputType='textEmailAddress' /></com.google.android.material.textfield.TextInputLayout>","<Button android:layout_width='wrap_content' android:layout_height='wrap_content' android:text='Submit' /> // plain framework button; no material styling; <EditText android:hint='Email' /> // no floating label; no error styling",Medium,https://developer.android.com/develop/ui/views/theming/look-and-feel
XML Views,Custom View with Custom Attributes,"Define custom attributes in res/values/attrs.xml for custom views. Use TypedArray to read attributes in the view constructor. Recycle TypedArray after use to avoid memory leaks. Provide default values for all custom attributes.",Define attrs.xml with declare-styleable; read via TypedArray in init; recycle TypedArray; provide defaults,Hardcode values in custom view or pass everything via setter methods after construction,"<!-- res/values/attrs.xml --> <declare-styleable name='CircleProgressView'><attr name='progress' format='integer' /><attr name='progressColor' format='color' /><attr name='trackColor' format='color' /><attr name='strokeWidth' format='dimension' /></declare-styleable>; // Kotlin: class CircleProgressView @JvmOverloads constructor(ctx: Context, attrs: AttributeSet? = null) : View(ctx, attrs) { init { val ta = context.obtainStyledAttributes(attrs, R.styleable.CircleProgressView); progress = ta.getInt(R.styleable.CircleProgressView_progress, 0); progressColor = ta.getColor(R.styleable.CircleProgressView_progressColor, Color.BLUE); ta.recycle() } }","class CircleProgressView(ctx: Context) : View(ctx) { var progress = 0; var color = Color.BLUE } // no XML attributes; must configure in code; no preview; no TypedArray recycle",Medium,https://developer.android.com/develop/ui/views/layout/custom-views/create-view
XML Views,Fragment ViewLifecycleOwner,"In Fragments, use viewLifecycleOwner instead of this (the Fragment) for observing LiveData or collecting Flow. The Fragment outlives its view (e.g., on back stack), so using the Fragment as LifecycleOwner causes duplicate observers and stale updates after view recreation.",Use viewLifecycleOwner for view-related observations in onViewCreated; use repeatOnLifecycle(STARTED),Use Fragment (this) as LifecycleOwner for LiveData observe or Flow collect,"override fun onViewCreated(view: View, savedInstanceState: Bundle?) { super.onViewCreated(view, savedInstanceState); viewModel.state.observe(viewLifecycleOwner) { state -> binding.title.text = state.title }; viewLifecycleOwner.lifecycleScope.launch { viewLifecycleOwner.repeatOnLifecycle(Lifecycle.State.STARTED) { viewModel.events.collect { handleEvent(it) } } } }","override fun onViewCreated(view: View, savedInstanceState: Bundle?) { viewModel.state.observe(this) { state -> binding.title.text = state.title } // 'this' = Fragment; duplicate observers after back stack pop; memory leak }",Critical,https://developer.android.com/topic/libraries/architecture/lifecycle#lc-frag
XML Views,Fragment Result API,"Use FragmentResultListener and setFragmentResult for Fragment-to-Fragment communication instead of shared ViewModel or direct Fragment references. Works across the back stack and survives configuration changes.",setFragmentResult / setFragmentResultListener for Fragment communication,Direct Fragment references or shared ViewModel for simple one-shot communication,"// Sender: setFragmentResult('requestKey', bundleOf('data' to selectedItem)); // Receiver: parentFragmentManager.setFragmentResultListener('requestKey', viewLifecycleOwner) { _, bundle -> val result = bundle.getString('data'); binding.selected.text = result }","// Direct reference: (parentFragment as ParentFragment).onItemSelected(item) // tight coupling; ClassCastException risk; // Or shared ViewModel for simple one-shot result passing = overkill",Medium,https://developer.android.com/guide/fragments/communicate#fragment-result
XML Views,MotionLayout for Animations,"Use MotionLayout for complex view animations and transitions declaratively in XML. Define start/end ConstraintSets and transition in a MotionScene file. Supports drag, swipe, click triggers, and keyframe animations without code.",MotionLayout with MotionScene XML for complex coordinated animations,Programmatic ObjectAnimator chains or TransitionManager for complex multi-view animations,"<!-- layout --> <androidx.constraintlayout.motion.widget.MotionLayout app:layoutDescription='@xml/scene_collapse_toolbar'>; <!-- res/xml/scene_collapse_toolbar.xml --> <MotionScene><Transition app:constraintSetStart='@id/expanded' app:constraintSetEnd='@id/collapsed' app:duration='300'><OnSwipe app:dragDirection='dragUp' app:touchAnchorId='@id/content' /></Transition><ConstraintSet android:id='@+id/expanded'><!-- expanded state constraints --></ConstraintSet><ConstraintSet android:id='@+id/collapsed'><!-- collapsed state constraints --></ConstraintSet></MotionScene>","// Programmatic: ObjectAnimator.ofFloat(view1, 'translationY', 0f, -200f).start(); ObjectAnimator.ofFloat(view2, 'alpha', 1f, 0f).start(); // not coordinated; hard to maintain; no swipe support",Medium,https://developer.android.com/develop/ui/views/animations/motionlayout
XML Views,Avoid Overdraw,"Minimize overdraw by removing unnecessary backgrounds, using android:background='@null' on nested containers, and avoiding opaque backgrounds on views that cover each other. Enable GPU overdraw debug in Developer Options to visualize layers.",Remove unnecessary backgrounds; use @null on intermediate containers; check with GPU overdraw debug,Stack opaque backgrounds on nested ViewGroups causing multiple unnecessary draw passes,"<!-- Parent has background; child covers fully --> <FrameLayout android:background='@color/surface'><RecyclerView android:layout_width='match_parent' android:layout_height='match_parent' android:background='@color/surface' /> <!-- same color = overdraw --></FrameLayout>; <!-- Fixed: remove child background --> <FrameLayout android:background='@color/surface'><RecyclerView android:layout_width='match_parent' android:layout_height='match_parent' /></FrameLayout>","<LinearLayout android:background='@color/white'><FrameLayout android:background='@color/white'><CardView android:background='@color/white'><TextView android:background='@color/white' /></CardView></FrameLayout></LinearLayout> // 4x overdraw; GPU rendering wasted on hidden pixels",Medium,https://developer.android.com/topic/performance/rendering/overdraw
XML Views,Accessibility in XML Views,"Set contentDescription on ImageView and ImageButton for screen readers. Use android:importantForAccessibility='no' for decorative elements. Group related views with android:accessibilityTraversalBefore/After. Use android:labelFor on TextViews to associate with EditTexts.",contentDescription on functional images; importantForAccessibility='no' on decorative; labelFor on labels,Missing contentDescription on all images; no importantForAccessibility attributes,"<ImageButton android:src='@drawable/ic_delete' android:contentDescription='@string/delete_item' />; <ImageView android:src='@drawable/bg_pattern' android:importantForAccessibility='no' /> <!-- decorative -->; <TextView android:text='@string/email' android:labelFor='@+id/email_input' /><EditText android:id='@+id/email_input' />","<ImageButton android:src='@drawable/ic_delete' /> // TalkBack says 'unlabelled button'; <ImageView android:src='@drawable/icon' android:contentDescription='icon' /> // useless generic description",High,https://developer.android.com/guide/topics/ui/accessibility/apps
XML Views,Correct match_parent and wrap_content,"Use match_parent for views that should fill available space and wrap_content for views that should size to content. Avoid wrap_content on RecyclerView items in scroll direction as it forces measuring all items. Use 0dp (match_constraint) in ConstraintLayout instead of match_parent.",match_parent or 0dp for fill behavior; wrap_content for content-sized views; 0dp in ConstraintLayout,wrap_content in scroll direction of RecyclerView; match_parent inside ConstraintLayout,"<!-- ConstraintLayout child: use 0dp --> <TextView android:layout_width='0dp' android:layout_height='wrap_content' app:layout_constraintStart_toStartOf='parent' app:layout_constraintEnd_toEndOf='parent' />; <!-- RecyclerView item: fixed height or wrap_content in cross-axis only --> <LinearLayout android:layout_width='match_parent' android:layout_height='wrap_content' />","<!-- Bad: match_parent inside ConstraintLayout --> <TextView android:layout_width='match_parent' /> // ignores constraints; <!-- Bad: wrap_content height in vertical RecyclerView items with nested RecyclerView --> <RecyclerView android:layout_height='wrap_content' /> // measures all nested items at once",Medium,https://developer.android.com/develop/ui/views/layout/constraint-layout
XML Views,Layout Inflation Best Practices,"Always pass the parent ViewGroup to LayoutInflater.inflate() and set attachToRoot correctly. Pass parent with attachToRoot=false in RecyclerView onCreateViewHolder and Fragment onCreateView to get correct LayoutParams without immediate attachment.",Pass parent ViewGroup; attachToRoot=false in ViewHolder and Fragment; attachToRoot=true only for merge layouts,Pass null as parent losing LayoutParams; or attachToRoot=true causing IllegalStateException in RecyclerView,"// RecyclerView ViewHolder: override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): MyViewHolder { val binding = ItemBinding.inflate(LayoutInflater.from(parent.context), parent, false); return MyViewHolder(binding) }; // Fragment: override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View { return inflater.inflate(R.layout.fragment_detail, container, false) }","// Null parent: val view = inflater.inflate(R.layout.item, null) // LayoutParams lost; margins ignored; // attachToRoot=true in RecyclerView: inflater.inflate(R.layout.item, parent, true) // IllegalStateException: child already has parent",High,https://developer.android.com/reference/android/view/LayoutInflater
XML Views,RecyclerView Item Animations,"Use RecyclerView.ItemAnimator (DefaultItemAnimator) for smooth insert, remove, move, and change animations. Pair with DiffUtil for automatic animation dispatch. Disable item change animations if they cause flickering with image loading.",DiffUtil + DefaultItemAnimator for automatic animations; setSupportsChangeAnimations(false) for image flickering fix,notifyDataSetChanged which skips all animations; or no ItemAnimator,"// Default animations work with ListAdapter + DiffUtil: recyclerView.adapter = myListAdapter; myListAdapter.submitList(newList); // Animations happen automatically; // Fix image flicker: (recyclerView.itemAnimator as? DefaultItemAnimator)?.supportsChangeAnimations = false","adapter.items = newList; adapter.notifyDataSetChanged() // no animations; all items rebind; flickering; poor UX",Medium,https://developer.android.com/develop/ui/views/layout/recyclerview-custom#modify-animations
XML Views,Plurals and Quantity Strings,"Use <plurals> in strings.xml for quantity-dependent text (e.g., '1 item' vs '5 items'). Android handles locale-specific plural rules (some languages have more than two plural forms). Use getQuantityString() to resolve.",Define plurals in strings.xml; use getQuantityString with count parameter,Concatenate count with singular/plural string using if/else,"<!-- strings.xml --> <plurals name='items_count'><item quantity='one'>%d item</item><item quantity='other'>%d items</item></plurals>; // Kotlin: resources.getQuantityString(R.plurals.items_count, count, count)","textView.text = if (count == 1) '$count item' else '$count items' // wrong for languages with multiple plural forms (Russian Arabic etc.); not localizable",Medium,https://developer.android.com/guide/topics/resources/string-resource#Plurals
XML Views,Selector Drawables for States,"Use StateListDrawable (selector XML) for view backgrounds and foregrounds that change based on pressed, focused, selected, enabled states. Centralizes state appearance in XML instead of programmatic state handling.",Define selector drawables for interactive views; use state_pressed state_focused state_enabled,"Programmatic background color changes in onClick/onTouch listeners; separate drawables per state","<!-- res/drawable/btn_background.xml --> <selector xmlns:android='http://schemas.android.com/apk/res/android'><item android:state_pressed='true' android:drawable='@color/primary_dark' /><item android:state_focused='true' android:drawable='@color/primary_light' /><item android:state_enabled='false' android:drawable='@color/disabled' /><item android:drawable='@color/primary' /></selector>; <Button android:background='@drawable/btn_background' />","button.setOnTouchListener { v, event -> when (event.action) { ACTION_DOWN -> v.setBackgroundColor(Color.DARK_GRAY); ACTION_UP -> v.setBackgroundColor(Color.GRAY) }; true } // manual state; misses focused disabled etc.",Medium,https://developer.android.com/guide/topics/resources/drawable-resource#StateList
XML Views,Color State Lists,"Use ColorStateList (res/color/*.xml) for text and icon colors that change with view state. Apply via android:textColor='@color/selector' or app:iconTint='@color/selector'. Works with Material components automatically.",Define color state lists in res/color/ for stateful text and icon tinting,Hardcode single colors losing visual feedback for disabled pressed focused states,"<!-- res/color/text_color_primary.xml --> <selector xmlns:android='http://schemas.android.com/apk/res/android'><item android:state_enabled='false' android:color='@color/on_surface_38' /><item android:state_pressed='true' android:color='@color/primary_dark' /><item android:color='@color/on_surface' /></selector>; <TextView android:textColor='@color/text_color_primary' />","<TextView android:textColor='#000000' /> // same color when disabled; no visual feedback; inaccessible",Medium,https://developer.android.com/guide/topics/resources/color-list-resource
XML Views,Responsive Layouts with Qualifiers,"Use Android resource qualifiers (-sw600dp, -w840dp, -land, -night) to provide alternative layouts for different screen sizes, orientations, and configurations. Use SlidingPaneLayout or alternative layout files for tablet/foldable adaptation.",Provide layout-sw600dp for tablets; layout-land for landscape; use resource qualifiers,Single layout for all screen sizes; or check screen size in code with if/else,"<!-- res/layout/activity_main.xml --> <LinearLayout android:orientation='vertical'><!-- phone: single column --></LinearLayout>; <!-- res/layout-sw600dp/activity_main.xml --> <LinearLayout android:orientation='horizontal'><!-- tablet: two-column master-detail --></LinearLayout>; <!-- res/layout-land/activity_main.xml --> <LinearLayout android:orientation='horizontal'><!-- landscape: side-by-side --></LinearLayout>","// Single layout for all: if (resources.configuration.screenWidthDp >= 600) { detailContainer.visibility = VISIBLE } else { detailContainer.visibility = GONE } // manual; error-prone; doesn't handle rotation",Medium,https://developer.android.com/guide/topics/large-screens/support-different-screen-sizes
XML Views,Data Binding with Expressions,"Use Data Binding to bind UI components directly to data sources in XML using expressions. Eliminates boilerplate view updates in code. Supports two-way binding with @={} for EditText inputs. Use with ViewModel and LiveData for reactive UI updates.",Enable dataBinding in build.gradle; bind ViewModel to layout; use expressions for conditional display,Manually observe LiveData and update each view in Fragment/Activity,"// build.gradle.kts: android { buildFeatures { dataBinding = true } }; <!-- layout --> <layout><data><variable name='viewModel' type='com.app.MainViewModel' /></data><TextView android:text='@{viewModel.userName}' android:visibility='@{viewModel.isLoading ? View.VISIBLE : View.GONE}' /><EditText android:text='@={viewModel.searchQuery}' /></layout>; // Fragment: binding.viewModel = viewModel; binding.lifecycleOwner = viewLifecycleOwner","// Manual binding: viewModel.userName.observe(viewLifecycleOwner) { binding.name.text = it }; viewModel.isLoading.observe(viewLifecycleOwner) { binding.progress.visibility = if (it) VISIBLE else GONE }; // repeated for every field in every screen",Medium,https://developer.android.com/topic/libraries/data-binding
XML Views,CoordinatorLayout with AppBarLayout,"Use CoordinatorLayout with AppBarLayout and CollapsingToolbarLayout for coordinated scrolling behavior (collapsing toolbar, parallax, pin). Set app:layout_scrollFlags on children and app:layout_behavior on scrolling content.",CoordinatorLayout + AppBarLayout with proper scrollFlags; NestedScrollView or RecyclerView with scrolling behavior,Manual scroll listeners with translationY animations for toolbar collapse,"<androidx.coordinatorlayout.widget.CoordinatorLayout><com.google.android.material.appbar.AppBarLayout><com.google.android.material.appbar.CollapsingToolbarLayout app:layout_scrollFlags='scroll|exitUntilCollapsed'><ImageView app:layout_collapseMode='parallax' /><com.google.android.material.appbar.MaterialToolbar app:layout_collapseMode='pin' /></com.google.android.material.appbar.CollapsingToolbarLayout></com.google.android.material.appbar.AppBarLayout><RecyclerView app:layout_behavior='@string/appbar_scrolling_view_behavior' /></androidx.coordinatorlayout.widget.CoordinatorLayout>","recyclerView.addOnScrollListener(object : OnScrollListener() { override fun onScrolled(rv: RecyclerView, dx: Int, dy: Int) { toolbar.translationY = -totalScroll.toFloat() } }) // janky; doesn't handle fling; no parallax; manual math",Medium,https://developer.android.com/reference/com/google/android/material/appbar/AppBarLayout
XML Views,XML Animation Resources,"Define animations in res/anim/ for view animations (translate, scale, rotate, alpha) and res/animator/ for property animations. Reference in XML transitions or load via AnimationUtils. Use interpolators for natural motion curves.",Define animations in res/anim/ and res/animator/; use interpolators; reference in XML or load via AnimationUtils,Hardcode animation values in Java/Kotlin code; duplicate animation definitions across codebase,"<!-- res/anim/slide_in_right.xml --> <set xmlns:android='http://schemas.android.com/apk/res/android' android:interpolator='@android:interpolator/decelerate_cubic'><translate android:fromXDelta='100%' android:toXDelta='0%' android:duration='300' /><alpha android:fromAlpha='0.0' android:toAlpha='1.0' android:duration='300' /></set>; // Usage: val anim = AnimationUtils.loadAnimation(context, R.anim.slide_in_right); view.startAnimation(anim)","// Hardcoded in code: view.animate().translationX(0f).alpha(1f).setDuration(300).start(); // duplicated everywhere; inconsistent timing; no reuse",Low,https://developer.android.com/guide/topics/resources/animation-resource
XML Views,ViewPager2 with TabLayout,"Use ViewPager2 with TabLayoutMediator for swipeable tab layouts. ViewPager2 replaces deprecated ViewPager with RecyclerView-based implementation supporting vertical orientation, RTL, and DiffUtil. Use FragmentStateAdapter for Fragment-based pages.",ViewPager2 + TabLayoutMediator + FragmentStateAdapter,Deprecated ViewPager with TabLayout.setupWithViewPager; or manual tab click listeners,"<com.google.android.material.tabs.TabLayout android:id='@+id/tabs' />; <androidx.viewpager2.widget.ViewPager2 android:id='@+id/pager' />; // Kotlin: val adapter = object : FragmentStateAdapter(this) { override fun getItemCount() = 3; override fun createFragment(pos: Int) = when (pos) { 0 -> HomeFragment(); 1 -> SearchFragment(); else -> ProfileFragment() } }; pager.adapter = adapter; TabLayoutMediator(tabs, pager) { tab, pos -> tab.text = titles[pos] }.attach()","// Deprecated ViewPager: val adapter = object : FragmentPagerAdapter(supportFragmentManager) { override fun getItem(pos: Int) = fragments[pos]; override fun getCount() = fragments.size }; viewPager.adapter = adapter; tabLayout.setupWithViewPager(viewPager) // deprecated; no RTL; memory issues",Medium,https://developer.android.com/develop/ui/views/animations/vp2-migration
XML Views,RecyclerView RecycledViewPool Sharing,"Share a RecycledViewPool across multiple RecyclerViews that use the same view types. When you have nested horizontal RecyclerViews inside a vertical RecyclerView each inner RecyclerView creates its own pool wasting memory and causing extra view inflation. Sharing a pool lets inner lists reuse ViewHolders from siblings dramatically reducing onCreateViewHolder calls and scroll jank.",Create a single RecycledViewPool and assign it to all inner RecyclerViews via setRecycledViewPool; call setMaxRecycledViews for common view types,Let each nested RecyclerView create its own default pool; never configure pool size for high-traffic view types,"// In outer adapter onBindViewHolder: val sharedPool = RecyclerView.RecycledViewPool(); sharedPool.setMaxRecycledViews(VIEW_TYPE_ITEM, 20); // In inner RecyclerView setup: innerRecyclerView.setRecycledViewPool(sharedPool); innerRecyclerView.setHasFixedSize(true)","// Each nested RecyclerView uses its own pool: innerRecyclerView.adapter = InnerAdapter(items) // no shared pool; 10 nested lists each inflate their own ViewHolders; memory waste; scroll jank on first appearance",High,https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.RecycledViewPool
XML Views,RecyclerView Prefetch for Nested Lists,"Enable item prefetch for nested RecyclerViews by calling setInitialPrefetchItemCount on the inner LayoutManager. The GapWorker prefetches items during idle frames before the inner RecyclerView becomes visible. This eliminates the first-frame jank when a new nested horizontal list scrolls into view.",Call setInitialPrefetchItemCount on inner LinearLayoutManager with expected visible item count; keep setItemPrefetchEnabled(true) default,Disable prefetch; set initialPrefetchItemCount to 0; or ignore nested list first-frame jank,"// In outer adapter onCreateViewHolder: val innerLayoutManager = LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false); innerLayoutManager.initialPrefetchItemCount = 4; // number of items visible at once; innerRecyclerView.layoutManager = innerLayoutManager","// No prefetch config: innerRecyclerView.layoutManager = LinearLayoutManager(context, HORIZONTAL, false) // first-frame jank when nested list appears; GapWorker has no hint about how many items to prepare",Medium,https://developer.android.com/reference/androidx/recyclerview/widget/LinearLayoutManager#setInitialPrefetchItemCount(int)
XML Views,Nested RecyclerView Optimization,"Optimize nested RecyclerViews (horizontal lists inside vertical list) by combining RecycledViewPool sharing prefetch configuration and setHasFixedSize. Also set a fixed height for inner RecyclerViews to avoid expensive wrap_content measurement and disable nested scrolling if the inner list is not independently scrollable.",Share RecycledViewPool; set initialPrefetchItemCount; setHasFixedSize(true); fixed height on inner RecyclerView; setNestedScrollingEnabled(false) if not independently scrollable,Use wrap_content height on inner RecyclerView; no shared pool; no prefetch; nested scrolling enabled when not needed,"// Inner RecyclerView in XML: <RecyclerView android:layout_width='match_parent' android:layout_height='200dp' /> // fixed height avoids measuring all items; // In code: innerRecyclerView.setHasFixedSize(true); innerRecyclerView.setRecycledViewPool(sharedPool); innerRecyclerView.isNestedScrollingEnabled = false; (innerRecyclerView.layoutManager as LinearLayoutManager).initialPrefetchItemCount = 4","<RecyclerView android:layout_width='match_parent' android:layout_height='wrap_content' /> // measures ALL items to determine height; combined with no shared pool and no prefetch = severe scroll jank",High,https://developer.android.com/develop/ui/views/layout/recyclerview-custom
XML Views,ConcatAdapter for Composite Lists,"Use ConcatAdapter to combine multiple adapters (header footer loading indicator content) into a single RecyclerView without manual view type management. Each adapter manages its own view types and data independently. Use Config.Builder to isolate view types and configure stable IDs.",ConcatAdapter with isolated view types; separate adapter per section (header content footer loading); Config.Builder for view type isolation,Single monolithic adapter with multiple view types managed via getItemViewType and complex onCreateViewHolder switch,"val config = ConcatAdapter.Config.Builder().setIsolateViewTypes(true).build(); val headerAdapter = HeaderAdapter(); val contentAdapter = ContentListAdapter(diffCallback); val footerAdapter = LoadingFooterAdapter(); recyclerView.adapter = ConcatAdapter(config, headerAdapter, contentAdapter, footerAdapter); // Each adapter is independent; update footer loading state without touching content","class MonolithAdapter : RecyclerView.Adapter<VH>() { override fun getItemViewType(pos: Int) = when { pos == 0 -> HEADER; pos == itemCount - 1 -> FOOTER; else -> CONTENT }; override fun onCreateViewHolder(parent: VG, type: Int) = when (type) { HEADER -> ...; FOOTER -> ...; else -> ... } } // complex; error-prone position math; tight coupling",Medium,https://developer.android.com/reference/androidx/recyclerview/widget/ConcatAdapter
XML Views,Resource Shrinking with R8,"Enable resource shrinking alongside R8 code minification in release builds to automatically remove unused resources. This removes layouts drawables strings and other resources that are not referenced by any reachable code after R8 optimization. Combined with minification this can reduce APK size by 20-60%.",Enable both isMinifyEnabled and isShrinkResources in release buildType; use proguard-android-optimize.txt; test thoroughly after enabling,Ship without resource shrinking; enable shrinkResources without minifyEnabled (will not work); never audit unused resources,"// build.gradle.kts: android { buildTypes { release { isMinifyEnabled = true; isShrinkResources = true; proguardFiles(getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro') } } }; // gradle.properties (AGP 8.12+): android.r8.optimizedResourceShrinking=true","// No shrinking: android { buildTypes { release { isMinifyEnabled = false; isShrinkResources = false } } } // ships all unused layouts drawables strings; APK bloat; // Or: isShrinkResources = true without isMinifyEnabled = true // error: shrinkResources requires minifyEnabled",High,https://developer.android.com/build/shrink-code
XML Views,WebP Image Format for Resources,"Convert PNG and JPEG assets to WebP format for 25-35% smaller file sizes with equivalent quality. Android 4.0+ supports lossy WebP; Android 4.3+ supports lossless and transparent WebP. Android Studio provides a built-in conversion tool. Use WebP for all raster assets except launcher icons that need PNG for legacy launchers.",Convert PNG/JPEG to WebP via Android Studio right-click Convert to WebP; use lossy for photos lossless for graphics with transparency,Keep large PNG files in drawable folders; use JPEG without considering WebP; ship unoptimized bitmaps,"// Right-click drawable in Android Studio > Convert to WebP; // Result: res/drawable/hero_image.webp (25-35% smaller than PNG); // For API 18+ (lossless+alpha): res/drawable/icon_badge.webp; // build.gradle for AVIF (API 31+): android { defaultConfig { minSdk = 31 } } // can use AVIF for even smaller sizes","res/drawable/hero_image.png // 500KB uncompressed PNG; res/drawable-xxhdpi/background.jpg // 800KB JPEG; // Multiple density PNGs when a single WebP would suffice; never run Convert to WebP wizard",Medium,https://developer.android.com/studio/write/convert-webp
XML Views,Adaptive Icons,"Use adaptive icons (res/mipmap-anydpi-v26/ic_launcher.xml) with separate foreground and background layers. Adaptive icons allow the system to apply different masks (circle squircle rounded square) per OEM. Define a 108dp canvas with 72dp safe zone for the foreground. Use vector drawables for sharp rendering at all densities.",Define ic_launcher.xml with adaptive-icon element; separate foreground and background layers; keep foreground content within 72dp safe zone,Use single static PNG launcher icon; place important content outside safe zone that gets clipped by OEM masks,"<!-- res/mipmap-anydpi-v26/ic_launcher.xml --> <adaptive-icon xmlns:android='http://schemas.android.com/apk/res/android'><background android:drawable='@drawable/ic_launcher_background' /><foreground android:drawable='@drawable/ic_launcher_foreground' /><monochrome android:drawable='@drawable/ic_launcher_monochrome' /></adaptive-icon>; <!-- monochrome layer for themed icons on Android 13+ -->","<!-- Single static PNG: --> res/mipmap-xxxhdpi/ic_launcher.png // no adaptive masking; looks inconsistent across OEMs; no monochrome for themed icons; content may be clipped by circular masks",Medium,https://developer.android.com/develop/ui/views/launch/icon_design_adaptive
XML Views,FragmentContainerView over FrameLayout,"Always use FragmentContainerView instead of FrameLayout as the container for Fragments. FragmentContainerView includes fragment-specific fixes that FrameLayout does not provide: proper z-ordering of fragments during transitions exit animation reliability and correct handling of WindowInsets dispatch. It also supports the android:name attribute to declaratively add a Fragment.",Use FragmentContainerView for all fragment containers; set android:name for initial fragment; use android:id for programmatic transactions,Use FrameLayout or other generic ViewGroups as fragment containers; rely on FrameLayout for fragment transitions,"<androidx.fragment.app.FragmentContainerView android:id='@+id/nav_host_fragment' android:name='androidx.navigation.fragment.NavHostFragment' android:layout_width='match_parent' android:layout_height='match_parent' app:defaultNavHost='true' app:navGraph='@navigation/nav_graph' />","<FrameLayout android:id='@+id/fragment_container' android:layout_width='match_parent' android:layout_height='match_parent' /> // missing fragment-specific fixes; exit animations may not play; z-ordering broken during transitions; WindowInsets not dispatched correctly",High,https://developer.android.com/reference/androidx/fragment/app/FragmentContainerView
XML Views,Fragment setMaxLifecycle,"Use setMaxLifecycle to limit Fragment lifecycle state in ViewPager2 or custom FragmentTransaction scenarios. This prevents offscreen Fragments from reaching RESUMED state saving resources. FragmentStateAdapter uses setMaxLifecycle(STARTED) by default for offscreen pages. Use in custom multi-fragment layouts to control which fragment is active.",Set setMaxLifecycle(fragment STARTED) for offscreen fragments; let only the visible fragment reach RESUMED,Let all fragments in ViewPager or multi-pane layout reach RESUMED; use deprecated setUserVisibleHint,"// ViewPager2 FragmentStateAdapter already uses setMaxLifecycle internally; // Custom usage: supportFragmentManager.commit { setReorderingAllowed(true); add(R.id.container, detailFragment); setMaxLifecycle(detailFragment, Lifecycle.State.STARTED) // prevent RESUMED until shown }; // Later when showing: supportFragmentManager.commit { setMaxLifecycle(detailFragment, Lifecycle.State.RESUMED) }","// Deprecated approach: override fun setUserVisibleHint(isVisibleToUser: Boolean) { super.setUserVisibleHint(isVisibleToUser); if (isVisibleToUser) loadData() } // deprecated; unreliable; // Or: all fragments in multi-pane RESUMED = wasted resources camera conflicts",Medium,https://developer.android.com/reference/androidx/fragment/app/FragmentTransaction#setMaxLifecycle(androidx.fragment.app.Fragment,androidx.lifecycle.Lifecycle.State)
XML Views,FragmentFactory for Constructor Injection,"Use FragmentFactory to provide constructor dependencies to Fragments instead of relying on the empty constructor and arguments Bundle. Register FragmentFactory on the FragmentManager before super.onCreate() to ensure proper recreation after configuration changes. Essential for testability and dependency injection without Hilt.",Set FragmentFactory on supportFragmentManager.fragmentFactory before super.onCreate(); provide dependencies via constructor,Require empty constructor only; pass complex objects via Bundle; use Fragment.setArguments for dependencies that need DI,"class MyFragmentFactory(private val repository: UserRepository) : FragmentFactory() { override fun instantiate(classLoader: ClassLoader, className: String) = when (loadFragmentClass(classLoader, className)) { UserFragment::class.java -> UserFragment(repository); else -> super.instantiate(classLoader, className) } }; // Activity: override fun onCreate(saved: Bundle?) { supportFragmentManager.fragmentFactory = MyFragmentFactory(repo); super.onCreate(saved) }","// Empty constructor + setter: class UserFragment : Fragment() { lateinit var repository: UserRepository } // crash if not set before use; not available after recreation; // Or: complicated Bundle parceling for complex dependencies; untestable",Medium,https://developer.android.com/reference/androidx/fragment/app/FragmentFactory
XML Views,Navigation Graph XML Structure,"Define navigation destinations and actions in a nav_graph.xml resource file. Each destination has an id class/name and layout. Actions define transitions between destinations with animations. Use app:startDestination to set the entry point. Group related destinations in nested navigation elements for modularity.",Define nav_graph.xml with destinations actions and animations; set startDestination; use action elements for transitions; reference in FragmentContainerView,Navigate with FragmentTransaction.replace manually; hardcode fragment class names in code; no declarative navigation graph,"<!-- res/navigation/nav_graph.xml --> <navigation xmlns:android='http://schemas.android.com/apk/res/android' xmlns:app='http://schemas.android.com/apk/res-auto' android:id='@+id/nav_graph' app:startDestination='@id/homeFragment'><fragment android:id='@+id/homeFragment' android:name='com.app.HomeFragment' android:label='Home'><action android:id='@+id/action_home_to_detail' app:destination='@id/detailFragment' app:enterAnim='@anim/slide_in_right' app:exitAnim='@anim/slide_out_left' /></fragment><fragment android:id='@+id/detailFragment' android:name='com.app.DetailFragment' android:label='Detail' /></navigation>","// Manual navigation: supportFragmentManager.beginTransaction().replace(R.id.container, DetailFragment()).addToBackStack(null).commit() // no type safety; no animation consistency; no deep link support; no Safe Args",High,https://developer.android.com/guide/navigation/get-started
XML Views,Navigation Safe Args,"Use Safe Args Gradle plugin to generate type-safe classes for passing arguments between navigation destinations. Safe Args generates Direction classes for actions and Args classes for receiving arguments. This eliminates stringly-typed Bundle keys and catches argument type mismatches at compile time.",Apply Safe Args plugin; define argument elements in nav_graph.xml; use generated Directions and Args classes,Pass arguments via Bundle with string keys; use navigation action IDs without generated classes; risk runtime type mismatches,"// nav_graph.xml: <fragment android:id='@+id/detailFragment'><argument android:name='itemId' app:argType='integer' /><argument android:name='itemName' app:argType='string' /></fragment>; // Navigate: val action = HomeFragmentDirections.actionHomeToDetail(itemId = 42, itemName = 'Widget'); findNavController().navigate(action); // Receive: val args: DetailFragmentArgs by navArgs(); val id = args.itemId","// Manual Bundle: val bundle = Bundle().apply { putInt('item_id', 42); putString('item_name', 'Widget') }; findNavController().navigate(R.id.detailFragment, bundle) // typo in key = null at runtime; no type checking; putInt vs putString mismatch silent",High,https://developer.android.com/guide/navigation/use-graph/pass-data#Safe-args
XML Views,Navigation Deep Links in Nav Graph,"Define implicit deep links directly in the navigation graph XML using the deepLink element. The Navigation component auto-generates intent-filter entries in the manifest when you add nav-graph. This centralizes URI handling with navigation keeping deep link definitions next to their destinations.",Define deepLink elements inside destination in nav_graph.xml; add nav-graph element in manifest activity; handle arguments via URI placeholders,Define intent-filters manually in AndroidManifest; parse URIs in Activity.onCreate; manually route to correct Fragment,"<!-- nav_graph.xml --> <fragment android:id='@+id/detailFragment' android:name='com.app.DetailFragment'><argument android:name='itemId' app:argType='integer' /><deepLink app:uri='myapp://detail/{itemId}' /><deepLink app:uri='https://www.example.com/items/{itemId}' /></fragment>; <!-- AndroidManifest.xml --> <activity android:name='.MainActivity'><nav-graph android:value='@navigation/nav_graph' /></activity>","// Manual intent-filter in manifest + manual parsing: <intent-filter><action android:name='android.intent.action.VIEW' /><data android:scheme='https' android:host='www.example.com' android:pathPattern='/items/.*' /></intent-filter>; // Activity: val itemId = intent.data?.lastPathSegment // manual parsing; error-prone; not connected to nav graph",Medium,https://developer.android.com/guide/navigation/design/deep-link
XML Views,Nested Navigation Graphs,"Use nested navigation graphs to encapsulate related destinations into reusable subflows (login flow onboarding flow checkout flow). Navigate to the nested graph ID not to internal destinations. Nested graphs provide encapsulation so external destinations cannot navigate directly to internal screens. Use include to reference graphs from other modules.",Group related destinations in nested navigation element; navigate to graph ID; use include for multi-module graphs; scope ViewModels to nested graph,Put all destinations in a single flat navigation graph; navigate directly to destinations inside nested graphs from outside,"<!-- nav_graph.xml --> <navigation app:startDestination='@id/homeFragment'><fragment android:id='@+id/homeFragment' /><navigation android:id='@+id/login_graph' app:startDestination='@id/loginFragment'><fragment android:id='@+id/loginFragment' /><fragment android:id='@+id/registerFragment' /><fragment android:id='@+id/forgotPasswordFragment' /></navigation></navigation>; // Navigate to nested graph: findNavController().navigate(R.id.login_graph); // ViewModel scoped to graph: val vm: LoginViewModel by navGraphViewModels(R.id.login_graph)","// Flat graph with 30+ destinations: <navigation app:startDestination='@id/home'><fragment id='home' /><fragment id='login' /><fragment id='register' /><fragment id='forgot' /><fragment id='detail' /><fragment id='settings' />...</navigation> // unmanageable; no encapsulation; cannot scope ViewModels",Medium,https://developer.android.com/guide/navigation/design/nested-graphs
XML Views,MaterialShapeDrawable for Custom Shapes,"Use MaterialShapeDrawable with ShapeAppearanceModel to create custom shaped backgrounds programmatically or via theme attributes. Supports rounded corners cut corners concave corners and custom edge treatments. Integrates with Material theming for elevation overlays and surface colors. Preferred over custom shape XML drawables for Material-consistent shapes.",Use MaterialShapeDrawable with ShapeAppearanceModel for custom shapes; apply via ViewOutlineProvider or background; use theme shape attributes,Create custom XML shape drawables that don't integrate with Material theming; hardcode corner radii ignoring theme shape system,"val shapeModel = ShapeAppearanceModel.builder().setTopLeftCorner(CornerFamily.ROUNDED, 16f.dp).setTopRightCorner(CornerFamily.ROUNDED, 16f.dp).setBottomLeftCorner(CornerFamily.CUT, 8f.dp).setBottomRightCorner(CornerFamily.CUT, 8f.dp).build(); val shapeDrawable = MaterialShapeDrawable(shapeModel).apply { fillColor = ColorStateList.valueOf(getColor(R.color.surface)); elevation = 4f }; view.background = shapeDrawable","<!-- Hardcoded shape: --> <shape android:shape='rectangle'><corners android:topLeftRadius='16dp' android:topRightRadius='16dp' /></shape> // no Material theming integration; no elevation overlay; no cut corners; doesn't respond to theme changes",Medium,https://developer.android.com/reference/com/google/android/material/shape/MaterialShapeDrawable
XML Views,ShapeableImageView for Rounded Images,"Use ShapeableImageView from Material Components to display images with custom shapes (rounded corners circles diamond) without creating custom Outline or Bitmap manipulation. Apply shape via shapeAppearance or shapeAppearanceOverlay attributes in XML. Supports stroke (border) via strokeColor and strokeWidth.",Use ShapeableImageView with app:shapeAppearanceOverlay for shaped images; use theme shape attributes for consistency,Use Glide/Coil CircleCropTransformation or custom OutlineProvider for every ImageView; clip manually in onDraw,"<com.google.android.material.imageview.ShapeableImageView android:layout_width='80dp' android:layout_height='80dp' android:scaleType='centerCrop' app:shapeAppearanceOverlay='@style/CircleImageStyle' app:strokeColor='@color/outline' app:strokeWidth='2dp' />; <!-- styles.xml --> <style name='CircleImageStyle'><item name='cornerFamily'>rounded</item><item name='cornerSize'>50%</item></style>","// Manual circle crop: imageView.outlineProvider = object : ViewOutlineProvider() { override fun getOutline(view: View, outline: Outline) { outline.setOval(0, 0, view.width, view.height) } }; imageView.clipToOutline = true // manual; no stroke support; must repeat for every image; no theme integration",Medium,https://developer.android.com/reference/com/google/android/material/imageview/ShapeableImageView
XML Views,MaterialDivider and MaterialDividerItemDecoration,"Use MaterialDividerItemDecoration for RecyclerView dividers and MaterialDivider for standalone dividers. These respect Material 3 theming (colorOutlineVariant) and support configurable insets and thickness. MaterialDividerItemDecoration replaces DividerItemDecoration with Material-aware styling.",Use MaterialDividerItemDecoration for RecyclerView; MaterialDivider in XML layouts; configure insets via dividerInsetStart/End,Use DividerItemDecoration with custom drawable; hardcode divider colors; use View with 1dp height as divider,"// RecyclerView divider: val divider = MaterialDividerItemDecoration(context, LinearLayoutManager.VERTICAL); divider.dividerInsetStart = resources.getDimensionPixelSize(R.dimen.spacing_medium); divider.isLastItemDecorated = false; recyclerView.addItemDecoration(divider); // XML standalone: <com.google.android.material.divider.MaterialDivider android:layout_width='match_parent' android:layout_height='wrap_content' app:dividerInsetStart='16dp' />","// Old approach: val divider = DividerItemDecoration(context, VERTICAL); divider.setDrawable(ContextCompat.getDrawable(context, R.drawable.divider)!!); // or: <View android:layout_width='match_parent' android:layout_height='1dp' android:background='#E0E0E0' /> // hardcoded; no theme; no inset support",Low,https://developer.android.com/reference/com/google/android/material/divider/MaterialDividerItemDecoration
XML Views,ExtendedFloatingActionButton,"Use ExtendedFloatingActionButton for primary actions that benefit from a text label alongside an icon. Extended FAB is wider than standard FAB and supports shrink/extend animations during scroll. Pair with CoordinatorLayout and app:layout_behavior for automatic scroll hiding. Use for the single most important action on screen.",ExtendedFloatingActionButton with icon and text; shrink on scroll via CoordinatorLayout behavior; extend when scroll stops,Use standard FAB with confusing icon-only for complex actions; or regular MaterialButton positioned as FAB,"<com.google.android.material.floatingactionbutton.ExtendedFloatingActionButton android:id='@+id/fab' android:layout_width='wrap_content' android:layout_height='wrap_content' android:layout_gravity='bottom|end' android:layout_margin='16dp' android:text='@string/compose' app:icon='@drawable/ic_edit' app:layout_behavior='com.google.android.material.behavior.HideBottomViewOnScrollBehavior' />; // Shrink on scroll: recyclerView.addOnScrollListener(object : OnScrollListener() { override fun onScrolled(rv: RecyclerView, dx: Int, dy: Int) { if (dy > 0) fab.shrink() else fab.extend() } })","// Icon-only FAB for unclear action: <FloatingActionButton app:srcCompat='@drawable/ic_add' /> // users don't know what 'add' means; // Or MaterialButton manually positioned: <MaterialButton style='@style/Widget.Material3.Button' android:layout_gravity='bottom|end' /> // no FAB elevation; no shrink/extend; wrong semantics",Low,https://developer.android.com/reference/com/google/android/material/floatingactionbutton/ExtendedFloatingActionButton
XML Views,Multi-Window and Foldable Support,"Design layouts that work in multi-window split-screen and on foldable devices. Set resizeableActivity=true (default for API 24+). Use WindowManager library to detect fold posture and hinge position. Test with different window sizes. Handle onMultiWindowModeChanged and onConfigurationChanged. Never assume full screen ownership.",Set resizeableActivity=true; handle onConfigurationChanged for screenSize|screenLayout|orientation; use Jetpack WindowManager for fold detection; test split-screen,Set resizeableActivity=false; assume full screen; use fixed dimensions; break on window resize; ignore foldable postures,"// AndroidManifest.xml: <activity android:name='.MainActivity' android:resizeableActivity='true' android:configChanges='screenSize|smallestScreenSize|screenLayout|orientation' />; // Detect fold: val windowInfoTracker = WindowInfoTracker.getOrCreate(this); lifecycleScope.launch { windowInfoTracker.windowLayoutInfo(this@MainActivity).collect { layoutInfo -> val foldingFeature = layoutInfo.displayFeatures.filterIsInstance<FoldingFeature>().firstOrNull(); if (foldingFeature?.state == FoldingFeature.State.HALF_OPENED) { adaptToTableTopMode() } } }","<activity android:resizeableActivity='false' /> // breaks multi-window on API 24+; <activity android:screenOrientation='portrait' /> // ignored in multi-window; // Fixed dimensions: android:layout_width='360dp' // breaks on resize; no fold detection; app crashes on split-screen",High,https://developer.android.com/guide/topics/large-screens/multi-window-support
XML Views,SlidingPaneLayout for Large Screens,"Use SlidingPaneLayout for list-detail patterns that show two panes side by side on tablets and foldables while overlapping on phones. SlidingPaneLayout automatically adapts to available width and respects foldable hinge positions. Set minimum widths on children and use layout_weight on detail pane. Integrate with Navigation component via AbstractListDetailFragment.",SlidingPaneLayout with minimum widths on children; layout_weight=1 on detail pane; OnBackPressedCallback for back navigation; no addToBackStack on detail transactions,FrameLayout with manual visibility toggling for list/detail; hardcode tablet detection with screen width checks,"<androidx.slidingpanelayout.widget.SlidingPaneLayout android:id='@+id/sliding_pane' android:layout_width='match_parent' android:layout_height='match_parent'><RecyclerView android:id='@+id/list_pane' android:layout_width='280dp' android:layout_height='match_parent' /><androidx.fragment.app.FragmentContainerView android:id='@+id/detail_pane' android:layout_width='300dp' android:layout_weight='1' android:layout_height='match_parent' /></androidx.slidingpanelayout.widget.SlidingPaneLayout>; // Back handling: val callback = TwoPaneOnBackPressedCallback(slidingPaneLayout); requireActivity().onBackPressedDispatcher.addCallback(viewLifecycleOwner, callback)","// Manual approach: if (resources.configuration.screenWidthDp >= 600) { listContainer.visibility = VISIBLE; detailContainer.visibility = VISIBLE } else { /* toggle visibility manually */ } // error-prone; no fold awareness; no automatic adaptation; complex back handling",Medium,https://developer.android.com/develop/ui/views/layout/twopane
XML Views,Layer-List Drawable,"Use layer-list drawable to stack multiple drawables into a composite background. Each item is drawn in order with the last item on top. Use for complex backgrounds combining shapes gradients icons. Supports offset positioning via left top right bottom attributes and gravity for alignment.",Define layer-list in res/drawable/ with ordered item elements; use offsets for positioning; combine shapes bitmaps and colors,Create complex backgrounds in code with multiple draw calls; use single shape drawable and lose composability,"<!-- res/drawable/badge_background.xml --> <layer-list xmlns:android='http://schemas.android.com/apk/res/android'><item><shape android:shape='oval'><solid android:color='@color/primary' /><size android:width='24dp' android:height='24dp' /></shape></item><item android:top='2dp' android:left='2dp' android:right='2dp' android:bottom='2dp'><shape android:shape='oval'><solid android:color='@color/surface' /></shape></item></layer-list>; <View android:background='@drawable/badge_background' />","// Programmatic: override fun onDraw(canvas: Canvas) { canvas.drawCircle(cx, cy, r, outerPaint); canvas.drawCircle(cx, cy, r-2, innerPaint) } // not reusable; can't apply via XML; custom view needed for simple decoration",Low,https://developer.android.com/guide/topics/resources/drawable-resource#LayerList
XML Views,Ripple Drawable for Touch Feedback,"Use ripple drawable for Material touch feedback. Wrap existing drawables in a ripple element. Use android:attr/selectableItemBackground for default bounded ripple and android:attr/selectableItemBackgroundBorderless for unbounded circular ripple. For custom ripple define explicit color and mask layer.",Use ripple drawable or ?attr/selectableItemBackground for interactive views; define mask layer for custom bounded ripple,Set custom background without ripple on clickable views; use setOnTouchListener for manual highlight; no touch feedback,"<!-- Custom ripple: --> <ripple xmlns:android='http://schemas.android.com/apk/res/android' android:color='?attr/colorControlHighlight'><item android:id='@android:id/mask'><shape android:shape='rectangle'><solid android:color='#FFFFFF' /><corners android:radius='12dp' /></shape></item><item><shape android:shape='rectangle'><solid android:color='@color/surface' /><corners android:radius='12dp' /></shape></item></ripple>; // Or simple: android:foreground='?attr/selectableItemBackground'","<Button android:background='@color/primary' /> // no ripple feedback; // Or: view.setOnTouchListener { v, event -> when (event.action) { ACTION_DOWN -> v.alpha = 0.5f; ACTION_UP -> v.alpha = 1f }; false } // janky; no ripple; accessibility issues; wrong approach",Medium,https://developer.android.com/guide/topics/resources/drawable-resource#RippleDrawable
XML Views,Shape Drawable with Gradient,"Use shape drawable with gradient element for smooth color transitions in backgrounds. Supports linear radial and sweep gradient types. Combine with corners element for rounded gradient backgrounds. Use angle attribute (must be multiple of 45) for linear gradient direction. Prefer XML gradients over programmatic GradientDrawable for reusability.",Define shape drawables with gradient in res/drawable/; use angle for direction; type for linear|radial|sweep; combine with corners and stroke,Create GradientDrawable programmatically for backgrounds that could be XML resources; hardcode gradient colors in code,"<!-- res/drawable/gradient_background.xml --> <shape xmlns:android='http://schemas.android.com/apk/res/android' android:shape='rectangle'><gradient android:startColor='@color/primary' android:centerColor='@color/primary_variant' android:endColor='@color/secondary' android:angle='135' android:type='linear' /><corners android:radius='16dp' /></shape>; <View android:background='@drawable/gradient_background' />","// Programmatic: val gradient = GradientDrawable(GradientDrawable.Orientation.TL_BR, intArrayOf(Color.parseColor('#6200EE'), Color.parseColor('#03DAC5'))); gradient.cornerRadius = 16f.dp; view.background = gradient // not reusable; hardcoded colors; can't reference in XML; duplicated across views",Low,https://developer.android.com/guide/topics/resources/drawable-resource#Shape
XML Views,Rotate and Animated-Rotate Drawables,"Use rotate drawable to apply fixed rotation to a drawable resource. Use animated-rotate for continuous rotation animation (loading spinners). The rotate drawable transforms at draw time without creating new bitmaps. Combine with vector drawables for resolution-independent rotating icons.",Use rotate/animated-rotate in res/drawable/ XML; set pivotX/Y to 50% for center rotation; fromDegrees/toDegrees for range; combine with vector drawables,Create ObjectAnimator on view rotation in code for simple spin effects; use GIF for loading spinners instead of XML rotation,"<!-- Loading spinner: res/drawable/spinning_loader.xml --> <animated-rotate xmlns:android='http://schemas.android.com/apk/res/android' android:drawable='@drawable/ic_loading' android:pivotX='50%' android:pivotY='50%' />; <!-- Fixed rotation: --> <rotate xmlns:android='http://schemas.android.com/apk/res/android' android:drawable='@drawable/ic_arrow' android:fromDegrees='0' android:toDegrees='180' android:pivotX='50%' android:pivotY='50%' />; <ProgressBar android:indeterminateDrawable='@drawable/spinning_loader' />","// Programmatic: val rotateAnim = ObjectAnimator.ofFloat(imageView, 'rotation', 0f, 360f); rotateAnim.repeatCount = INFINITE; rotateAnim.duration = 1000; rotateAnim.start() // needs manual lifecycle management; view reference leak risk; not reusable across layouts",Low,https://developer.android.com/guide/topics/resources/drawable-resource#Rotate
XML Views,Popup Menu XML,"Use PopupMenu with menu XML resource for contextual overflow actions anchored to a specific view. Define menu items in res/menu/ with icon title and showAsAction attributes. PopupMenu handles inflation positioning and dismissal automatically. Always handle click events via setOnMenuItemClickListener.",Define menu XML in res/menu/; inflate via PopupMenu; anchor to trigger view; handle clicks via setOnMenuItemClickListener,Build popup with custom AlertDialog or ListPopupWindow for simple menu scenarios; hardcode menu items in code,"<!-- res/menu/item_actions.xml --> <menu xmlns:android='http://schemas.android.com/apk/res/android'><item android:id='@+id/edit' android:icon='@drawable/ic_edit' android:title='@string/edit' /><item android:id='@+id/delete' android:icon='@drawable/ic_delete' android:title='@string/delete' /><item android:id='@+id/share' android:icon='@drawable/ic_share' android:title='@string/share' /></menu>; // Kotlin: val popup = PopupMenu(context, anchorView); popup.inflate(R.menu.item_actions); popup.setOnMenuItemClickListener { item -> when (item.itemId) { R.id.edit -> { editItem(); true }; R.id.delete -> { deleteItem(); true }; else -> false } }; popup.show()","// Custom dialog as menu: AlertDialog.Builder(context).setItems(arrayOf('Edit', 'Delete', 'Share')) { _, which -> when (which) { 0 -> edit(); 1 -> delete(); 2 -> share() } }.show() // no icons; no Material styling; not a proper popup; hardcoded strings; not anchored to view",Medium,https://developer.android.com/develop/ui/views/components/menus#PopupMenu
XML Views,Contextual Action Bar with Menu XML,"Use ActionMode with menu XML for contextual actions on selected items (multi-select delete share etc). ActionMode replaces the app bar temporarily showing contextual actions. Implement ActionMode.Callback to inflate menu handle clicks and clean up. Trigger via startActionMode on long press or selection change.",Implement ActionMode.Callback; inflate menu XML in onCreateActionMode; handle items in onActionItemClicked; finish ActionMode when done,Use custom toolbar that you show/hide manually for selection mode; or AlertDialog for batch actions,"// ActionMode.Callback: private val actionModeCallback = object : ActionMode.Callback { override fun onCreateActionMode(mode: ActionMode, menu: Menu): Boolean { mode.menuInflater.inflate(R.menu.contextual_actions, menu); mode.title = '1 selected'; return true }; override fun onActionItemClicked(mode: ActionMode, item: MenuItem): Boolean { return when (item.itemId) { R.id.action_delete -> { deleteSelected(); mode.finish(); true }; R.id.action_share -> { shareSelected(); mode.finish(); true }; else -> false } }; override fun onDestroyActionMode(mode: ActionMode) { clearSelection(); actionMode = null } }; // Start: actionMode = startSupportActionMode(actionModeCallback)","// Manual selection toolbar: selectionToolbar.visibility = if (selectedCount > 0) VISIBLE else GONE; mainToolbar.visibility = if (selectedCount > 0) GONE else VISIBLE // manual state management; animation issues; doesn't integrate with system back; complex lifecycle handling",Medium,https://developer.android.com/develop/ui/views/components/menus#CAB
XML Views,Bottom Navigation with Menu XML,"Define BottomNavigationView items via menu XML resource. Each menu item becomes a navigation tab with icon and label. Integrate with Navigation Component using setupWithNavController for automatic destination switching and selection state. Limit to 3-5 items per Material guidelines.",Define menu XML with 3-5 items; setupWithNavController for Navigation integration; use icon and title on each item,Create custom LinearLayout with ImageButtons for bottom navigation; more than 5 tabs; no Navigation integration,"<!-- res/menu/bottom_nav_menu.xml --> <menu xmlns:android='http://schemas.android.com/apk/res/android'><item android:id='@+id/homeFragment' android:icon='@drawable/ic_home' android:title='@string/home' /><item android:id='@+id/searchFragment' android:icon='@drawable/ic_search' android:title='@string/search' /><item android:id='@+id/profileFragment' android:icon='@drawable/ic_profile' android:title='@string/profile' /></menu>; // XML: <com.google.android.material.bottomnavigation.BottomNavigationView android:id='@+id/bottom_nav' app:menu='@menu/bottom_nav_menu' />; // Setup: bottomNav.setupWithNavController(navController)","// Custom bottom bar: <LinearLayout android:orientation='horizontal'><ImageButton android:src='@drawable/ic_home' android:onClick='goHome' /><ImageButton android:src='@drawable/ic_search' android:onClick='goSearch' /></LinearLayout> // no selection state; no badges; no Material styling; no label; not accessible; manual navigation",High,https://developer.android.com/develop/ui/views/components/menus
XML Views,PreferenceFragmentCompat Settings Screen,"Use PreferenceFragmentCompat with Preference XML to build settings screens. Define preference hierarchy in res/xml/preferences.xml with PreferenceScreen as root. PreferenceFragmentCompat handles UI rendering persistence to SharedPreferences and change callbacks automatically. Use PreferenceCategory for grouping.",Use PreferenceFragmentCompat; define hierarchy in res/xml/; unique key per preference; use categories for grouping; listen via OnPreferenceChangeListener,Build settings with custom RecyclerView adapter; manual SharedPreferences reads/writes for each setting; custom toggle views,"<!-- res/xml/settings.xml --> <PreferenceScreen xmlns:app='http://schemas.android.com/apk/res-auto'><PreferenceCategory app:title='@string/notifications_category'><SwitchPreferenceCompat app:key='notifications_enabled' app:title='@string/enable_notifications' app:summary='@string/notifications_summary' app:defaultValue='true' /><ListPreference app:key='notification_frequency' app:title='@string/frequency' app:entries='@array/frequency_labels' app:entryValues='@array/frequency_values' app:defaultValue='daily' /></PreferenceCategory></PreferenceScreen>; // Fragment: class SettingsFragment : PreferenceFragmentCompat() { override fun onCreatePreferences(saved: Bundle?, rootKey: String?) { setPreferencesFromResource(R.xml.settings, rootKey) } }","// Custom settings: class SettingsActivity : AppCompatActivity() { override fun onCreate(saved: Bundle?) { val switch = findViewById<Switch>(R.id.notif_switch); switch.isChecked = prefs.getBoolean('notifications', true); switch.setOnCheckedChangeListener { _, checked -> prefs.edit().putBoolean('notifications', checked).apply() } } } // manual for every setting; inconsistent UI; no grouping; boilerplate",Medium,https://developer.android.com/develop/ui/views/components/settings
XML Views,Shared Element Transitions,"Use shared element transitions to create visual continuity between screens by animating a shared view (image card title) from one Fragment/Activity to another. Define transitionName on shared views in both layouts. Use FragmentTransaction.addSharedElement or ActivityOptions.makeSceneTransitionAnimation. Combine with ChangeBounds and ChangeTransform.",Set android:transitionName on shared views in both layouts; use addSharedElement in FragmentTransaction; postponeEnterTransition until image loaded,Recreate views without transition animation; use fragment replace with no shared elements; hardcoded fade-only transitions,"<!-- list_item.xml --> <ImageView android:id='@+id/itemImage' android:transitionName='item_image_{id}' />; <!-- detail_fragment.xml --> <ImageView android:id='@+id/heroImage' android:transitionName='item_image_{id}' />; // Navigate: parentFragmentManager.commit { setReorderingAllowed(true); addSharedElement(imageView, 'item_image_42'); replace(R.id.container, DetailFragment()); addToBackStack(null) }; // Detail Fragment: override fun onCreate(saved: Bundle?) { sharedElementEnterTransition = TransitionInflater.from(requireContext()).inflateTransition(android.R.transition.move); postponeEnterTransition(); }; // After image loaded: startPostponedEnterTransition()","// No transition: parentFragmentManager.commit { replace(R.id.container, DetailFragment()) } // abrupt screen change; no visual continuity; poor UX; // Or: overridePendingTransition(R.anim.fade_in, R.anim.fade_out) // generic; image appears in new position without animation",Medium,https://developer.android.com/develop/ui/views/animations/transitions/start-activity
XML Views,Scene Transitions with TransitionManager,"Use TransitionManager with Scene objects for animated layout changes within a single screen. Define start and end layouts as separate XML files. TransitionManager.go() animates between scenes. Use beginDelayedTransition for in-place modifications without predefined scenes. Combine transitions with TransitionSet for complex effects.",Use TransitionManager.go(scene transition) for predefined layouts; beginDelayedTransition for in-place changes; TransitionSet for combined effects,Set view visibility and properties directly without animation; use ObjectAnimator chains for layout changes that TransitionManager handles better,"// Scene transition: val sceneRoot = findViewById<ViewGroup>(R.id.scene_root); val collapsedScene = Scene.getSceneForLayout(sceneRoot, R.layout.scene_collapsed, this); val expandedScene = Scene.getSceneForLayout(sceneRoot, R.layout.scene_expanded, this); val transition = TransitionSet().addTransition(ChangeBounds()).addTransition(Fade()).setDuration(300); TransitionManager.go(expandedScene, transition); // Delayed transition: TransitionManager.beginDelayedTransition(container, AutoTransition()); view.visibility = View.GONE // animates automatically","// No animation: view.visibility = View.GONE // abrupt; // Manual animation: ValueAnimator.ofInt(view.height, 0).apply { addUpdateListener { view.layoutParams.height = it.animatedValue as Int; view.requestLayout() } }.start() // complex; manual layout invalidation; doesn't handle other views moving",Medium,https://developer.android.com/develop/ui/views/animations/transitions
XML Views,TextInputLayout Error Handling,"Use TextInputLayout setError for inline validation with error messages that appear below the input field. Enable setErrorEnabled(true) before setting errors. Use setErrorIconDrawable for custom error icons. Pair with helper text for guidance. Error state automatically tints the border and label red following Material guidelines.",setErrorEnabled(true); setError(message) for validation; clear with setError(null); combine with helper text and character counter,Use Toast or Snackbar for form validation errors; manually color EditText border on error; custom error TextViews below each field,"<com.google.android.material.textfield.TextInputLayout android:id='@+id/emailLayout' android:layout_width='match_parent' android:layout_height='wrap_content' android:hint='@string/email' app:errorEnabled='true' app:helperText='@string/email_helper' app:helperTextEnabled='true' style='@style/Widget.Material3.TextInputLayout.OutlinedBox'><com.google.android.material.textfield.TextInputEditText android:layout_width='match_parent' android:layout_height='wrap_content' android:inputType='textEmailAddress' /></com.google.android.material.textfield.TextInputLayout>; // Validate: if (!isValidEmail(text)) { emailLayout.error = getString(R.string.invalid_email) } else { emailLayout.error = null }","// Toast for validation: if (!isValid) Toast.makeText(this, 'Invalid email', LENGTH_SHORT).show() // not inline; disappears; no visual connection to field; // Manual: emailEditText.setBackgroundTintList(ColorStateList.valueOf(Color.RED)) // doesn't show message; manual reset needed; not Material compliant",High,https://developer.android.com/reference/com/google/android/material/textfield/TextInputLayout
XML Views,TextInputLayout Character Counter,"Enable character counter on TextInputLayout to show current/max character count below the input. The counter automatically turns error color when the limit is exceeded. Combine with counterMaxLength for enforcement. Use for fields with length restrictions like usernames bios tweets.",Set app:counterEnabled='true' and app:counterMaxLength; counter auto-updates and shows error color on overflow,Implement custom TextWatcher to count characters and update a separate TextView; no visible limit indicator,"<com.google.android.material.textfield.TextInputLayout android:layout_width='match_parent' android:layout_height='wrap_content' android:hint='@string/bio' app:counterEnabled='true' app:counterMaxLength='280' app:counterOverflowTextAppearance='@style/CounterOverflow' style='@style/Widget.Material3.TextInputLayout.OutlinedBox'><com.google.android.material.textfield.TextInputEditText android:layout_width='match_parent' android:layout_height='wrap_content' android:inputType='textMultiLine' android:maxLines='4' /></com.google.android.material.textfield.TextInputLayout>","// Manual counter: editText.addTextChangedListener(object : TextWatcher { override fun afterTextChanged(s: Editable) { counterText.text = '${s.length}/280'; if (s.length > 280) counterText.setTextColor(Color.RED) } }) // boilerplate; doesn't integrate with TextInputLayout error state; manual color management",Low,https://developer.android.com/reference/com/google/android/material/textfield/TextInputLayout
XML Views,TextInputLayout End Icon Modes,"Use TextInputLayout end icon modes for common input patterns: PASSWORD_TOGGLE for password visibility CLEAR_TEXT for clearable inputs DROPDOWN_MENU for AutoCompleteTextView and CUSTOM for app-specific actions. End icons are positioned consistently and handle accessibility automatically.",Set app:endIconMode for built-in modes; use END_ICON_CUSTOM with endIconDrawable and endIconContentDescription for custom actions,Manually add ImageButton inside TextInputLayout; create custom toggle for password visibility; manual clear button with TextWatcher,"<!-- Password toggle: --> <com.google.android.material.textfield.TextInputLayout app:endIconMode='passwordToggle' android:hint='@string/password'><com.google.android.material.textfield.TextInputEditText android:inputType='textPassword' /></com.google.android.material.textfield.TextInputLayout>; <!-- Clear text: --> <com.google.android.material.textfield.TextInputLayout app:endIconMode='clear_text' android:hint='@string/search'><com.google.android.material.textfield.TextInputEditText /></com.google.android.material.textfield.TextInputLayout>; <!-- Dropdown: --> <com.google.android.material.textfield.TextInputLayout app:endIconMode='dropdown_menu' android:hint='@string/category'><AutoCompleteTextView android:layout_width='match_parent' android:layout_height='wrap_content' /></com.google.android.material.textfield.TextInputLayout>","// Manual password toggle: <LinearLayout><EditText android:inputType='textPassword' /><ImageButton android:src='@drawable/ic_visibility' android:onClick='togglePasswordVisibility' /></LinearLayout> // not accessible; manual state management; not inside TextInputLayout; inconsistent positioning",Medium,https://developer.android.com/reference/com/google/android/material/textfield/TextInputLayout
XML Views,BottomSheetBehavior Persistent,"Implement persistent bottom sheet using BottomSheetBehavior attached to a CoordinatorLayout child. Configure peekHeight for collapsed state. Use STATE_COLLAPSED STATE_EXPANDED STATE_HALF_EXPANDED for multi-stage expansion. Add BottomSheetCallback for state change tracking. Use fitToContents=false to enable half-expanded state.",Attach BottomSheetBehavior via app:layout_behavior; set app:behavior_peekHeight; use BottomSheetCallback for state tracking; fitToContents=false for half-expanded,Create custom sliding panel with translation animations; use Dialog for content that should be persistent bottom sheet,"<androidx.coordinatorlayout.widget.CoordinatorLayout android:layout_width='match_parent' android:layout_height='match_parent'><RecyclerView android:id='@+id/mainContent' android:layout_width='match_parent' android:layout_height='match_parent' /><LinearLayout android:id='@+id/bottomSheet' android:layout_width='match_parent' android:layout_height='match_parent' app:layout_behavior='com.google.android.material.bottomsheet.BottomSheetBehavior' app:behavior_peekHeight='80dp' app:behavior_hideable='true' app:behavior_fitToContents='false' app:behavior_halfExpandedRatio='0.5'><include layout='@layout/bottom_sheet_content' /></LinearLayout></androidx.coordinatorlayout.widget.CoordinatorLayout>; // Callback: BottomSheetBehavior.from(bottomSheet).addBottomSheetCallback(object : BottomSheetCallback() { override fun onStateChanged(view: View, state: Int) { when (state) { STATE_EXPANDED -> handleExpanded(); STATE_HALF_EXPANDED -> handleHalf(); STATE_COLLAPSED -> handleCollapsed() } } })","// Custom sliding: view.animate().translationY(peekHeight).start(); // Or Dialog for persistent content: BottomSheetDialog(context).show() // dialog is modal not persistent; loses state on dismiss; can't interact with content behind it; wrong component choice",High,https://developer.android.com/reference/com/google/android/material/bottomsheet/BottomSheetBehavior
XML Views,Modal vs Persistent BottomSheet,"Use BottomSheetDialogFragment for modal bottom sheets that overlay content and dim the background. Use BottomSheetBehavior on a CoordinatorLayout child for persistent sheets that coexist with main content. Modal sheets are for choices and confirmations. Persistent sheets are for supplementary content that users access while interacting with the main UI.",BottomSheetDialogFragment for modal choices; BottomSheetBehavior for persistent supplementary content; do not mix the two patterns,Use Dialog or AlertDialog styled as bottom sheet; use BottomSheetBehavior when content should be modal; use BottomSheetDialogFragment for always-visible content,"// Modal: class FilterSheet : BottomSheetDialogFragment() { override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, saved: Bundle?) = inflater.inflate(R.layout.sheet_filter, container, false); companion object { fun newInstance() = FilterSheet() } }; filterSheet.show(supportFragmentManager, 'filter'); // Persistent: see BottomSheetBehavior entry - content alongside main UI","// Wrong: BottomSheetDialog for persistent content that user needs while browsing = dialog blocks interaction; // Wrong: BottomSheetBehavior for one-time selection = sheet stays visible when it shouldn't; confuses users; // Dialog styled as sheet: Dialog(context, R.style.BottomSheet) // not accessible; no drag; no states",Medium,https://developer.android.com/reference/com/google/android/material/bottomsheet/BottomSheetDialogFragment
XML Views,BottomSheet Half-Expanded State,"Enable half-expanded state on BottomSheetBehavior by setting fitToContents=false. Configure halfExpandedRatio (0-1) to control the mid-point height. This creates a three-stage sheet: collapsed half-expanded and fully expanded. Users can drag between stages. Useful for maps music players and content that benefits from progressive disclosure.",Set app:behavior_fitToContents='false'; set app:behavior_halfExpandedRatio='0.5'; handle STATE_HALF_EXPANDED in callback,Force fitToContents=true losing half-expanded; or manually animate to arbitrary heights ignoring BottomSheetBehavior states,"val behavior = BottomSheetBehavior.from(bottomSheet); behavior.isFitToContents = false; behavior.halfExpandedRatio = 0.6f; // 60% of parent height; behavior.state = BottomSheetBehavior.STATE_HALF_EXPANDED; // Start at half; behavior.addBottomSheetCallback(object : BottomSheetCallback() { override fun onStateChanged(view: View, state: Int) { when (state) { STATE_HALF_EXPANDED -> showPartialContent(); STATE_EXPANDED -> showFullContent(); STATE_COLLAPSED -> showPeekContent() } }; override fun onSlide(view: View, offset: Float) { /* animate based on offset */ } })","// Manual half-expanded: val halfHeight = parentHeight * 0.6; bottomSheet.animate().translationY(halfHeight).start() // no snapping to states; no drag support; manual gesture detection needed; // Or: behavior.fitToContents = true // skips half-expanded; jumps from collapsed to full; no intermediate state for progressive disclosure",Medium,https://developer.android.com/reference/com/google/android/material/bottomsheet/BottomSheetBehavior
XML Views,Filter Chips with ChipGroup,"Use Chip with style Widget.Material3.Chip.Filter inside a ChipGroup for multi-select filtering. Filter chips toggle on/off showing a checkmark when selected. Use ChipGroup with app:singleSelection='false' for multi-select or 'true' for single-select. Listen to checked state changes via setOnCheckedStateChangeListener.",Use Chip.Filter style in ChipGroup; handle selection via setOnCheckedStateChangeListener; use app:checkedIcon for selected indicator,Use CheckBoxes or ToggleButtons for filter UI; custom view group with manual selection tracking,"<com.google.android.material.chip.ChipGroup android:id='@+id/filterChipGroup' android:layout_width='match_parent' android:layout_height='wrap_content' app:singleLine='false' app:chipSpacingHorizontal='8dp'><com.google.android.material.chip.Chip android:id='@+id/chipVegetarian' style='@style/Widget.Material3.Chip.Filter' android:text='@string/vegetarian' /><com.google.android.material.chip.Chip android:id='@+id/chipVegan' style='@style/Widget.Material3.Chip.Filter' android:text='@string/vegan' /><com.google.android.material.chip.Chip android:id='@+id/chipGlutenFree' style='@style/Widget.Material3.Chip.Filter' android:text='@string/gluten_free' /></com.google.android.material.chip.ChipGroup>; // Listen: chipGroup.setOnCheckedStateChangeListener { group, checkedIds -> applyFilters(checkedIds) }","// CheckBoxes for filters: <LinearLayout><CheckBox android:text='Vegetarian' /><CheckBox android:text='Vegan' /></LinearLayout> // not Material styled; no chip appearance; no close icon support; inconsistent with Material guidelines; more space used",Medium,https://developer.android.com/reference/com/google/android/material/chip/ChipGroup
XML Views,Action and Entry Chips,"Use Chip with style Widget.Material3.Chip.Assist for action chips that trigger contextual actions and Widget.Material3.Chip.Input for entry/input chips representing user-provided entities (contacts tags). Input chips support close icon for removal via setOnCloseIconClickListener. Ensure minimum 48dp touch target with app:ensureMinTouchTargetSize.",Use correct Chip style per purpose: Assist for actions Input for removable entities; set closeIconVisible on input chips; handle close icon clicks; 48dp touch target,Use single generic Chip style for all purposes; no close icon on removable chips; ignore touch target size for accessibility,"<!-- Action chip: --> <com.google.android.material.chip.Chip style='@style/Widget.Material3.Chip.Assist' android:text='@string/share' app:chipIcon='@drawable/ic_share' app:ensureMinTouchTargetSize='true' />; <!-- Entry/Input chip: --> <com.google.android.material.chip.Chip android:id='@+id/chipTag' style='@style/Widget.Material3.Chip.Input' android:text='Kotlin' app:closeIconVisible='true' app:ensureMinTouchTargetSize='true' />; // Remove on close: chipTag.setOnCloseIconClickListener { chipGroup.removeView(it) }","// Generic chip for everything: <com.google.android.material.chip.Chip android:text='Share' /> // wrong style; no icon; no close button on removable items; // Or custom view: <LinearLayout><TextView android:text='Kotlin' /><ImageView android:src='@drawable/ic_close' /></LinearLayout> // not accessible; no ripple; no Material styling; manual layout",Medium,https://developer.android.com/reference/com/google/android/material/chip/Chip
XML Views,Chip Single Selection as Choice Chips,"Use ChipGroup with app:singleSelection='true' and Chip style Widget.Material3.Chip.Filter for single-choice selection similar to radio buttons but with Material chip appearance. Use app:selectionRequired='true' to prevent deselecting all chips. Get selected chip via chipGroup.checkedChipId.",ChipGroup with singleSelection=true and selectionRequired=true for mandatory single choice; use checkedChipId to get selection,Use RadioGroup for choices that fit chip UX better; no selectionRequired allowing empty selection when one is required,"<com.google.android.material.chip.ChipGroup android:id='@+id/sizeChipGroup' android:layout_width='wrap_content' android:layout_height='wrap_content' app:singleSelection='true' app:selectionRequired='true' app:chipSpacingHorizontal='8dp'><com.google.android.material.chip.Chip android:id='@+id/chipSmall' style='@style/Widget.Material3.Chip.Filter' android:text='@string/small' /><com.google.android.material.chip.Chip android:id='@+id/chipMedium' style='@style/Widget.Material3.Chip.Filter' android:text='@string/medium' android:checked='true' /><com.google.android.material.chip.Chip android:id='@+id/chipLarge' style='@style/Widget.Material3.Chip.Filter' android:text='@string/large' /></com.google.android.material.chip.ChipGroup>; // Get selection: val selectedSize = sizeChipGroup.checkedChipId","// RadioGroup when chips better: <RadioGroup><RadioButton android:text='Small' /><RadioButton android:text='Medium' /><RadioButton android:text='Large' /></RadioGroup> // takes more vertical space; less modern; no horizontal wrapping; // Or singleSelection without selectionRequired: user can deselect all options leaving invalid empty state",Low,https://developer.android.com/reference/com/google/android/material/chip/ChipGroup
XML Views,TextInputLayout Prefix and Suffix,"Use TextInputLayout prefixText and suffixText to display static text before or after user input. Common uses: currency symbols ($ EUR) URL prefixes (https://) unit suffixes (kg km). Prefix and suffix are separate from the input value and provide visual context without affecting the entered text.",Set app:prefixText or app:suffixText on TextInputLayout; style with prefixTextAppearance/suffixTextAppearance; keep prefix/suffix short,Concatenate prefix/suffix into EditText text making it part of the editable value; use separate TextView alongside EditText for units,"<com.google.android.material.textfield.TextInputLayout android:layout_width='match_parent' android:layout_height='wrap_content' android:hint='@string/price' app:prefixText='$' app:prefixTextAppearance='@style/PrefixStyle' style='@style/Widget.Material3.TextInputLayout.OutlinedBox'><com.google.android.material.textfield.TextInputEditText android:layout_width='match_parent' android:layout_height='wrap_content' android:inputType='numberDecimal' /></com.google.android.material.textfield.TextInputLayout>; // Suffix: app:suffixText='kg'","// Prefix in EditText: editText.setText('$ '); editText.setSelection(2) // user can delete prefix; prefix is part of value; parsing issues; // Or: <LinearLayout><TextView android:text='$' /><EditText /></LinearLayout> // not aligned with TextInputLayout; no floating label; inconsistent styling",Low,https://developer.android.com/reference/com/google/android/material/textfield/TextInputLayout
XML Views,Preference Nested Screens,"Use PreferenceScreen inside another PreferenceScreen to create nested settings pages. Tapping a PreferenceScreen item navigates to a sub-screen of settings. Organize complex settings into categories (General Notifications Privacy) with nested screens for each. Use app:fragment attribute to navigate to a dedicated PreferenceFragmentCompat.",Use nested PreferenceScreen elements or app:fragment for sub-settings screens; organize by category; provide icon and summary for each screen link,Put all 50+ preferences in a single flat list; use Activity navigation for settings sub-pages,"<!-- res/xml/settings.xml --> <PreferenceScreen xmlns:app='http://schemas.android.com/apk/res-auto'><Preference app:key='notifications_settings' app:title='@string/notifications' app:summary='@string/notifications_summary' app:icon='@drawable/ic_notifications' app:fragment='com.app.NotificationSettingsFragment' /><Preference app:key='privacy_settings' app:title='@string/privacy' app:summary='@string/privacy_summary' app:icon='@drawable/ic_privacy' app:fragment='com.app.PrivacySettingsFragment' /></PreferenceScreen>; // NotificationSettingsFragment has its own res/xml/notification_preferences.xml","// All settings in one screen: <PreferenceScreen><SwitchPreference key='notif_enabled' /><SwitchPreference key='notif_sound' /><SwitchPreference key='notif_vibrate' /><ListPreference key='theme' /><SwitchPreference key='analytics' /><EditTextPreference key='username' /><!-- 40 more preferences --></PreferenceScreen> // overwhelming; no organization; users can't find settings",Medium,https://developer.android.com/develop/ui/views/components/settings/organize-your-settings
XML Views,Transition XML Resources,"Define transitions in res/transition/ XML files for reuse across the app. Combine multiple transitions with transitionSet. Supports fade changeBounds slide explode and custom transitions. Reference in code via TransitionInflater or in theme attributes. Separating transition definitions from code improves maintainability.",Define transitions in res/transition/ XML; use transitionSet for combined effects; load via TransitionInflater; reference in styles,Hardcode transition objects in every Activity/Fragment; duplicate transition configurations across codebase,"<!-- res/transition/shared_element_transition.xml --> <transitionSet xmlns:android='http://schemas.android.com/apk/res/android' android:transitionOrdering='together' android:duration='300' android:interpolator='@android:interpolator/fast_out_slow_in'><changeBounds /><changeTransform /><changeClipBounds /><changeImageTransform /></transitionSet>; // Load: val transition = TransitionInflater.from(context).inflateTransition(R.transition.shared_element_transition); sharedElementEnterTransition = transition","// Hardcoded in every Fragment: sharedElementEnterTransition = TransitionSet().addTransition(ChangeBounds()).addTransition(ChangeTransform()).setDuration(300).setInterpolator(FastOutSlowInInterpolator()) // duplicated in 10 fragments; inconsistent durations; hard to maintain; change requires editing everywhere",Low,https://developer.android.com/develop/ui/views/animations/transitions
Accessibility,Traversal Order,"Control TalkBack reading order using accessibilityTraversalBefore/After in XML Views or isTraversalGroup and traversalIndex in Compose. Default order follows layout position (top-to-bottom left-to-right). Override when visual layout differs from logical reading order such as FABs overlapping content or custom card layouts.",Set accessibilityTraversalBefore/After for custom reading order; use isTraversalGroup to create traversal groups in Compose; use traversalIndex for fine ordering,Rely on default order when it mismatches logical flow; ignore traversal on overlapping views like FABs,"<!-- XML Views: --> <TextView android:id='@+id/title' android:accessibilityTraversalBefore='@+id/subtitle' />; <TextView android:id='@+id/subtitle' android:accessibilityTraversalAfter='@+id/title' />; // Compose: Box(Modifier.semantics { isTraversalGroup = true }) { Text('First', Modifier.semantics { traversalIndex = 1f }); Text('Second', Modifier.semantics { traversalIndex = 2f }) }","// No traversal control: overlapping FAB reads before content beneath it; cards read in wrong order due to ConstraintLayout positioning; TalkBack users hear illogical sequence",High,https://developer.android.com/develop/ui/compose/accessibility#traversal-order
Accessibility,Live Regions,"Use accessibilityLiveRegion to announce dynamic content updates automatically via TalkBack. POLITE waits for current speech to finish; ASSERTIVE interrupts immediately. Apply to views that update without user interaction: timers counters status messages loading indicators. In Compose use Modifier.semantics { liveRegion = LiveRegionMode.Polite }.",Set accessibilityLiveRegion=polite on dynamic text (counters timers status); use ASSERTIVE for urgent alerts only; update text content to trigger announcement,No liveRegion on dynamic content; TalkBack users miss status updates; use ASSERTIVE for everything causing speech interruption,"<!-- XML Views: --> <TextView android:id='@+id/statusText' android:accessibilityLiveRegion='polite' />; // Update triggers TalkBack announcement: statusText.text = '3 items in cart'; // Compose: Text(text = '$count items', modifier = Modifier.semantics { liveRegion = LiveRegionMode.Polite })","// No live region: <TextView android:id='@+id/statusText' /> // statusText.text = '3 items in cart' -- TalkBack says nothing; user unaware of change",High,https://developer.android.com/reference/android/view/View#setAccessibilityLiveRegion(int)
Accessibility,Touch Target Size XML Views,"Ensure all interactive XML View elements have minimum 48dp x 48dp touch target. Use android:minWidth and android:minHeight or increase padding to expand touch area beyond visual bounds. Material components handle this automatically. For small icons wrap in a clickable container with 48dp minimum dimensions.",Set android:minWidth='48dp' android:minHeight='48dp' on interactive views; use TouchDelegate to expand touch area; wrap small icons in 48dp clickable container,Interactive elements smaller than 48dp; icon buttons with no minimum size; relying on visual size alone,"<ImageButton android:layout_width='wrap_content' android:layout_height='wrap_content' android:minWidth='48dp' android:minHeight='48dp' android:src='@drawable/ic_close' android:padding='12dp' android:background='?attr/selectableItemBackgroundBorderless' android:contentDescription='@string/close' />","<ImageButton android:layout_width='24dp' android:layout_height='24dp' android:src='@drawable/ic_close' /> // 24dp touch target; difficult to tap; fails accessibility audit",High,https://developer.android.com/guide/topics/ui/accessibility/apps
Accessibility,Custom Accessibility Actions,"Add custom accessibility actions using ViewCompat.addAccessibilityAction() in XML Views or customActions in Compose semantics. Replaces swipe-based gestures with labeled actions in TalkBack context menu. Essential for list items with multiple actions (delete archive pin) and swipe-to-dismiss patterns.",Use ViewCompat.addAccessibilityAction for each action on list items; provide clear action labels; replace swipe gestures with named actions in Compose customActions,Rely on swipe gestures only which TalkBack users cannot perform; no alternative actions for drag-and-drop or swipe-to-dismiss,"// XML Views: ViewCompat.addAccessibilityAction(itemView, 'Delete') { _, _ -> deleteItem(item); true }; ViewCompat.addAccessibilityAction(itemView, 'Archive') { _, _ -> archiveItem(item); true }; // Compose: Modifier.semantics { customActions = listOf(CustomAccessibilityAction('Delete') { deleteItem(); true }, CustomAccessibilityAction('Archive') { archiveItem(); true }) }","// Only swipe gesture: ItemTouchHelper.SimpleCallback for swipe-to-delete with no accessibility alternative; TalkBack users cannot delete items; // Or: no custom actions on list item with 3 icon buttons; TalkBack reads each button separately instead of grouping",High,https://developer.android.com/guide/topics/ui/accessibility/principles
Accessibility,Focus Management,"Manage accessibility focus using requestFocus() in Views and FocusRequester in Compose. Move focus to important content after navigation or significant UI changes. After showing an error move focus to the error field. After removing an item move focus to the next item. Use nextFocusDown/Up/Left/Right in XML for directional navigation.",Use requestFocus() after error; move focus to next item after deletion; use FocusRequester for programmatic focus in Compose; set nextFocus* attributes for D-pad,No focus management after state changes; focus lost after item deletion; user stranded on invisible element,"// XML Views: binding.emailInput.requestFocus(); binding.emailInput.sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_FOCUSED); // Compose: val focusRequester = remember { FocusRequester() }; TextField(modifier = Modifier.focusRequester(focusRequester)); LaunchedEffect(hasError) { if (hasError) focusRequester.requestFocus() }","// No focus management: after deleting item 3 of 5 focus goes to random view; after showing error focus stays at bottom of form; user must navigate back to find error",High,https://developer.android.com/guide/topics/ui/accessibility/principles
Accessibility,Semantic Grouping,"Group related views into single TalkBack-focusable units using android:screenReaderFocusable on containers in XML Views or Modifier.semantics(mergeDescendants = true) in Compose. A card with title subtitle and icon should be read as one unit not three separate elements. Reduces swipe count and provides coherent information.",Set android:screenReaderFocusable='true' on card/row containers; use semantics(mergeDescendants = true) in Compose; set contentDescription on container if merged text is insufficient,Each child element separately focusable in a card; TalkBack reads icon title subtitle as three items; excessive swipe count in lists,"<!-- XML Views: --> <LinearLayout android:screenReaderFocusable='true' android:focusable='true' android:contentDescription='@string/card_description'><ImageView android:importantForAccessibility='no' /><TextView android:text='Title' /><TextView android:text='Subtitle' /></LinearLayout>; // Compose: Row(Modifier.semantics(mergeDescendants = true) { }) { Icon(icon, null); Column { Text(title); Text(subtitle) } }","// Each element separate: <LinearLayout><ImageView android:contentDescription='Profile icon' /><TextView android:text='John Doe' /><TextView android:text='Software Engineer' /></LinearLayout> // TalkBack: swipe1='Profile icon' swipe2='John Doe' swipe3='Software Engineer' instead of single coherent announcement",High,https://developer.android.com/guide/topics/ui/accessibility/principles
Accessibility,Pane Titles,"Set accessibilityPaneTitle on container views that represent distinct content panes (fragments panels side sheets). When the pane title changes TalkBack automatically announces the new pane. In Compose use Modifier.semantics { paneTitle = title }. Essential for single-Activity multi-fragment architectures.",Set android:accessibilityPaneTitle on fragment root views and panel containers; update paneTitle when content changes; use in Compose semantics,No pane titles; TalkBack users unaware when fragment changes; no announcement of screen transitions in single-Activity apps,"<!-- XML Views: --> <FrameLayout android:accessibilityPaneTitle='@string/settings_screen' android:layout_width='match_parent' android:layout_height='match_parent'><!-- fragment content --></FrameLayout>; // Compose: Column(Modifier.semantics { paneTitle = 'Settings' }) { /* screen content */ }","// No pane title: fragment replaces content but TalkBack gives no indication that screen changed; user must explore to discover new content",Medium,https://developer.android.com/guide/topics/ui/accessibility/principles
Accessibility,Switch Access Compatibility,"Ensure all interactive elements work with Switch Access by using standard focusable and clickable widgets. Switch Access scans the screen highlighting focusable elements sequentially. Non-standard custom views must be explicitly focusable and clickable. Handle both DPAD_CENTER and ENTER key events for selection.",Use standard Android widgets (Button CheckBox Switch); make custom interactive views focusable='true' and clickable='true'; handle KEYCODE_DPAD_CENTER and KEYCODE_ENTER,Touch-only interactions without button alternatives; custom gesture-only navigation; non-interactive elements marked focusable (clutter scan),"<Button android:id='@+id/btnSubmit' android:layout_width='match_parent' android:layout_height='wrap_content' android:minHeight='48dp' android:text='@string/submit' />; <com.app.CustomRating android:layout_width='wrap_content' android:layout_height='48dp' android:focusable='true' android:clickable='true' android:contentDescription='@string/rate_this_item' />","// Touch-only: custom gesture view with no focusable or clickable; Switch Access cannot select it; user cannot interact without touch; // Non-interactive focusable: <TextView android:focusable='true' android:text='Label' /> clutters Switch Access scan",High,https://developer.android.com/guide/topics/ui/accessibility/testing
Accessibility,Keyboard Navigation,"Support external keyboard navigation with proper imeOptions nextFocusDown/Up/Left/Right attributes and Escape key handling. Test with physical keyboard connected. Ensure Tab/Shift-Tab moves focus logically. Handle keyboard shortcuts. In Compose use focusProperties { next/previous } for custom focus chains.",Set imeOptions for keyboard action button; define nextFocus* when default tab order is wrong; handle Escape to dismiss dialogs; test with physical keyboard,Assume all users interact via touch; ignore keyboard event handling; create focus traps where Tab cannot exit a container,"<EditText android:id='@+id/inputName' android:imeOptions='actionNext' android:nextFocusDown='@+id/inputEmail' android:nextFocusForward='@+id/inputEmail' />; <EditText android:id='@+id/inputEmail' android:imeOptions='actionNext' android:nextFocusDown='@+id/inputMessage' />; <EditText android:id='@+id/inputMessage' android:imeOptions='actionDone' android:nextFocusDown='@+id/btnSend' />","// No keyboard nav: <EditText android:imeOptions='actionDone' /> on every field; Tab order random; no nextFocus*; Escape doesn't dismiss bottom sheet; focus trapped in dialog",Medium,https://developer.android.com/guide/topics/ui/accessibility/testing
Accessibility,Espresso Accessibility Checks,"Enable automated accessibility checks in Espresso UI tests with AccessibilityChecks.enable(). Every ViewAction automatically validates the target view against the Accessibility Test Framework catching missing content descriptions small touch targets and low contrast. Use setRunChecksFromRootView(true) to check entire screen.",Enable AccessibilityChecks.enable() in test init or @BeforeClass; setRunChecksFromRootView(true); use setSuppressingResultMatcher for known issues narrowly; run in CI,Skip accessibility checks in tests; broadly suppress all failures; rely only on manual testing,"@RunWith(AndroidJUnit4::class) class LoginA11yTest { init { AccessibilityChecks.enable().apply { setRunChecksFromRootView(true) } }; @get:Rule val rule = ActivityScenarioRule(LoginActivity::class.java); @Test fun loginScreen_passes() { onView(withId(R.id.username)).perform(typeText('test')); onView(withId(R.id.btnLogin)).perform(click()) } }","// No accessibility checks: @Test fun loginWorks() { onView(withId(R.id.btnLogin)).perform(click()) } // accessibility issues ship to production undetected",High,https://developer.android.com/guide/topics/ui/accessibility/testing
Accessibility,stateDescription,"Use stateDescription (API 30+ / AndroidX) to provide custom text for a view's current state instead of default ON/OFF. Essential for custom toggles with non-binary states (subscribed/unsubscribed priority levels). Update stateDescription whenever state changes. In Compose use stateDescription in semantics modifier.",Use ViewCompat.setStateDescription for custom toggle states; update on state change; use stateDescription in Compose semantics for non-binary states,Override stateDescription on standard widgets unless default is misleading; set stateDescription to repeat contentDescription,"// XML Views: ViewCompat.setStateDescription(binding.subscribeToggle, if (isSubscribed) getString(R.string.subscribed) else getString(R.string.not_subscribed)); // TalkBack: 'Subscribe Subscribed' instead of 'Subscribe ON'; // Compose: Modifier.semantics { stateDescription = if (selected) 'Subscribed' else 'Not subscribed' }","// No stateDescription: binding.subscribeToggle.isChecked = isSubscribed; // TalkBack says generic 'ON'/'OFF' for subscribe toggle which is confusing to users",Medium,https://developer.android.com/reference/android/view/View#setStateDescription(java.lang.CharSequence)
Accessibility,announceForAccessibility,"Use View.announceForAccessibility() for one-time transient announcements (item deleted 3 results found upload complete). Keep announcements brief. For persistent dynamic content use Live Regions instead. In Compose access via LocalView.current.announceForAccessibility().",Use announceForAccessibility for transient action confirmations and search result counts; keep brief; prefer Live Regions for persistent dynamic content,Use announceForAccessibility for content with visible UI elements (use Live Region); flood with announcements on rapid state changes,"// After delete: binding.root.announceForAccessibility(getString(R.string.item_deleted_announcement, itemName)); // After search: binding.root.announceForAccessibility(resources.getQuantityString(R.plurals.search_results_count, results.size, results.size))","// No announcement: adapter.removeItem(item); showSnackbar('Item deleted'); // Snackbar may not be announced by TalkBack; user unaware of action result",Medium,https://developer.android.com/reference/android/view/View#announceForAccessibility(java.lang.CharSequence)
Accessibility,sp Units for Text Sizes,"Always use sp (scale-independent pixels) for text sizes in XML Views and TextUnit.Sp in Compose. The sp unit respects user's system font size preference (up to 200% scaling). Test app at largest font setting. Use wrap_content or flexible heights for text containers. Extract text sizes to dimens.xml.",Use sp for all text sizes; test at 200% font scaling; use wrap_content for text container heights; extract to dimens.xml,Use dp for text sizes (ignores user font preferences); fixed-height containers that clip scaled text; hardcode text sizes in code,"<TextView android:layout_width='match_parent' android:layout_height='wrap_content' android:textSize='16sp' />; <!-- dimens.xml: --> <dimen name='text_body'>16sp</dimen>; // Compose: Text(text = 'Body', fontSize = 16.sp)","<TextView android:textSize='16dp' android:text='Will not scale' /> // dp ignores font scaling; inaccessible for low vision users; // Compose: Text(fontSize = 16.dp.value.sp) // defeats scaling",Critical,https://developer.android.com/guide/topics/ui/accessibility/apps
Accessibility,Autosizing TextViews,"Use autoSizeTextType=uniform to automatically shrink or grow TextView text to fit fixed bounds. Set autoSizeMinTextSize to prevent unreadably small text (minimum 12sp). Requires match_parent or fixed dimensions NOT wrap_content. Use granularity or preset sizes for fine control. Support library available for API 14+.",Use autoSizeTextType=uniform with autoSizeMinTextSize of 12sp minimum; use match_parent or fixed dimensions; use granularity for fine control,Use wrap_content with autosize (undefined behavior); no minimum size allowing text to shrink to 1px; autosize on all text instead of specific containers,"<TextView android:layout_width='match_parent' android:layout_height='200dp' android:autoSizeTextType='uniform' android:autoSizeMinTextSize='12sp' android:autoSizeMaxTextSize='100sp' android:autoSizeStepGranularity='2sp' />","<TextView android:layout_width='wrap_content' android:layout_height='wrap_content' android:autoSizeTextType='uniform' /> // wrap_content + autosize = undefined behavior; no min size = text can shrink to 1px",Medium,https://developer.android.com/guide/topics/ui/look-and-feel/autosizing-textview
Edge-to-Edge,enableEdgeToEdge Setup,"Call enableEdgeToEdge() from androidx.activity in onCreate before setContentView. This makes your app draw behind system bars with transparent status and navigation bars. Then handle window insets using ViewCompat.setOnApplyWindowInsetsListener in Views or Scaffold innerPadding in Compose. Required for API 35+ targeting.",Call enableEdgeToEdge() in onCreate before setContentView; handle insets via ViewCompat.setOnApplyWindowInsetsListener or Scaffold; use WindowInsetsCompat.Type.systemBars(),No enableEdgeToEdge(); use deprecated window.statusBarColor or window.navigationBarColor; ignore insets causing content behind bars,"// Views: override fun onCreate(saved: Bundle?) { super.onCreate(saved); enableEdgeToEdge(); setContentView(R.layout.main); ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main)) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars()); v.setPadding(bars.left, bars.top, bars.right, bars.bottom); insets } }; // Compose: enableEdgeToEdge(); setContent { Scaffold { innerPadding -> Content(Modifier.padding(innerPadding)) } }","// No edge-to-edge: setContentView(R.layout.main); window.statusBarColor = Color.BLUE; // deprecated and ignored on API 35+; content hidden behind bars",Critical,https://developer.android.com/develop/ui/views/layout/edge-to-edge
Edge-to-Edge,WindowInsets Padding vs Margin,"Apply insets as padding for scrollable containers (RecyclerView ScrollView) where content should avoid system bars but the view fills the screen. Apply insets as margin for floating views (FAB standalone buttons) that should reposition away from system bars. Set clipToPadding=false on scrollable views for seamless scroll behind bars.",Use padding for scrollable containers with clipToPadding=false; use margin for FABs and floating views; combine systemBars() and displayCutout(); handle left/right for landscape,Use fitsSystemWindows=true as blanket fix (incomplete); hardcode system bar heights; forget left/right insets for landscape and foldables,"// Padding for RecyclerView: recyclerView.clipToPadding = false; ViewCompat.setOnApplyWindowInsetsListener(recyclerView) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars() or WindowInsetsCompat.Type.displayCutout()); v.updatePadding(left = bars.left, top = bars.top, right = bars.right, bottom = bars.bottom); WindowInsetsCompat.CONSUMED }; // Margin for FAB: ViewCompat.setOnApplyWindowInsetsListener(fab) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars()); v.updateLayoutParams<MarginLayoutParams> { bottomMargin = bars.bottom; rightMargin = bars.right }; WindowInsetsCompat.CONSUMED }","// Blanket fix: <LinearLayout android:fitsSystemWindows='true' /> // only top padding; no cutout or landscape handling; // Hardcoded: view.setPadding(0, 24.dpToPx(), 0, 48.dpToPx()) // breaks on different devices",Critical,https://developer.android.com/develop/ui/views/layout/edge-to-edge
Edge-to-Edge,Compose WindowInsets APIs,"Use Compose WindowInsets types: systemBars statusBars navigationBars displayCutout ime systemGestures safeDrawing safeGestures safeContent. Modifiers: systemBarsPadding() statusBarsPadding() navigationBarsPadding() imePadding() safeDrawingPadding(). Scaffold handles insets automatically via innerPadding. Use WindowInsets.systemBars.asPaddingValues() for LazyColumn contentPadding.",Use Scaffold innerPadding; use safeDrawingPadding() as default safe choice; use imePadding() on text input screens; use WindowInsets.systemBars.asPaddingValues() for LazyColumn,Ignore Scaffold innerPadding; hardcode padding values; double-apply insets (Scaffold + systemBarsPadding); forget imePadding on input screens,"Scaffold { innerPadding -> LazyColumn(modifier = Modifier.padding(innerPadding)) { items(100) { Text('Item $it') } } }; // Input screen: Column(Modifier.fillMaxSize().safeDrawingPadding().imePadding()) { TextField(value = text, onValueChange = { text = it }) }; // LazyColumn: LazyColumn(contentPadding = WindowInsets.systemBars.only(WindowInsetsSides.Vertical).asPaddingValues()) { }","// Ignore innerPadding: Scaffold { _ -> LazyColumn { } } // items behind bars; // Double insets: Scaffold { ip -> Column(Modifier.padding(ip).systemBarsPadding()) { } } // double padding; // Hardcoded: Column(Modifier.padding(top = 24.dp, bottom = 48.dp)) // breaks on different devices",Critical,https://developer.android.com/develop/ui/compose/system/insets
Edge-to-Edge,Display Cutout Handling,"Handle display cutouts (notches punch-holes camera islands) by combining WindowInsetsCompat.Type.displayCutout() with systemBars() when applying insets. On API 35+ all layoutInDisplayCutoutMode values are interpreted as ALWAYS. Set layoutInDisplayCutoutMode to always in theme for consistency. Test in portrait and landscape as cutout moves to side.",Combine displayCutout() with systemBars() in inset handling; set layoutInDisplayCutoutMode=always in theme; test portrait and landscape; test with emulator cutout simulation,Use layoutInDisplayCutoutMode=never (interpreted as always on API 35+); handle only systemBars without displayCutout; forget landscape where cutout is on side,"// Views: ViewCompat.setOnApplyWindowInsetsListener(content) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars() or WindowInsetsCompat.Type.displayCutout()); v.updatePadding(left = bars.left, top = bars.top, right = bars.right, bottom = bars.bottom); WindowInsetsCompat.CONSUMED }; // Compose: Column(Modifier.fillMaxSize().safeDrawingPadding()) { /* safe from bars and cutouts */ }; // Theme: <item name='android:windowLayoutInDisplayCutoutMode'>always</item>","// Missing cutout: ViewCompat.setOnApplyWindowInsetsListener(view) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars()); v.updatePadding(top = bars.top) } // no displayCutout; no left/right; content overlaps notch in landscape",High,https://developer.android.com/develop/ui/views/layout/display-cutout
Edge-to-Edge,Gesture Navigation Conflicts,"Handle conflicts between system gesture areas and app interactive elements (sliders drawers carousels). Use WindowInsetsCompat.Type.systemGestures() to get gesture zones. Use View.setSystemGestureExclusionRects() or Modifier.systemGestureExclusion() in Compose to request system yield gesture areas (limited to 200dp per edge). mandatorySystemGestures (home bar) cannot be excluded.",Use systemGestures() inset type to avoid placing interactive elements at edges; use setSystemGestureExclusionRects for sliders (max 200dp per edge); test gesture and 3-button navigation,Place sliders and seekbars at screen edges without exclusion; try to exclude entire screen edge; use deprecated SYSTEM_UI_FLAG constants,"// Padding for gesture zones: ViewCompat.setOnApplyWindowInsetsListener(slider) { v, insets -> val gesture = insets.getInsets(WindowInsetsCompat.Type.systemGestures()); v.updatePadding(left = gesture.left, right = gesture.right); WindowInsetsCompat.CONSUMED }; // Exclusion: slider.doOnLayout { v -> v.systemGestureExclusionRects = listOf(Rect(v.left, v.top, v.right, v.bottom)) }; // Compose: Slider(modifier = Modifier.systemGestureExclusion(), value = value, onValueChange = { value = it })","// Slider at edge: <SeekBar android:layout_marginStart='0dp' /> // thumb at left edge conflicts with back gesture; system intercepts drag; // Deprecated: window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY or FULLSCREEN",High,https://developer.android.com/develop/ui/views/layout/immersive
Edge-to-Edge,Immersive Mode,"Use WindowInsetsControllerCompat for immersive mode (hiding system bars) in media players games and photo viewers. Set systemBarsBehavior to BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE for best experience. Call hide(WindowInsetsCompat.Type.systemBars()) to enter and show() to exit. Replace deprecated View.SYSTEM_UI_FLAG constants.",Use WindowCompat.getInsetsController(); set BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE; hide/show WindowInsetsCompat.Type.systemBars(),Use deprecated View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY and SYSTEM_UI_FLAG_FULLSCREEN; forget to restore system bars on exit,"val controller = WindowCompat.getInsetsController(window, window.decorView); controller.systemBarsBehavior = WindowInsetsControllerCompat.BEHAVIOR_SHOW_TRANSIENT_BARS_BY_SWIPE; // Enter immersive: controller.hide(WindowInsetsCompat.Type.systemBars()); // Exit immersive: controller.show(WindowInsetsCompat.Type.systemBars())","// Deprecated: window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY or View.SYSTEM_UI_FLAG_FULLSCREEN or View.SYSTEM_UI_FLAG_HIDE_NAVIGATION // deprecated flags; inconsistent behavior across API levels",High,https://developer.android.com/develop/ui/views/layout/immersive
Edge-to-Edge,3-Button vs Gesture Navigation,"Gesture navigation has fully transparent bars (API 35+) with thin gesture indicator. 3-Button has 80% opaque navigation bar with back/home/recents buttons. Inset sizes differ significantly (gesture ~16-20dp vs 3-button ~48dp). setNavigationBarColor is deprecated and disabled on gesture nav but partially functional on 3-button. Test both modes.",Test in both gesture and 3-button modes; use window.isNavigationBarContrastEnforced = false for custom nav bar protection; use ProtectionLayout for gradients; account for different bar heights,Assume all users use gesture navigation; hardcode thin bottom padding; try setNavigationBarColor (deprecated); only test with one navigation mode,"enableEdgeToEdge(); window.isNavigationBarContrastEnforced = false; // Inset handling auto-adapts: ViewCompat.setOnApplyWindowInsetsListener(content) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars() or WindowInsetsCompat.Type.displayCutout()); v.updatePadding(left = bars.left, top = bars.top, right = bars.right, bottom = bars.bottom); WindowInsetsCompat.CONSUMED }","// Hardcoded for gesture only: view.setPadding(0, statusBarHeight, 0, 20.dpToPx()) // breaks on 3-button nav (needs ~48dp); // Deprecated color: window.navigationBarColor = Color.BLACK // ignored on gesture nav",High,https://developer.android.com/develop/ui/views/layout/edge-to-edge
Edge-to-Edge,Dialog Edge-to-Edge,"Dialogs have their own Window separate from the Activity. Full-screen dialogs must separately opt into edge-to-edge by calling enableEdgeToEdge() on the dialog's window in onStart(). The Activity's edge-to-edge setting does not propagate to dialogs. Handle insets within dialog content as you would in an Activity.",Call dialog?.window?.let { WindowCompat.enableEdgeToEdge(it) } in DialogFragment onStart(); handle insets in dialog content layout,Assume dialog inherits edge-to-edge from Activity; no inset handling in dialog content; full-screen dialog content hidden behind bars,"class MyFullScreenDialog : DialogFragment() { override fun onStart() { super.onStart(); dialog?.window?.let { WindowCompat.enableEdgeToEdge(it) } }; override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, saved: Bundle?) = inflater.inflate(R.layout.dialog_fullscreen, container, false) }","// No edge-to-edge in dialog: class MyDialog : DialogFragment() { override fun onStart() { super.onStart() } } // dialog content may be hidden behind bars on API 35+; inconsistent with Activity appearance",Medium,https://developer.android.com/develop/ui/views/layout/edge-to-edge
Edge-to-Edge,Material Components Auto Insets,"Several Material components automatically handle edge-to-edge insets: BottomAppBar BottomNavigationView NavigationRailView and NavigationView handle insets with no extra work. AppBarLayout requires fitsSystemWindows=true. Knowing which components auto-handle insets avoids duplicate inset logic and simplifies implementation.",Use Material components that auto-handle insets (BottomAppBar BottomNavigationView NavigationRailView NavigationView); set fitsSystemWindows=true on AppBarLayout,Manually handle insets on Material components that already handle them (causes double padding); forget fitsSystemWindows on AppBarLayout,"<com.google.android.material.appbar.AppBarLayout android:layout_width='match_parent' android:layout_height='wrap_content' android:fitsSystemWindows='true'><com.google.android.material.appbar.MaterialToolbar android:layout_width='match_parent' android:layout_height='?attr/actionBarSize' /></com.google.android.material.appbar.AppBarLayout>; <!-- BottomNavigationView auto-handles navigation bar insets -->","// Manual insets on auto-handling component: ViewCompat.setOnApplyWindowInsetsListener(bottomNav) { v, insets -> v.updatePadding(bottom = insets.getInsets(WindowInsetsCompat.Type.systemBars()).bottom) } // double padding because BottomNavigationView already handles it",Medium,https://developer.android.com/develop/ui/views/layout/edge-to-edge
Edge-to-Edge,System Bar Icon Colors,"Control status bar and navigation bar icon colors (dark/light) using WindowInsetsControllerCompat. Set isAppearanceLightStatusBars=true for dark icons on light backgrounds and false for light icons on dark backgrounds. Same for isAppearanceLightNavigationBars. Essential for proper contrast when drawing behind transparent system bars.",Use WindowCompat.getInsetsController() to set isAppearanceLightStatusBars and isAppearanceLightNavigationBars; match to content background color,Ignore system bar icon contrast; dark icons on dark background or light icons on light background making clock/battery invisible,"val controller = WindowCompat.getInsetsController(window, window.decorView); // Light background -> dark icons: controller.isAppearanceLightStatusBars = true; controller.isAppearanceLightNavigationBars = true; // Dark background -> light icons: controller.isAppearanceLightStatusBars = false; controller.isAppearanceLightNavigationBars = false","// No icon color control: enableEdgeToEdge() // transparent bars but default dark icons on dark app background; clock and battery invisible; // Or deprecated: window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR // deprecated",Medium,https://developer.android.com/develop/ui/views/layout/edge-to-edge
Edge-to-Edge,Backward Compat Inset Dispatch,"On Android 10 (API 29) and earlier consuming insets in one view stops dispatch to sibling views. Use ViewGroupCompat.installCompatInsetsDispatch(rootView) from AndroidX Core 1.16.0+ to fix this. Call early in onCreate on your root ViewGroup. This ensures all sibling views receive inset information regardless of consumption.",Call ViewGroupCompat.installCompatInsetsDispatch(rootView) in onCreate; requires AndroidX Core 1.16.0+; fixes sibling inset dispatch on API 29 and below,Consume insets without installing compat dispatch on API 29-; sibling views miss inset information and overlap system bars,"override fun onCreate(saved: Bundle?) { super.onCreate(saved); enableEdgeToEdge(); setContentView(R.layout.main); ViewGroupCompat.installCompatInsetsDispatch(findViewById(R.id.main)); // Now safe: siblings get insets even after consumption; ViewCompat.setOnApplyWindowInsetsListener(fab) { v, insets -> val bars = insets.getInsets(WindowInsetsCompat.Type.systemBars()); v.updateLayoutParams<MarginLayoutParams> { bottomMargin = bars.bottom }; WindowInsetsCompat.CONSUMED } }","// No compat dispatch: ViewCompat.setOnApplyWindowInsetsListener(fab) { _, insets -> WindowInsetsCompat.CONSUMED } // on API 29-: sibling RecyclerView never receives insets; content hidden behind navigation bar",Medium,https://developer.android.com/develop/ui/views/layout/edge-to-edge
XML Views,CollapsingToolbarLayout Scroll Effects,"Use CollapsingToolbarLayout inside AppBarLayout for collapsing toolbar with parallax scrolling pin mode and title collapse effects. Set layout_collapseMode to parallax for background images and pin for toolbars. Use contentScrim for collapsed toolbar color. Requires CoordinatorLayout and a scrollable sibling with app:layout_behavior.",Set layout_collapseMode=parallax on ImageView and pin on Toolbar; use contentScrim for collapsed color; set expandedTitleMargin for positioning; use app:layout_scrollFlags=scroll|exitUntilCollapsed,No collapse mode on children; no contentScrim causing transparent collapsed state; forget layout_scrollFlags on AppBarLayout,"<CoordinatorLayout><AppBarLayout android:layout_height='256dp' android:fitsSystemWindows='true'><CollapsingToolbarLayout app:layout_scrollFlags='scroll|exitUntilCollapsed' app:contentScrim='?attr/colorPrimary' app:expandedTitleMarginStart='48dp'><ImageView app:layout_collapseMode='parallax' app:layout_collapseParallaxMultiplier='0.7' android:fitsSystemWindows='true' /><MaterialToolbar app:layout_collapseMode='pin' /></CollapsingToolbarLayout></AppBarLayout><RecyclerView app:layout_behavior='@string/appbar_scrolling_view_behavior' /></CoordinatorLayout>","// No collapse mode: <CollapsingToolbarLayout><ImageView /><Toolbar /></CollapsingToolbarLayout> // image scrolls with toolbar instead of parallax; no pin behavior; toolbar disappears completely",Medium,https://developer.android.com/reference/com/google/android/material/appbar/CollapsingToolbarLayout
XML Views,TabLayoutMediator with ViewPager2,"Use TabLayoutMediator to connect TabLayout with ViewPager2. Replaces deprecated TabLayout.setupWithViewPager(). Call attach() after setting adapter on ViewPager2. Configure tab text and icons in the TabConfigurationStrategy callback. Supports both fixed and scrollable tab modes.",Use TabLayoutMediator(tabLayout viewPager2 callback).attach(); set tab text/icons in callback; call after setting adapter; use tabMode=scrollable for many tabs,Use deprecated setupWithViewPager; manually manage tab selection; forget to call attach(); set adapter after attaching mediator,"val adapter = SectionsPagerAdapter(this); viewPager.adapter = adapter; TabLayoutMediator(tabLayout, viewPager) { tab, position -> tab.text = titles[position]; tab.setIcon(icons[position]) }.attach()","// Deprecated: tabLayout.setupWithViewPager(viewPager) // ViewPager1 only; // Manual: tabLayout.addOnTabSelectedListener { tab -> viewPager.currentItem = tab.position } // manual sync; misses swipe events",Medium,https://developer.android.com/reference/com/google/android/material/tabs/TabLayoutMediator
XML Views,NavigationView with DrawerLayout,"Use NavigationView inside DrawerLayout for Material Design navigation drawer. Define menu items in res/menu/ and header in separate layout. Use NavigationUI.setupWithNavController() with Navigation Component. Set app:headerLayout and app:menu attributes. Handle item selection via setNavigationItemSelectedListener.",Use NavigationView with app:menu and app:headerLayout; setupWithNavController for Navigation Component; handle back press with onBackPressedDispatcher,Build custom drawer with LinearLayout and manual animations; use deprecated ActionBarDrawerToggle without NavigationView,"<DrawerLayout android:id='@+id/drawerLayout' android:layout_width='match_parent' android:layout_height='match_parent'><FragmentContainerView android:id='@+id/navHost' app:navGraph='@navigation/main_graph' android:layout_width='match_parent' android:layout_height='match_parent' /><NavigationView android:id='@+id/navView' android:layout_width='wrap_content' android:layout_height='match_parent' android:layout_gravity='start' app:headerLayout='@layout/nav_header' app:menu='@menu/nav_drawer' /></DrawerLayout>; // Setup: NavigationUI.setupWithNavController(navView, navController)","// Custom drawer: <LinearLayout android:layout_gravity='start'><TextView android:text='Home' android:onClick='navigate' /></LinearLayout> // no Material styling; no menu resource; manual click handling; no Navigation Component integration",Medium,https://developer.android.com/guide/navigation/integrations/ui
XML Views,MaterialCardView,"Use MaterialCardView for Material Design cards with elevation ripple checked state and shape theming. Supports app:cardCornerRadius app:cardElevation app:strokeWidth app:strokeColor. Set app:checkedIcon and app:checkable='true' for selectable cards. Extends CardView with Material theme support.",Use MaterialCardView with app:cardCornerRadius and app:strokeWidth; set checkable=true for selectable cards; use style Widget.Material3.CardView.Outlined for outlined variant,Use plain CardView without Material theming; manually add border with shape drawable; no checked state support,"<com.google.android.material.card.MaterialCardView android:layout_width='match_parent' android:layout_height='wrap_content' app:cardCornerRadius='12dp' app:cardElevation='2dp' app:strokeWidth='1dp' app:strokeColor='?attr/colorOutline' app:checkedIcon='@drawable/ic_check_circle' app:checkable='true' style='@style/Widget.Material3.CardView.Outlined'><!-- card content --></com.google.android.material.card.MaterialCardView>","// Plain CardView: <androidx.cardview.widget.CardView app:cardCornerRadius='4dp'> // no Material theme; no stroke; no checked state; no shape theming; inconsistent with Material3",Medium,https://developer.android.com/reference/com/google/android/material/card/MaterialCardView
XML Views,MaterialButton Styles,"Use MaterialButton with style variants: Widget.Material3.Button (filled) Widget.Material3.Button.OutlinedButton Widget.Material3.Button.TextButton Widget.Material3.Button.TonalButton Widget.Material3.Button.ElevatedButton. Set app:icon and app:iconGravity for icon buttons. Use app:cornerRadius for shape.",Use Widget.Material3.Button styles for consistent Material3 buttons; set app:icon with iconGravity; use app:cornerRadius; use MaterialButtonToggleGroup for toggle buttons,Use plain Button or AppCompatButton losing Material3 theming; manually style backgrounds; custom toggle with checkboxes,"<com.google.android.material.button.MaterialButton style='@style/Widget.Material3.Button.OutlinedButton' android:text='@string/cancel' />; <com.google.android.material.button.MaterialButton style='@style/Widget.Material3.Button' android:text='@string/confirm' app:icon='@drawable/ic_check' app:iconGravity='textStart' />; <com.google.android.material.button.MaterialButton style='@style/Widget.Material3.Button.TonalButton' android:text='@string/details' />","// Plain Button: <Button android:text='Submit' android:background='@color/blue' /> // no Material3 theming; no ripple; no icon support; inconsistent with design system; hard to maintain",Medium,https://developer.android.com/reference/com/google/android/material/button/MaterialButton
XML Views,MaterialAlertDialog,"Use MaterialAlertDialogBuilder instead of AlertDialog.Builder for Material3-themed dialogs. Supports title message icon positive/negative/neutral buttons single-choice multi-choice and custom views. Automatically uses Material3 colors typography and shape. Use setView() for custom dialog layouts.",Use MaterialAlertDialogBuilder(context) for all dialogs; use setCancelable(false) for critical confirmations; use custom view for complex dialogs; avoid dialog cascading,Use AlertDialog.Builder which lacks Material3 theming; use plain Dialog class; show multiple dialogs stacked,"MaterialAlertDialogBuilder(context).setTitle(R.string.delete_title).setMessage(R.string.delete_message).setPositiveButton(R.string.delete) { _, _ -> deleteItem() }.setNegativeButton(R.string.cancel, null).setIcon(R.drawable.ic_warning).show(); // Single-choice: .setSingleChoiceItems(options, checkedItem) { dialog, which -> selected = which }","// Old AlertDialog: AlertDialog.Builder(context).setTitle('Delete').setMessage('Are you sure?').create().show() // no Material3 theme; wrong typography; wrong colors; // Or: Dialog(context).setContentView(R.layout.custom) // no theme; manual button handling",Medium,https://developer.android.com/reference/com/google/android/material/dialog/MaterialAlertDialogBuilder
XML Views,MaterialDatePicker,"Use MaterialDatePicker for Material3 date selection dialogs. Supports single date range selection calendar and input modes. Use CalendarConstraints with DateValidatorPointForward/PointBackward for date restrictions. Builder pattern: MaterialDatePicker.Builder.datePicker() or .dateRangePicker(). Handles configuration changes automatically.",Use MaterialDatePicker.Builder.datePicker(); set CalendarConstraints for valid range; use addOnPositiveButtonClickListener for result; show with FragmentManager,Use deprecated DatePickerDialog; build custom date picker; parse date manually from EditText,"val datePicker = MaterialDatePicker.Builder.datePicker().setTitleText(R.string.select_date).setCalendarConstraints(CalendarConstraints.Builder().setValidator(DateValidatorPointForward.now()).build()).setSelection(MaterialDatePicker.todayInUtcMilliseconds()).build(); datePicker.addOnPositiveButtonClickListener { millis -> val date = Instant.ofEpochMilli(millis).atZone(ZoneId.systemDefault()).toLocalDate() }; datePicker.show(supportFragmentManager, 'date')","// Deprecated: DatePickerDialog(context, listener, year, month, day).show() // not Material3; manual calendar constraints; no range picker; doesn't survive config changes well",Medium,https://developer.android.com/reference/com/google/android/material/datepicker/MaterialDatePicker
XML Views,MaterialTimePicker,"Use MaterialTimePicker for Material3 time selection. Supports clock face and keyboard input modes. Builder pattern: MaterialTimePicker.Builder().setTimeFormat(CLOCK_24H).setHour(12).setMinute(0).build(). Use addOnPositiveButtonClickListener to get picker.hour and picker.minute.",Use MaterialTimePicker.Builder(); set timeFormat to CLOCK_12H or CLOCK_24H; set initial time; use setInputMode for clock or keyboard,Use deprecated TimePickerDialog; build custom time input; ignore 12/24h user preference,"val timePicker = MaterialTimePicker.Builder().setTimeFormat(TimeFormat.CLOCK_12H).setHour(12).setMinute(0).setTitleText(R.string.select_time).setInputMode(MaterialTimePicker.INPUT_MODE_CLOCK).build(); timePicker.addOnPositiveButtonClickListener { val hour = timePicker.hour; val minute = timePicker.minute }; timePicker.show(supportFragmentManager, 'time')","// Deprecated: TimePickerDialog(context, listener, hour, minute, is24h).show() // not Material3 themed; inconsistent with MaterialDatePicker; no input mode toggle",Low,https://developer.android.com/reference/com/google/android/material/timepicker/MaterialTimePicker
XML Views,Snackbar with Action and Anchor,"Use Snackbar.make() with setAction for undo and dismissible messages. Set setAnchorView to position above FAB or BottomNavigationView. Use LENGTH_SHORT LENGTH_LONG or LENGTH_INDEFINITE. Snackbar auto-handles edge-to-edge insets. Use callback for dismissed/shown events.",Use Snackbar.make with setAction for undo; setAnchorView to float above FAB; use LENGTH_INDEFINITE for important messages with dismiss action; use callback for tracking,Use Toast for actionable messages; no anchor causing Snackbar to overlap FAB; LENGTH_INDEFINITE without dismiss action,"Snackbar.make(binding.root, R.string.item_deleted, Snackbar.LENGTH_LONG).setAction(R.string.undo) { undoDelete() }.setAnchorView(binding.fab).addCallback(object : BaseTransientBottomBar.BaseCallback<Snackbar>() { override fun onDismissed(bar: Snackbar, event: Int) { if (event != DISMISS_EVENT_ACTION) confirmDelete() } }).show()","// Toast for undo: Toast.makeText(context, 'Deleted', LENGTH_SHORT).show() // no undo action; no anchor; // Snackbar without anchor: Snackbar.make(root, 'Deleted', LENGTH_SHORT).show() // overlaps FAB; no action; auto-dismisses important message",Medium,https://developer.android.com/reference/com/google/android/material/snackbar/Snackbar
XML Views,MaterialSwitch,"Use MaterialSwitch (Material3) instead of SwitchCompat or SwitchMaterial (Material2). MaterialSwitch provides M3 theming with thumb icons track colors and proper accessibility. Set app:thumbIcon for on/off state icons. Automatically handles Material3 color roles and motion.",Use com.google.android.material.materialswitch.MaterialSwitch; set app:thumbIcon for visual state; pair with descriptive label text,Use android.widget.Switch or SwitchCompat losing Material3 theming; no thumb icon; switch without label text,"<com.google.android.material.materialswitch.MaterialSwitch android:id='@+id/notifSwitch' android:layout_width='match_parent' android:layout_height='wrap_content' android:text='@string/enable_notifications' app:thumbIcon='@drawable/switch_thumb_icon_selector' android:checked='true' />; <!-- switch_thumb_icon_selector: checked=ic_check unchecked=ic_close -->","// Old Switch: <Switch android:text='Notifications' /> // not Material3; no thumb icon; old theming; // SwitchCompat: <androidx.appcompat.widget.SwitchCompat /> // Material2 only; no M3 colors or motion",Low,https://developer.android.com/reference/com/google/android/material/materialswitch/MaterialSwitch
XML Views,Material Slider,"Use Material Slider for continuous or discrete value selection. Supports single value and range selection. Set valueFrom valueTo and stepSize. Use app:labelBehavior for value label display. Use addOnChangeListener for value changes. Slider auto-handles accessibility and touch targets.",Use com.google.android.material.slider.Slider; set valueFrom and valueTo; use stepSize for discrete; use RangeSlider for dual-thumb; set labelBehavior,Use SeekBar for Material Design apps; custom slider without accessibility; no value label,"<com.google.android.material.slider.Slider android:id='@+id/brightnessSlider' android:layout_width='match_parent' android:layout_height='wrap_content' android:valueFrom='0' android:valueTo='100' android:stepSize='5' android:value='50' app:labelBehavior='withinBounds' />; // Range: <com.google.android.material.slider.RangeSlider android:valueFrom='0' android:valueTo='1000' app:values='@array/price_range' />","// SeekBar: <SeekBar android:max='100' android:progress='50' /> // not Material themed; no label; no range support; no step size; // Custom: <LinearLayout> with manual thumb dragging // no accessibility; complex code",Medium,https://developer.android.com/reference/com/google/android/material/slider/Slider
XML Views,BadgeDrawable on Navigation,"Use BadgeDrawable to display notification badges on BottomNavigationView and TabLayout items. Use getOrCreateBadge(menuItemId) to create badges. Set badge number with setNumber(). Clear with removeBadge(). Supports no-number dot badge for boolean indicators.",Use bottomNav.getOrCreateBadge(itemId).number = count; use removeBadge to clear; use badge without number for dot indicator; clear badges on navigation,Manually overlay a TextView on navigation items; custom badge view with absolute positioning,"// Add badge: val badge = bottomNav.getOrCreateBadge(R.id.nav_notifications); badge.number = 5; badge.isVisible = true; // Dot badge (no number): bottomNav.getOrCreateBadge(R.id.nav_messages); // Remove: bottomNav.removeBadge(R.id.nav_notifications); // TabLayout: tabLayout.getTabAt(2)?.orCreateBadge?.number = 3","// Manual badge: <FrameLayout><BottomNavigationView /><TextView android:text='5' android:background='@drawable/badge_circle' android:layout_gravity='top|end' /></FrameLayout> // hardcoded position; doesn't move with tab; manual show/hide",Low,https://developer.android.com/reference/com/google/android/material/badge/BadgeDrawable
XML Views,SearchView in Toolbar,"Use SearchView as action view in Toolbar menu for expandable search. Define with app:actionViewClass in menu XML. Use setOnQueryTextListener for search input handling. Set app:showAsAction=collapseActionView|ifRoom to expand on click. Use SearchView.setIconifiedByDefault(true) for collapsed-by-default behavior.",Define SearchView in menu XML with actionViewClass; use collapseActionView|ifRoom; setOnQueryTextListener for queries; use SearchManager for system search integration,Build custom EditText in Toolbar for search; no collapse behavior; manual keyboard management,"<!-- res/menu/search_menu.xml --> <menu><item android:id='@+id/action_search' android:title='@string/search' android:icon='@drawable/ic_search' app:showAsAction='collapseActionView|ifRoom' app:actionViewClass='androidx.appcompat.widget.SearchView' /></menu>; // Setup: val searchView = menu.findItem(R.id.action_search).actionView as SearchView; searchView.setOnQueryTextListener(object : OnQueryTextListener { override fun onQueryTextSubmit(query: String) = search(query).let { true }; override fun onQueryTextChange(text: String) = filter(text).let { true } })","// Custom search: toolbar.addView(EditText(context)) // no expand/collapse; no search icon; manual keyboard handling; no integration with SearchManager; inconsistent UX",Medium,https://developer.android.com/guide/topics/search/search-dialog
XML Views,ViewStub for Lazy Inflation,"Use ViewStub to lazily inflate layouts that are not always needed (error states empty states import panels). ViewStub is zero-cost until inflated - it has no size and is not drawn. Call inflate() or set visibility to VISIBLE to inflate. Use android:inflatedId to reference the inflated view.",Use ViewStub for rarely-shown layouts (error empty loading import); call inflate() when needed; set inflatedId for findById after inflation,Include rarely-shown layouts directly in main layout (inflated even when not displayed); use View.GONE on complex layouts (still inflated),"<ViewStub android:id='@+id/stubError' android:inflatedId='@+id/errorPanel' android:layout='@layout/error_state' android:layout_width='match_parent' android:layout_height='wrap_content' />; // Inflate when needed: val errorPanel = binding.stubError.inflate() as ViewGroup; // Or: binding.stubError.visibility = View.VISIBLE","// Direct include: <include layout='@layout/error_state' android:visibility='gone' /> // inflated immediately even when never shown; wastes memory and inflation time; // Or: inflate in onBindViewHolder for RecyclerView items",High,https://developer.android.com/develop/ui/views/layout/improving-layouts/loading-ondemand
XML Views,Layout Weight Pitfalls,"Avoid nested layout_weight in LinearLayout as it causes double measure passes. Each level of nesting multiplies measure cost exponentially. Use ConstraintLayout with guidelines and percent constraints instead. If weights are necessary keep them to a single level and set weightSum explicitly.",Use ConstraintLayout with guidelines or percent for proportional layouts; if weight needed use single level only; set layout_width=0dp with weight not wrap_content,Nest LinearLayouts with layout_weight; use wrap_content with weight (causes double measure); deeply nested weighted layouts,"<ConstraintLayout><View android:id='@+id/col1' app:layout_constraintWidth_percent='0.3' /><View android:id='@+id/col2' app:layout_constraintWidth_percent='0.7' /></ConstraintLayout>; // If weight needed: <LinearLayout android:weightSum='10'><View android:layout_width='0dp' android:layout_weight='3' /><View android:layout_width='0dp' android:layout_weight='7' /></LinearLayout>","// Nested weights: <LinearLayout android:orientation='vertical'><LinearLayout android:layout_weight='1'><View android:layout_weight='1' /><View android:layout_weight='2' /></LinearLayout><LinearLayout android:layout_weight='2'><View android:layout_weight='1' /></LinearLayout></LinearLayout> // 2^n measure passes; exponential cost",High,https://developer.android.com/develop/ui/views/layout/improving-layouts/optimizing-layouts
XML Views,Custom Compound View,"Create compound views by extending a ViewGroup (LinearLayout ConstraintLayout) and inflating a child layout. Define custom XML attributes in res/values/attrs.xml. Read attributes in init with context.obtainStyledAttributes(). Expose data through public methods. Use merge tag in compound view layout to avoid extra ViewGroup.",Extend ViewGroup; inflate with merge tag; define custom attrs in attrs.xml; use obtainStyledAttributes and recycle; expose data via setters,Inflate without merge (adds extra ViewGroup level); forget to recycle TypedArray; no custom attributes; inflate in each adapter bind,"// attrs.xml: <declare-styleable name='LabeledInput'><attr name='labelText' format='string' /><attr name='inputHint' format='string' /></declare-styleable>; // View: class LabeledInput @JvmOverloads constructor(ctx: Context, attrs: AttributeSet? = null) : LinearLayout(ctx, attrs) { init { inflate(context, R.layout.labeled_input, this); ctx.obtainStyledAttributes(attrs, R.styleable.LabeledInput).use { a -> label.text = a.getString(R.styleable.LabeledInput_labelText); input.hint = a.getString(R.styleable.LabeledInput_inputHint) } } }; // layout: <merge><TextView android:id='@+id/label' /><TextInputLayout><TextInputEditText android:id='@+id/input' /></TextInputLayout></merge>","// No merge: <LinearLayout><!-- duplicates parent LinearLayout --><TextView /><EditText /></LinearLayout> // extra ViewGroup nesting; // No attrs: class LabeledInput(ctx: Context) { /* hardcoded values; can't configure from XML */ }; // No recycle: val a = ctx.obtainStyledAttributes(attrs, styleable) // a.recycle() missing; leaks",Medium,https://developer.android.com/guide/topics/ui/custom-components
XML Views,EditText Input Types,"Set android:inputType to control keyboard type and behavior. Combine flags with pipe: textCapWords|textAutoCorrect. Use textPassword for passwords textEmailAddress for email phone for phone numbers number for integers numberDecimal for decimals. Set android:maxLength for character limit. Use android:digits to restrict characters.",Set correct inputType per field; combine flags for behavior; use maxLength for limits; use digits for restricted character sets; pair with TextInputLayout,No inputType (shows full keyboard for numbers); textPassword without TextInputLayout endIconMode; use text for email fields,"<TextInputLayout app:endIconMode='passwordToggle'><TextInputEditText android:inputType='textPassword' android:maxLength='128' /></TextInputLayout>; <TextInputEditText android:inputType='textEmailAddress' />; <TextInputEditText android:inputType='phone' />; <TextInputEditText android:inputType='numberDecimal' android:digits='0123456789.' />; <TextInputEditText android:inputType='textCapWords|textAutoCorrect' />","// No inputType: <EditText android:hint='Phone' /> // shows full QWERTY keyboard for phone number; // Wrong type: <EditText android:inputType='text' android:hint='Email' /> // no @ key on keyboard; manual validation only",Medium,https://developer.android.com/reference/android/widget/TextView#attr_android:inputType
XML Views,Animated Vector Drawables,"Use animated-vector-drawable to animate vector paths and groups. Define vector in res/drawable/ with named groups/paths. Define animations in res/animator/ targeting group/path properties. Reference in animated-vector XML. Use AnimatedVectorDrawableCompat for backward compatibility. Trigger with start().",Define vector with named groups/paths; create objectAnimator for pathData trimPathStart rotation; use animated-vector to link; start via (drawable as Animatable).start(),Use frame animation (animation-list) for vector transitions; manual ValueAnimator on ImageView; GIF instead of AVD,"<!-- res/drawable/avd_check.xml --> <animated-vector xmlns:android='http://schemas.android.com/apk/res/android' android:drawable='@drawable/ic_check_vector'><target android:name='checkPath' android:animation='@animator/check_draw' /></animated-vector>; <!-- res/animator/check_draw.xml --> <objectAnimator android:propertyName='trimPathEnd' android:valueFrom='0' android:valueTo='1' android:duration='300' />; // Start: (imageView.drawable as Animatable).start()","// Frame animation: <animation-list><item android:drawable='@drawable/frame1' android:duration='50' /><item android:drawable='@drawable/frame2' android:duration='50' /></animation-list> // large APK; not scalable; pixelated on high DPI; many resources needed",Medium,https://developer.android.com/develop/ui/views/graphics/drawable-animation
XML Views,Inset Drawable,"Use inset drawable to add padding/margins around another drawable without affecting the view's padding. Useful for list item dividers icon spacing and background insets. Define in XML with android:insetLeft/Top/Right/Bottom. Can wrap any drawable type.",Use inset drawable for drawable spacing; android:insetLeft/Right/Top/Bottom; use for divider spacing and icon margins without view padding changes,Add extra padding to view for drawable spacing (affects content too); use nested FrameLayout for drawable inset,"<!-- res/drawable/inset_divider.xml --> <inset xmlns:android='http://schemas.android.com/apk/res/android' android:drawable='@drawable/divider' android:insetLeft='72dp' />; <!-- Use as divider: --> <RecyclerView android:divider='@drawable/inset_divider' />; <!-- Background inset: --> <inset android:drawable='@drawable/bg_card' android:inset='8dp' />","// Extra padding on view: <View android:paddingStart='72dp' android:background='@drawable/divider' /> // padding affects content too; not just drawable; // Nested view: <FrameLayout android:paddingStart='72dp'><View android:background='@drawable/divider' /></FrameLayout>",Low,https://developer.android.com/guide/topics/resources/drawable-resource#Inset
XML Views,Custom Notification Layouts,"Use RemoteViews for custom notification layouts when standard templates are insufficient. Use NotificationCompat.DecoratedCustomViewStyle for notifications that blend custom content with standard elements. Set setCustomContentView for collapsed and setCustomBigContentView for expanded. Limited to RemoteViews-supported views.",Use DecoratedCustomViewStyle with setCustomContentView; keep layouts simple with supported views; provide standard fallback; test on multiple API levels,Overly complex custom layouts; use unsupported views in RemoteViews; no fallback for older API levels; deep view hierarchies,"val customView = RemoteViews(packageName, R.layout.notification_custom); customView.setTextViewText(R.id.title, 'Download Complete'); customView.setProgressBar(R.id.progress, 100, 75, false); val notification = NotificationCompat.Builder(context, CHANNEL_ID).setSmallIcon(R.drawable.ic_download).setStyle(NotificationCompat.DecoratedCustomViewStyle()).setCustomContentView(customView).setCustomBigContentView(expandedView).build()","// Complex custom: RemoteViews with WebView or custom views // crashes; unsupported views in RemoteViews; // No fallback: only custom layout; breaks on manufacturers with custom notification rendering",Medium,https://developer.android.com/develop/ui/views/notifications/custom-notification
XML Views,App Widget RemoteViews,"Build app widgets using AppWidgetProvider with RemoteViews for home screen widgets. Define widget metadata in res/xml/appwidget_info.xml with sizing and update frequency. Layout limited to RemoteViews-supported views. Use PendingIntent for click handling. Use Jetpack Glance for Compose-based widgets.",Define appwidget-provider XML with sizing and updatePeriodMillis; use RemoteViews for layout; use PendingIntent with FLAG_IMMUTABLE for clicks; prefer Jetpack Glance for new widgets,Use unsupported views in widget layout; frequent updatePeriodMillis (minimum 30 minutes enforced); no PendingIntent FLAG_IMMUTABLE on API 31+,"<!-- res/xml/widget_info.xml --> <appwidget-provider android:minWidth='180dp' android:minHeight='40dp' android:updatePeriodMillis='3600000' android:initialLayout='@layout/widget_layout' android:resizeMode='horizontal|vertical' android:widgetCategory='home_screen' android:previewLayout='@layout/widget_preview' />; // Provider: class MyWidget : AppWidgetProvider() { override fun onUpdate(ctx: Context, mgr: AppWidgetManager, ids: IntArray) { ids.forEach { id -> val views = RemoteViews(ctx.packageName, R.layout.widget_layout); views.setOnClickPendingIntent(R.id.btn, PendingIntent.getActivity(ctx, 0, intent, FLAG_IMMUTABLE)); mgr.updateAppWidget(id, views) } } }","// Custom views in widget: RemoteViews with RecyclerView or ConstraintLayout // crashes; not supported; // No FLAG_IMMUTABLE: PendingIntent.getActivity(ctx, 0, intent, 0) // crashes on API 31+",Medium,https://developer.android.com/develop/ui/views/appwidgets
XML Views,SplashScreen API Theme,"Use SplashScreen API with theme attributes for fast perceived startup. Set windowSplashScreenBackground for color windowSplashScreenAnimatedIcon for icon and windowSplashScreenAnimationDuration for animation length. Use androidx.core.splashscreen library for backward compatibility to API 23. Call installSplashScreen() before setContentView.",Set splash screen attributes in theme; use installSplashScreen() before setContentView in Activity; use ViewTreeObserver.OnPreDrawListener to delay until data ready; keep animation under 1000ms,Use custom splash Activity (deprecated on API 12+); set windowDisablePreview=true (blank screen); no backward compat library,"// Theme: <style name='Theme.App.Starting' parent='Theme.SplashScreen'><item name='windowSplashScreenBackground'>@color/splash_bg</item><item name='windowSplashScreenAnimatedIcon'>@drawable/ic_splash_anim</item><item name='windowSplashScreenAnimationDuration'>800</item><item name='postSplashScreenTheme'>@style/Theme.App</item></style>; // Activity: override fun onCreate(saved: Bundle?) { installSplashScreen(); super.onCreate(saved); /* ... */ }","// Custom splash Activity: class SplashActivity : AppCompatActivity() { override fun onCreate(saved: Bundle?) { super.onCreate(saved); Handler().postDelayed({ startActivity(Intent(this, MainActivity::class.java)); finish() }, 2000) } } // blank screen before splash; 2s delay; deprecated pattern on API 31+",High,https://developer.android.com/develop/ui/views/launch/splash-screen
XML Views,Theme Overlays,"Use ThemeOverlay styles to modify theme attributes for specific view subtrees without creating full themes. Apply via android:theme attribute on any ViewGroup. Common overlays: ThemeOverlay.Material3.Dark ThemeOverlay.Material3.Light ThemeOverlay.Material3.ActionBar. Create custom overlays inheriting from ThemeOverlay for component-level theming.",Use android:theme with ThemeOverlay on ViewGroup subtrees; create custom ThemeOverlay for component theming; inherit from ThemeOverlay not Theme,Create full theme variants for minor color changes; apply theme programmatically instead of XML attribute; forget ThemeOverlay prefix causing full theme inheritance,"<!-- Dark toolbar on light theme: --> <com.google.android.material.appbar.MaterialToolbar android:theme='@style/ThemeOverlay.Material3.Dark.ActionBar' />; <!-- Custom overlay: --> <style name='ThemeOverlay.App.Card' parent='ThemeOverlay.Material3.Light'><item name='colorPrimary'>@color/card_primary</item><item name='colorSurface'>@color/card_surface</item></style>; <MaterialCardView android:theme='@style/ThemeOverlay.App.Card'><!-- uses card_primary/surface --></MaterialCardView>","// Full theme: <style name='Theme.App.DarkToolbar' parent='Theme.Material3.Light'> // copies entire theme just for toolbar; // Programmatic: ContextThemeWrapper(context, R.style.DarkOverlay) // complex; not declarative; harder to maintain",Medium,https://developer.android.com/develop/ui/views/theming/themes
XML Views,Window Background Drawable,"Set android:windowBackground in your app theme to a drawable that visually matches your first screen. This drawable displays immediately during cold start before Activity layout inflates providing instant perceived startup. Use layer-list to combine background color with centered logo. Essential for perceived performance.",Set windowBackground to layer-list matching first screen layout; use solid color + centered icon; keep simple (no bitmaps); combine with SplashScreen API,"Use windowDisablePreview=true (causes blank/black screen); no windowBackground (default white flash); complex bitmap as windowBackground (slow to decode)","<!-- res/drawable/window_bg.xml --> <layer-list><item android:drawable='@color/splash_background' /><item android:gravity='center'><bitmap android:src='@drawable/ic_logo' android:gravity='center' /></item></layer-list>; <!-- Theme: --> <style name='Theme.App'><item name='android:windowBackground'>@drawable/window_bg</item></style>","// Blank screen: <item name='android:windowDisablePreview'>true</item> // black screen during cold start; terrible UX; // Default white: no windowBackground set; white flash before content on dark theme apps",High,https://developer.android.com/topic/performance/vitals/launch-time
Performance,ViewStub Lazy Inflation,"Use ViewStub for rarely-shown UI to defer inflation cost until needed. ViewStub costs zero bytes of layout inflation and rendering until explicitly inflated. Saves 5-50ms per complex layout avoided. Use for error states empty views import panels and advanced options that most users never see.",Use ViewStub for error/empty/loading states; inflate only when needed; use inflatedId for finding inflated view; measure inflation savings with Systrace,Include rarely-shown complex layouts directly (inflated whether shown or not); use View.GONE on complex layouts (still inflated and measured),"<ViewStub android:id='@+id/stubError' android:inflatedId='@+id/errorPanel' android:layout='@layout/complex_error_state' android:layout_width='match_parent' android:layout_height='wrap_content' />; // Only inflate when error occurs: if (hasError) binding.stubError.inflate()","// Always inflated: <include layout='@layout/complex_error_state' android:visibility='gone' /> // 30ms inflation cost even when never shown; uses memory for views never displayed",High,https://developer.android.com/develop/ui/views/layout/improving-layouts/loading-ondemand
Performance,Flat View Hierarchy,"Keep view hierarchy as flat as possible. Each level of nesting adds measure and layout passes. ConstraintLayout achieves complex layouts with single-level hierarchy. Replace nested LinearLayout/RelativeLayout chains with ConstraintLayout. Use Layout Inspector and Systrace to identify deep hierarchies (target max 10 levels).",Use ConstraintLayout for complex layouts; target max 10 hierarchy levels; use Layout Inspector to analyze depth; use merge tag to eliminate wrapper ViewGroups,Deeply nested LinearLayout/RelativeLayout (each level adds measure passes); nest more than 3 levels of weighted LinearLayout,"<ConstraintLayout android:layout_width='match_parent' android:layout_height='wrap_content'><ImageView android:id='@+id/avatar' app:layout_constraintStart_toStartOf='parent' /><TextView android:id='@+id/title' app:layout_constraintStart_toEndOf='@+id/avatar' app:layout_constraintTop_toTopOf='parent' /><TextView android:id='@+id/subtitle' app:layout_constraintStart_toEndOf='@+id/avatar' app:layout_constraintTop_toBottomOf='@+id/title' /></ConstraintLayout>","// Nested: <LinearLayout vertical><LinearLayout horizontal><ImageView /><LinearLayout vertical><TextView /><TextView /></LinearLayout></LinearLayout></LinearLayout> // 4 levels; 2x measure passes; exponentially worse with weights",High,https://developer.android.com/develop/ui/views/layout/improving-layouts/optimizing-layouts
Performance,Bitmap inSampleSize Downsampling,"Use BitmapFactory.Options with inJustDecodeBounds=true to read dimensions first then calculate inSampleSize to load a downsampled version matching display size. A 4000x3000 image with inSampleSize=4 loads as 1000x750 using 75% less memory. Always downsample before displaying in ImageView.",Set inJustDecodeBounds=true first; calculate inSampleSize as power of 2; then decode with inSampleSize set; use Coil/Glide which handle this automatically,Load full-resolution bitmaps into small ImageViews; no inSampleSize causing OOM; decode on main thread,"val options = BitmapFactory.Options().apply { inJustDecodeBounds = true }; BitmapFactory.decodeFile(path, options); options.inSampleSize = calculateInSampleSize(options, targetWidth, targetHeight); options.inJustDecodeBounds = false; val bitmap = BitmapFactory.decodeFile(path, options); // Or use Coil: imageView.load(file) { size(200, 200) } // handles downsampling automatically","// Full resolution: val bitmap = BitmapFactory.decodeFile(path) // loads 24MB bitmap for 100x100 ImageView; OOM on large images; // Main thread: val bitmap = BitmapFactory.decodeResource(resources, R.drawable.huge_photo) // blocks UI for 100ms+",High,https://developer.android.com/topic/performance/graphics/load-bitmap
Performance,Hardware Layer for Animation,"Set View.setLayerType(LAYER_TYPE_HARDWARE) during animations to cache view as GPU texture. The cached texture avoids re-rendering the view on each animation frame. Always reset to LAYER_TYPE_NONE after animation completes. Useful for complex views with many children being translated rotated or alpha-animated.",Set LAYER_TYPE_HARDWARE before animation; reset to LAYER_TYPE_NONE in animation end listener; use for translate rotate alpha animations on complex views,Leave LAYER_TYPE_HARDWARE permanently (wastes GPU memory); use on simple views (overhead not worth it); forget to reset after animation,"view.setLayerType(View.LAYER_TYPE_HARDWARE, null); view.animate().translationX(200f).alpha(0.5f).setDuration(300).withEndAction { view.setLayerType(View.LAYER_TYPE_NONE, null) }.start(); // Or with ObjectAnimator: animator.addListener(object : AnimatorListenerAdapter() { override fun onAnimationStart(a: Animator) { view.layerType = LAYER_TYPE_HARDWARE }; override fun onAnimationEnd(a: Animator) { view.layerType = LAYER_TYPE_NONE } })","// Always hardware: view.setLayerType(LAYER_TYPE_HARDWARE, null) // GPU memory wasted permanently; not reset after animation; // Or: no layer type; complex view with 50 children re-rendered every animation frame; dropped frames",Medium,https://developer.android.com/develop/ui/views/animations/reveal-or-hide-view
Performance,Custom View onDraw Optimization,"Avoid object allocation in onDraw() as it runs 60+ times per second during animations. Pre-allocate Paint Path Rect and other objects in init or constructor. Use canvas.save()/restore() instead of creating new matrices. Minimize invalidate() calls - prefer invalidate(Rect) over full invalidate().",Pre-allocate Paint Path Rect in init/constructor; avoid new objects in onDraw; use invalidate(dirtyRect) not full invalidate; cache calculations that don't change per frame,Allocate Paint or Path in onDraw (60 allocations/second = GC pressure); call invalidate() from onDraw creating infinite loop; full invalidate for partial changes,"class CustomChart(ctx: Context, attrs: AttributeSet?) : View(ctx, attrs) { private val paint = Paint(Paint.ANTI_ALIAS_FLAG).apply { color = Color.BLUE; strokeWidth = 4f }; private val path = Path(); private val bounds = RectF(); override fun onDraw(canvas: Canvas) { canvas.drawPath(path, paint) // reuses pre-allocated objects } }","// Allocations in onDraw: override fun onDraw(canvas: Canvas) { val paint = Paint() // allocated 60x/second; val path = Path() // GC every 100 frames; paint.color = Color.BLUE; canvas.drawPath(path, paint) }; // Infinite loop: override fun onDraw(c: Canvas) { /* draw */; invalidate() } // never stops drawing; 100% CPU",High,https://developer.android.com/develop/ui/views/layout/improving-layouts/optimizing-layouts
Performance,AsyncLayoutInflater,"Use AsyncLayoutInflater to inflate complex layouts off the main thread. Useful for screens with heavy layout trees that cause jank during navigation. The inflated view is delivered to a callback on the main thread. Cannot be used for layouts that create Handlers or use Looper. Replaced by Compose for new development.",Use AsyncLayoutInflater for heavy layouts during navigation; handle callback on main thread; provide fallback synchronous inflation; measure improvement with Systrace,Use for all inflation (overhead for simple layouts); use for layouts creating Handlers; rely solely on async without fallback,"val inflater = AsyncLayoutInflater(this); inflater.inflate(R.layout.heavy_screen, null) { view, _, _ -> setContentView(view); setupViews(view) }; // With fallback: try { AsyncLayoutInflater(this).inflate(R.layout.screen, null, callback) } catch (e: Exception) { setContentView(R.layout.screen) }","// Sync inflation of heavy layout: setContentView(R.layout.heavy_screen) // 80ms on main thread; visible jank during navigation; dropped frames; // No fallback: async inflation fails silently on some layouts; app shows blank screen",Medium,https://developer.android.com/reference/androidx/asynclayoutinflater/view/AsyncLayoutInflater
Performance,RecyclerView setItemViewCacheSize,"Tune RecyclerView.setItemViewCacheSize() to cache recently scrolled-off views before they enter the RecycledViewPool. Cached views skip onBindViewHolder when scrolled back. Default is 2. Increase for fast-scrolling lists with expensive bind operations. Too high wastes memory.",Set setItemViewCacheSize(4-10) for fast-scrolling lists with expensive bind; keep default 2 for simple lists; combine with RecycledViewPool for multiple view types,Set very high cache size (wastes memory for no benefit); set to 0 (forces rebind on every scroll direction change); ignore for complex lists,"recyclerView.setItemViewCacheSize(5) // cache 5 recently scrolled-off items; // For expensive bind (image loading network text): recyclerView.setItemViewCacheSize(10); // Combine with pool: val pool = RecyclerView.RecycledViewPool(); pool.setMaxRecycledViews(VIEW_TYPE_CARD, 20); recyclerView.setRecycledViewPool(pool)","// Default for complex list: recyclerView.setItemViewCacheSize(2) // default; expensive rebind on direction change; // Too high: recyclerView.setItemViewCacheSize(100) // wastes memory; 100 ViewHolders in cache; // Zero: setItemViewCacheSize(0) // every scroll-back rebinds; visible flicker",Medium,https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView#setItemViewCacheSize(int)
Performance,Fragment setMaxLifecycle for ViewPager2,"Use FragmentStateAdapter with setMaxLifecycle to control offscreen fragment lifecycle. By default ViewPager2 with FragmentStateAdapter sets offscreen fragments to STARTED. Use setMaxLifecycle(fragment RESUMED) only for visible fragment. Prevents offscreen fragments from consuming resources.",Let FragmentStateAdapter manage lifecycle; offscreen fragments auto-set to STARTED (not RESUMED); avoid heavy work in onResume for ViewPager2 fragments; use CREATED for minimal offscreen resource usage,Override lifecycle management; assume all ViewPager2 fragments are RESUMED; do heavy loading in onResume without checking visibility,"// FragmentStateAdapter default: offscreen = STARTED, visible = RESUMED; // Custom: override fun onCreateFragment(position: Int): Fragment { return MyFragment().also { lifecycle.addObserver(object : LifecycleEventObserver { override fun onStateChanged(source: LifecycleOwner, event: Lifecycle.Event) { /* fragments managed automatically */ } }) } }; // Check visibility: override fun onResume() { super.onResume(); if (isResumed) loadData() // only load when actually visible }","// Heavy onResume: override fun onResume() { super.onResume(); fetchDataFromServer(); startAnimation() } // runs for ALL ViewPager2 fragments including offscreen; wastes network and CPU; // setOffscreenPageLimit(10) + heavy onResume = 10 concurrent network calls",Medium,https://developer.android.com/reference/androidx/viewpager2/adapter/FragmentStateAdapter
Performance,Window Background for Fast Startup,"Set android:windowBackground to a simple drawable matching your first screen for instant perceived startup. The window background displays immediately during cold start before layout inflation. Use layer-list with solid color and optional centered icon. Avoid complex bitmaps that require decoding.",Set windowBackground to simple layer-list (color + icon); match first screen background color; keep drawable simple (vector or small bitmap); combine with SplashScreen API,Set windowDisablePreview=true (causes blank/black screen); use complex bitmap requiring decode time; no windowBackground with dark theme (white flash),"<style name='Theme.App'><item name='android:windowBackground'>@drawable/launch_background</item></style>; <!-- launch_background.xml: --> <layer-list><item android:drawable='@color/surface' /><item android:gravity='center'><vector android:width='48dp' android:height='48dp' android:viewportWidth='24' android:viewportHeight='24'><path android:fillColor='@color/primary' android:pathData='M12 2L2 12h3v8h6v-6h2v6h6v-8h3z' /></vector></item></layer-list>","// Blank screen: <item name='android:windowDisablePreview'>true</item> // 500ms+ black screen; users think app crashed; // Complex bitmap: <item name='android:windowBackground'>@drawable/huge_splash_photo</item> // 200ms decode time; defeats purpose; // No windowBackground on dark theme: white flash before dark content",High,https://developer.android.com/topic/performance/vitals/launch-time
Performance,Avoid Allocation in onBindViewHolder,"Never allocate objects or create listeners inside RecyclerView.Adapter.onBindViewHolder(). This method runs during scrolling for every visible item. Pre-create click listeners in onCreateViewHolder. Use setTag() to pass position data. Avoid string formatting and number conversion in bind.",Create listeners in onCreateViewHolder; use view.tag to pass data; pre-format strings; cache number formatters; avoid lambda allocation in bind,New OnClickListener per bind call (object allocation on scroll); string formatting in bind; NumberFormat creation in bind; anonymous class per item,"class MyViewHolder(view: View) : RecyclerView.ViewHolder(view) { init { view.setOnClickListener { val pos = bindingAdapterPosition; if (pos != RecyclerView.NO_POSITION) onClick(pos) } } }; // Pre-formatted: override fun onBindViewHolder(holder: VH, pos: Int) { holder.title.text = items[pos].preFormattedTitle // formatted once in data layer }","// Allocation per bind: override fun onBindViewHolder(holder: VH, pos: Int) { holder.itemView.setOnClickListener { onClick(pos) } // new lambda per bind; val formatter = NumberFormat.getCurrencyInstance() // new formatter per bind; holder.price.text = formatter.format(items[pos].price) // format per bind }",High,https://developer.android.com/develop/ui/views/layout/improving-layouts/smooth-scrolling
Performance,invalidate vs requestLayout,"Use invalidate() when only visual appearance changes (color alpha drawing) and requestLayout() when size or position changes. invalidate() triggers onDraw only. requestLayout() triggers full measure+layout+draw pass which is 3-10x more expensive. Never call requestLayout() in onDraw or animations.",Use invalidate() for visual-only changes (color opacity); use requestLayout() for size/position changes; use invalidate(Rect) for partial redraw; never call either from onDraw,"Call requestLayout() for color changes (unnecessarily expensive); call invalidate() when size changes (view not repositioned); call either in onDraw (infinite loop); call requestLayout() during scroll","// Visual change only (color): paint.color = newColor; invalidate() // triggers onDraw only; // Partial redraw: invalidate(dirtyLeft, dirtyTop, dirtyRight, dirtyBottom) // only redraws dirty rect; // Size change: layoutParams.height = newHeight; requestLayout() // triggers measure+layout+draw","// Overkill: paint.color = newColor; requestLayout() // full measure+layout+draw for a color change; 10x more expensive; // Missing layout: layoutParams.height = newHeight; invalidate() // view draws at new position but layout not updated; siblings overlap",Medium,https://developer.android.com/develop/ui/views/layout/improving-layouts/optimizing-layouts
Performance,clipChildren and clipToPadding Optimization,"Set android:clipChildren=false on parent ViewGroup to allow children to draw outside bounds for overlapping designs like badges stickers and cards with shadows. Set android:clipToPadding=false on scrollable views so content scrolls behind padding areas. Both reduce overdraw when children stay within bounds.",Set clipToPadding=false on RecyclerView/ScrollView for edge-to-edge scrolling; use clipChildren=false for overlapping badge/shadow designs; combine both for list with overlapping items,Default clipToPadding=true on RecyclerView (content clips at padding); forget clipChildren=false for badges (badges cut off at parent bounds),"<RecyclerView android:clipToPadding='false' android:paddingTop='16dp' android:paddingBottom='80dp' />; <!-- Badges overlapping: --> <FrameLayout android:clipChildren='false'><ImageView android:layout_gravity='center' /><TextView android:layout_gravity='top|end' android:layout_marginTop='-8dp' android:layout_marginEnd='-8dp' android:text='3' android:background='@drawable/badge' /></FrameLayout>","// Default clip: <RecyclerView android:paddingBottom='80dp' /> // last items hidden behind padding; can't scroll to see them; // Badge cut off: <FrameLayout><ImageView /><BadgeView android:layout_marginTop='-8dp' /></FrameLayout> // badge clipped at parent bounds; top portion invisible",Medium,https://developer.android.com/reference/android/view/ViewGroup#attr_android:clipChildren
Architecture,Depend on Abstractions,High-level modules should depend on abstractions (interfaces) not concrete implementations. This decouples code and enables easy testing with test doubles.,Depend on interfaces for all dependencies especially in domain and data layers,Depend on concrete classes directly preventing test substitution,"class GetUserUseCase(private val repo: UserRepository)",class GetUserUseCase(private val repo: UserRepositoryImpl),Critical,https://en.wikipedia.org/wiki/Dependency_inversion_principle
Architecture,Interface Segregation,Clients should not be forced to depend on interfaces they do not use. Split large interfaces into smaller specific ones (ISP).,Create narrow specific interfaces for consumers,Create one large 'God' interface for everything,"interface UserReader { fun read(): User } interface UserWriter { fun write(u: User) }","interface UserRepo { fun read(): User; fun write(u: User); fun delete(); fun sync(); fun export() }",High,https://en.wikipedia.org/wiki/Interface_segregation_principle
DI,Koin Feature Modules,In Koin organize modules by feature to support modularization and lazy loading. Load feature modules only when needed or at app start for core.,Define Koin modules per feature; include in main app module or load lazily,One giant appModule with all definitions,"val homeModule = module { viewModel { HomeViewModel(get()) } }","val appModule = module { /* 500 lines of all app definitions */ }",Medium,https://insert-koin.io/docs/reference/koin-core/modules
DI,Koin Constructor Injection,Use constructor injection with Koin's `viewModelOf()` and `factoryOf()` for cleaner definitions and type safety. Avoid string-based qualifiers if possible.,Use viewModelOf(::MyVM) and factoryOf(::MyClass),Manual constructor calls in module definitions,"module { viewModelOf(::MyViewModel); factoryOf(::MyUseCase) }","module { viewModel { MyViewModel(get(), get(), get()) } }",Medium,https://insert-koin.io/docs/setup/annotations
Networking,Ktor Engine Config,"Configure Ktor HTTP client with a specific engine (OkHttp for Android, CIO for pure Kotlin) and install ContentNegotiation for JSON.",Configure engine and serialization explicitly,Use default engine without configuration or JSON support,"HttpClient(OkHttp) { install(ContentNegotiation) { json() }; engine { config { followRedirects(true) } } }","HttpClient() // no JSON; default engine might not be optimal",Medium,https://ktor.io/docs/client-engines.html
Networking,Apollo GraphQL Type Safety,Use Apollo Kotlin's generated models for type-safe GraphQL queries. Don't parse raw JSON. Use `responseBased` codegen for best type safety in Kotlin.,Use generated query classes and models; leverage compile-time checking,Manually constructing GraphQL query strings or parsing JSON,"val response = apolloClient.query(GetLaunchQuery(id = '1')).execute()","val query = ""{ launch(id: \""1\"") { site } }"" // raw string; no type safety",High,https://www.apollographql.com/docs/kotlin/
Networking,Apollo Normalized Cache,Use Apollo's normalized cache for offline support and optimistic updates. Data is stored by ID and updates automatically across queries.,Enable normalized cache with MemoryCacheFactory or SqlNormalizedCacheFactory,Disable caching or use HTTP cache only for GraphQL,"apolloClient = ApolloClient.Builder().normalizedCache(SqlNormalizedCacheFactory(ctx, ""apollo.db"")).build()","// No cache; every query hits network; complex manual merging",High,https://www.apollographql.com/docs/kotlin/caching/
Testing,Pure Domain Logic,Keep domain layer (use cases, entities) pure Kotlin/Java with NO Android dependencies. This enables fast JUnit tests without emulators or Robolectric.,Domain classes have zero android.* imports; test with JUnit,Domain classes depending on Context, Bundle, or Parcelable,"class CalculateTotalUseCaseTest { @Test fun test() { /* fast pure unit test */ } }","class UseCase(context: Context) // Now requires Robolectric or Emulator to test",Critical,https://developer.android.com/topic/architecture/domain-layer
Testing,Test Double Strategy,Use Fakes for repositories and data sources in integration/UI tests. Use Mocks (MockK) only for verifying interactions with libraries you don't own.,Create Fake implementations for your own interfaces,Mocking your own interfaces everywhere causing brittle tests,"class FakeUserRepo : UserRepo { val users = mutableListOf<User>() ... }","every { repo.getUser() } returns user // brittle; separate mock setup in every test",High,https://testing.googleblog.com/2013/07/testing-on-toilet-know-your-test-doubles.html
